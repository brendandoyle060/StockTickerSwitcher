(()=>{"use strict";var t,e,o={776:(t,e,o)=>{o.d(e,{G:()=>s});var r,n=o(199),i=o(219),c=(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t){function e(){return t.call(this,"Robinhood","https://robinhood.com")||this}return c(e,t),e.prototype.createUrlForTicker=function(t){return"crypto"===t.tickerType.value?"".concat(this.baseUrl,"/").concat(t.tickerType.value,"/").concat(t.symbol):"".concat(this.baseUrl,"/stocks/").concat(t.symbol)},e.prototype.getTicker=function(t,e){var o=e.querySelector("title").textContent.split(" ")[0];return new i.v(o,this.getName(e),this.getTickerType(this,t,e))},e.prototype.getName=function(t){return t.querySelector("main header h1").textContent.trim()},e.prototype.isCrypto=function(t){return t.includes("crypto")},e.prototype.isEtf=function(t){return!(null===t.querySelector("#etf-category"))},e}(n.T)},199:(t,e,o)=>{o.d(e,{T:()=>n});var r=o(110),n=function(){function t(t,e){this.name=t,this.baseUrl=e}return t.prototype.is=function(){return this.name},t.prototype.createUrlForTicker=function(t){},t.prototype.getTickerType=function(t,e,o){return t.isEtf(o)?new r.C("etf"):t.isCrypto(e)?new r.C("crypto"):new r.C("stock")},t.prototype.isCrypto=function(t){},t.prototype.isEtf=function(t){},t}()},455:(t,e,o)=>{o.d(e,{k:()=>s});var r,n=o(199),i=o(219),c=(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t){function e(){return t.call(this,"YahooFinance","https://finance.yahoo.com")||this}return c(e,t),e.prototype.createUrlForTicker=function(t){var e=t.getHyphenatedTickerSymbol();return"crypto"===t.tickerType.value&&(e+="-USD"),"".concat(this.baseUrl,"/quote/").concat(e)},e.prototype.getTicker=function(t,e){return new i.v(this.getTickerFromPage(e,this.isCrypto(e)),this.getName(e),this.getTickerType(this,e,e))},e.prototype.getQuoteHeaderInfoId=function(){return"#quote-header-info"},e.prototype.getName=function(t){var e=this.getCompanyHeader(t).split(" (")[0];return this.removeExtraWhitespace(e)},e.prototype.getTickerFromPage=function(t,e){var o=this.getCompanyHeader(t).split(" (")[1];return o=o.split(")")[0],e&&(o=o.split("-")[0]),o},e.prototype.getCompanyHeader=function(t){return t.querySelector(this.getQuoteHeaderInfoId()+" h1").textContent.trim()},e.prototype.removeExtraWhitespace=function(t){var e=new RegExp("\\s+"),o=t.split(e),r="";return o.forEach((function(t){r=r+t.trim()+" "})),r.trim()},e.prototype.isCrypto=function(t){return t.querySelector(this.getQuoteHeaderInfoId()+"").textContent.includes("CoinMarketCap")},e.prototype.isEtf=function(t){var e=t.querySelector("#quote-summary");return this.removeExtraWhitespace(e.textContent).includes("Net Assets")},e}(n.T)},219:(t,e,o)=>{o.d(e,{v:()=>r});var r=function(){function t(t,e,o){this.symbol=this.convertHyphenInTickerSymbol(t),this.name=this.removeExtraWhitespace(e),this.tickerType=o}return t.prototype.convertHyphenInTickerSymbol=function(t){return t.replace("-",".")},t.prototype.getHyphenatedTickerSymbol=function(){return this.symbol.replace(".","-")},t.prototype.removeExtraWhitespace=function(t){var e=new RegExp("\\s+"),o=t.split(e),r="";return o.forEach((function(t){r=r+t.trim()+" "})),r.trim()},t.prototype.toString=function(){return"Ticker - symbol: ".concat(this.symbol,", name: ").concat(this.name,", type: ").concat(this.tickerType)},t.prototype.equals=function(t){return this.symbol===t.symbol&&this.nameEquals(t.name)&&this.tickerType.equals(t.tickerType)},t.prototype.nameEquals=function(t){var e=this.name.toLowerCase();return t=t.toLowerCase(),e.includes(t)||t.includes(e)},t}()},110:(t,e,o)=>{o.d(e,{C:()=>r});var r=function(){function t(t){if(this.VALID_TYPES=["stock","etf","mutualfund","crypto","future","bond"],t=t.toLowerCase().trim(),!this.isValidType(t))throw new Error("Invalid tickerType: "+t);this.value=t}return t.prototype.isValidType=function(t){return this.VALID_TYPES.includes(t)},t.prototype.toString=function(){return this.value},t.prototype.equals=function(t){return this.value===t.value},t}()}},r={};function n(t){var e=r[t];if(void 0!==e)return e.exports;var i=r[t]={exports:{}};return o[t](i,i.exports,n),i.exports}n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),t=n(776),e=n(455),chrome.runtime.onMessage.addListener((function(o,r,n){if("clicked_browser_action"===o.message){var i=void 0,c=void 0;if(o.url.toLowerCase().includes("robinhood")?(i=new t.G,c=new e.k):(i=new e.k,c=new t.G),(p=o.url).startsWith("https://robinhood.com/stocks/")||p.startsWith("https://robinhood.com/crypto/")||p.startsWith("https://finance.yahoo.com/quote/")){var s=i.getTicker(o.url,document);console.log(s.toString()),chrome.runtime.sendMessage({message:"open_new_tab",tickerSymbol:s.symbol,tickerName:s.name,tickerType:s.tickerType+"",index:o.index,fromSite:i.is(),toSite:c.is()})}else chrome.runtime.sendMessage({message:"open_homepage",index:o.index,fromSite:i.is(),toSite:c.is()})}var p}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LENBQUNLLEVBQUtDLElBQVVMLE9BQU9NLFVBQVVDLGVBQWVDLEtBQUtKLEVBQUtDLEcsa0JDSzlFSSxPQUFPQyxRQUFRQyxVQUFVQyxhQUFZLFNBQ2pDQyxFQUNBQyxFQUNBQyxHQUVBLEdBQXdCLDJCQUFwQkYsRUFBUUcsUUFBc0MsQ0FDOUMsSUFBSUMsT0FBUSxFQUNSQyxPQUFNLEVBVVYsR0FSSUwsRUFBUXRFLElBQUl3QyxjQUFjOUIsU0FBUyxjQUNuQ2dFLEVBQVcsSUFBSSxJQUNmQyxFQUFTLElBQUksTUFFYkQsRUFBVyxJQUFJLElBQ2ZDLEVBQVMsSUFBSSxNQTJCRjNFLEVBeEJHc0UsRUFBUXRFLEtBMEJ0QjRFLFdBQVcsa0NBQ2Y1RSxFQUFJNEUsV0FBVyxrQ0FDZjVFLEVBQUk0RSxXQUFXLG9DQTVCaUIsQ0FDNUIsSUFBSW5GLEVBQWlCaUYsRUFBUzNFLFVBQVV1RSxFQUFRdEUsSUFBS0MsVUFDckQ0RSxRQUFRQyxJQUFJckYsRUFBT3lDLFlBRW5CZ0MsT0FBT0MsUUFBUVksWUFBWSxDQUN2Qk4sUUFBUyxlQUNUTyxhQUFjdkYsRUFBT0ssT0FDckJtRixXQUFZeEYsRUFBT21CLEtBQ25CbEIsV0FBWUQsRUFBT0MsV0FBYSxHQUNoQ3dGLE1BQU9aLEVBQVFZLE1BQ2ZSLFNBQVVBLEVBQVM3RCxLQUNuQjhELE9BQVFBLEVBQU85RCxNLE1BR25CcUQsT0FBT0MsUUFBUVksWUFBWSxDQUN2Qk4sUUFBUyxnQkFDVFMsTUFBT1osRUFBUVksTUFDZlIsU0FBVUEsRUFBUzdELEtBQ25COEQsT0FBUUEsRUFBTzlELE0sQ0FNL0IsSUFBdUJiLENBRnZCLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yb2Jpbmhvb2R0b3lhaG9vZmluYW5jZS8uL3NyYy9zaXRlcy9Sb2Jpbmhvb2QudHMiLCJ3ZWJwYWNrOi8vcm9iaW5ob29kdG95YWhvb2ZpbmFuY2UvLi9zcmMvc2l0ZXMvU2l0ZS50cyIsIndlYnBhY2s6Ly9yb2Jpbmhvb2R0b3lhaG9vZmluYW5jZS8uL3NyYy9zaXRlcy9ZYWhvb0ZpbmFuY2UudHMiLCJ3ZWJwYWNrOi8vcm9iaW5ob29kdG95YWhvb2ZpbmFuY2UvLi9zcmMvdGlja2Vycy9UaWNrZXIudHMiLCJ3ZWJwYWNrOi8vcm9iaW5ob29kdG95YWhvb2ZpbmFuY2UvLi9zcmMvdGlja2Vycy9UaWNrZXJUeXBlLnRzIiwid2VicGFjazovL3JvYmluaG9vZHRveWFob29maW5hbmNlL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3JvYmluaG9vZHRveWFob29maW5hbmNlL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9yb2Jpbmhvb2R0b3lhaG9vZmluYW5jZS93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3JvYmluaG9vZHRveWFob29maW5hbmNlLy4vc3JjL2NvbnRlbnRTY3JpcHRzL2NvbnRlbnRTY3JpcHQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU2l0ZSB9IGZyb20gXCIuL1NpdGVcIjtcbmltcG9ydCB7IFRpY2tlclR5cGUgfSBmcm9tIFwiLi4vdGlja2Vycy9UaWNrZXJUeXBlXCI7XG5pbXBvcnQgeyBUaWNrZXIgfSBmcm9tIFwiLi4vdGlja2Vycy9UaWNrZXJcIjtcblxuZXhwb3J0IGNsYXNzIFJvYmluaG9vZCBleHRlbmRzIFNpdGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcihcIlJvYmluaG9vZFwiLCBgaHR0cHM6Ly9yb2Jpbmhvb2QuY29tYCk7XG4gICAgfVxuXG4gICAgY3JlYXRlVXJsRm9yVGlja2VyKHRpY2tlcjogVGlja2VyKTogc3RyaW5nIHtcbiAgICAgICAgaWYgKHRpY2tlci50aWNrZXJUeXBlLnZhbHVlID09PSBcImNyeXB0b1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gYCR7dGhpcy5iYXNlVXJsfS8ke3RpY2tlci50aWNrZXJUeXBlLnZhbHVlfS8ke3RpY2tlci5zeW1ib2x9YDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIEVURnMgYWxzbyBnZXQgdGhlICdzdG9ja3MnIHBhdGggaW4gdGhlIHVybCBvbiBSSFxuICAgICAgICAgICAgcmV0dXJuIGAke3RoaXMuYmFzZVVybH0vc3RvY2tzLyR7dGlja2VyLnN5bWJvbH1gO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0VGlja2VyKHVybDogc3RyaW5nLCBkb2N1bWVudDogRG9jdW1lbnQpOiBUaWNrZXIge1xuICAgICAgICB2YXIgdGl0bGVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcInRpdGxlXCIpO1xuICAgICAgICB2YXIgdGl0bGUgPSB0aXRsZUVsZW1lbnQudGV4dENvbnRlbnQ7XG4gICAgICAgIHZhciBzcGxpdFRpdGxlID0gdGl0bGUuc3BsaXQoXCIgXCIpO1xuXG4gICAgICAgIGxldCB0aWNrZXJTdHJpbmcgPSBzcGxpdFRpdGxlWzBdO1xuICAgICAgICByZXR1cm4gbmV3IFRpY2tlcihcbiAgICAgICAgICAgIHRpY2tlclN0cmluZyxcbiAgICAgICAgICAgIHRoaXMuZ2V0TmFtZShkb2N1bWVudCksXG4gICAgICAgICAgICB0aGlzLmdldFRpY2tlclR5cGUodGhpcywgdXJsLCBkb2N1bWVudClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBnZXROYW1lKGRvY3VtZW50OiBEb2N1bWVudCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwibWFpbiBoZWFkZXIgaDFcIikudGV4dENvbnRlbnQudHJpbSgpO1xuICAgIH1cblxuICAgIGlzQ3J5cHRvKHVybDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB1cmwuaW5jbHVkZXMoXCJjcnlwdG9cIik7XG4gICAgfVxuXG4gICAgaXNFdGYoZG9jdW1lbnQ6IERvY3VtZW50KTogYm9vbGVhbiB7XG4gICAgICAgIGxldCBldGZDYXRlZ29yeSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZXRmLWNhdGVnb3J5XCIpO1xuICAgICAgICByZXR1cm4gIShldGZDYXRlZ29yeSA9PT0gbnVsbCk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgVGlja2VyIH0gZnJvbSBcIi4uL3RpY2tlcnMvVGlja2VyXCI7XG5pbXBvcnQgeyBUaWNrZXJUeXBlIH0gZnJvbSBcIi4uL3RpY2tlcnMvVGlja2VyVHlwZVwiO1xuXG5leHBvcnQgY2xhc3MgU2l0ZSB7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIGJhc2VVcmw6IHN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yKG5hbWU6IHN0cmluZywgYmFzZVVybDogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuYmFzZVVybCA9IGJhc2VVcmw7XG4gICAgfVxuXG4gICAgaXMoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubmFtZTtcbiAgICB9XG5cbiAgICBjcmVhdGVVcmxGb3JUaWNrZXIodGlja2VyOiBUaWNrZXIpOiBhbnkge31cblxuICAgIGdldFRpY2tlclR5cGUoc2l0ZTogU2l0ZSwgY3J5cHRvQXJnOiBhbnksIGRvY3VtZW50OiBEb2N1bWVudCk6IFRpY2tlclR5cGUge1xuICAgICAgICBpZiAoc2l0ZS5pc0V0Zihkb2N1bWVudCkpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVGlja2VyVHlwZShcImV0ZlwiKTtcbiAgICAgICAgfSBlbHNlIGlmIChzaXRlLmlzQ3J5cHRvKGNyeXB0b0FyZykpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVGlja2VyVHlwZShcImNyeXB0b1wiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVGlja2VyVHlwZShcInN0b2NrXCIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHR5cGUgaGVyZSBpcyBcImFueVwiLCBiZWNhdXNlIHdlIGRvbid0IHdhbnQgdG8gcmV0dXJuIGEgdmFsdWUgaW4gdGhlIHN1cGVyY2xhc3MsIHdoaWNoIHdlIHdvdWxkIGhhdmUgdG8gc2luY2Ugd2UncmUgdXNpbmcgdGhlbSBpbiBnZXRUaWNrZXJUeXBlIGFib3ZlLlxuICAgIC8vIEltcGxlbWVudGF0aW9ucyBvZiB0aGVzZSBtZXRob2RzIGluIHN1YmNsYXNzZXMgc2hvdWxkIHJldHVybiBhIGJvb2xlYW4uXG4gICAgaXNDcnlwdG8oeDogYW55KTogYW55IHt9XG4gICAgaXNFdGYoZG9jdW1lbnQ6IERvY3VtZW50KTogYW55IHt9XG59XG4iLCJpbXBvcnQgeyBTaXRlIH0gZnJvbSBcIi4vU2l0ZVwiO1xuaW1wb3J0IHsgVGlja2VyVHlwZSB9IGZyb20gXCIuLi90aWNrZXJzL1RpY2tlclR5cGVcIjtcbmltcG9ydCB7IFRpY2tlciB9IGZyb20gXCIuLi90aWNrZXJzL1RpY2tlclwiO1xuXG5leHBvcnQgY2xhc3MgWWFob29GaW5hbmNlIGV4dGVuZHMgU2l0ZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKFwiWWFob29GaW5hbmNlXCIsIGBodHRwczovL2ZpbmFuY2UueWFob28uY29tYCk7XG4gICAgfVxuXG4gICAgY3JlYXRlVXJsRm9yVGlja2VyKHRpY2tlcjogVGlja2VyKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IHM6IHN0cmluZyA9IHRpY2tlci5nZXRIeXBoZW5hdGVkVGlja2VyU3ltYm9sKCk7XG5cbiAgICAgICAgLy8gSWYgdGhlIHBhZ2UgdGhhdCB3ZSdyZSBvbiBpcyBmb3IgYSBzdG9jayBvciBFVEYsIHRoZW4gd2UgY2FuIGp1c3QgbGVhdmUgdGhlIHRpY2tlciBhcy1pcy5cbiAgICAgICAgLy8gSWYgdGhlIHBhZ2UgdGhhdCB3ZSdyZSBvbiBpcyBmb3IgYSBjcnlwdG9jdXJyZW5jeSwgdGhlbiB3ZSBuZWVkXG4gICAgICAgIC8vIHRvIGFkanVzdCB0aGUgdGlja2VyIHRvIGFkZCB0aGUgXCJxdW90ZSBjdXJyZW5jeVwiIC0tXG4gICAgICAgIC8vIHRoZSBjdXJyZW5jeSBmb3Igd2hpY2ggd2UncmUgZGlzcGxheWluZyB0aGUgZXhjaGFuZ2UgcmF0ZSB0byB0aGUgY3J5cHRvY3VycmVuY3kuXG4gICAgICAgIC8vIEJ5IGRlZmF1bHQsIHdlJ2xsIHVzZSB0aGUgVVMgRG9sbGFyIChcIlVTRFwiKS5cbiAgICAgICAgLy8gVE9ETzogQWxsb3cgdXNlciB0byBzZWxlY3QgdGhlaXIgcHJlZmVycmVkIHF1b3RlIGN1cnJlbmN5IGluIE9wdGlvbnMgbWVudS5cbiAgICAgICAgaWYgKHRpY2tlci50aWNrZXJUeXBlLnZhbHVlID09PSBcImNyeXB0b1wiKSB7XG4gICAgICAgICAgICBzID0gcyArIGAtVVNEYDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYCR7dGhpcy5iYXNlVXJsfS9xdW90ZS8ke3N9YDtcbiAgICB9XG5cbiAgICBnZXRUaWNrZXIodXJsOiBzdHJpbmcsIGRvY3VtZW50OiBEb2N1bWVudCk6IFRpY2tlciB7XG4gICAgICAgIHJldHVybiBuZXcgVGlja2VyKFxuICAgICAgICAgICAgdGhpcy5nZXRUaWNrZXJGcm9tUGFnZShkb2N1bWVudCwgdGhpcy5pc0NyeXB0byhkb2N1bWVudCkpLFxuICAgICAgICAgICAgdGhpcy5nZXROYW1lKGRvY3VtZW50KSxcbiAgICAgICAgICAgIHRoaXMuZ2V0VGlja2VyVHlwZSh0aGlzLCBkb2N1bWVudCwgZG9jdW1lbnQpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgZ2V0UXVvdGVIZWFkZXJJbmZvSWQoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIFwiI3F1b3RlLWhlYWRlci1pbmZvXCI7XG4gICAgfVxuXG4gICAgZ2V0TmFtZShkb2N1bWVudDogRG9jdW1lbnQpOiBzdHJpbmcge1xuICAgICAgICBsZXQgbmFtZSA9IHRoaXMuZ2V0Q29tcGFueUhlYWRlcihkb2N1bWVudCk7XG4gICAgICAgIGxldCBuYW1lV2l0aFRpY2tlclJlbW92ZWQgPSBuYW1lLnNwbGl0KFwiIChcIilbMF07XG4gICAgICAgIHJldHVybiB0aGlzLnJlbW92ZUV4dHJhV2hpdGVzcGFjZShuYW1lV2l0aFRpY2tlclJlbW92ZWQpO1xuICAgIH1cblxuICAgIGdldFRpY2tlckZyb21QYWdlKGRvY3VtZW50OiBEb2N1bWVudCwgaXNDcnlwdG86IGJvb2xlYW4pOiBzdHJpbmcge1xuICAgICAgICBsZXQgbmFtZSA9IHRoaXMuZ2V0Q29tcGFueUhlYWRlcihkb2N1bWVudCk7XG4gICAgICAgIGxldCBjbGVhbmVkVXBTeW1ib2wgPSBuYW1lLnNwbGl0KFwiIChcIilbMV07XG4gICAgICAgIGNsZWFuZWRVcFN5bWJvbCA9IGNsZWFuZWRVcFN5bWJvbC5zcGxpdChcIilcIilbMF07XG4gICAgICAgIGlmIChpc0NyeXB0bykge1xuICAgICAgICAgICAgY2xlYW5lZFVwU3ltYm9sID0gY2xlYW5lZFVwU3ltYm9sLnNwbGl0KFwiLVwiKVswXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjbGVhbmVkVXBTeW1ib2w7XG4gICAgfVxuXG4gICAgZ2V0Q29tcGFueUhlYWRlcihkb2N1bWVudDogRG9jdW1lbnQpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gZG9jdW1lbnRcbiAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuZ2V0UXVvdGVIZWFkZXJJbmZvSWQoKSArIFwiIGgxXCIpXG4gICAgICAgICAgICAudGV4dENvbnRlbnQudHJpbSgpO1xuICAgIH1cblxuICAgIHJlbW92ZUV4dHJhV2hpdGVzcGFjZShzdHI6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIGxldCByZWdleCA9IG5ldyBSZWdFeHAoXCJcXFxccytcIik7XG4gICAgICAgIGxldCBzcGxpdCA9IHN0ci5zcGxpdChyZWdleCk7XG4gICAgICAgIGxldCBmdWxsID0gXCJcIjtcbiAgICAgICAgc3BsaXQuZm9yRWFjaChmdW5jdGlvbiAod29yZCkge1xuICAgICAgICAgICAgZnVsbCA9IGZ1bGwgKyB3b3JkLnRyaW0oKSArIFwiIFwiO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gR2V0IHJpZCBvZiB0aGUgb25lIGV4dHJhIHNwYWNlIGF0IHRoZSBlbmQgYmVmb3JlIHdlIHJldHVyblxuICAgICAgICByZXR1cm4gZnVsbC50cmltKCk7XG4gICAgfVxuXG4gICAgaXNDcnlwdG8oZG9jdW1lbnQ6IERvY3VtZW50KTogYm9vbGVhbiB7XG4gICAgICAgIGxldCBxdW90ZUhlYWRlckluZm8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgICAgdGhpcy5nZXRRdW90ZUhlYWRlckluZm9JZCgpICsgXCJcIlxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gcXVvdGVIZWFkZXJJbmZvLnRleHRDb250ZW50LmluY2x1ZGVzKFwiQ29pbk1hcmtldENhcFwiKTtcbiAgICB9XG5cbiAgICBpc0V0Zihkb2N1bWVudDogRG9jdW1lbnQpOiBib29sZWFuIHtcbiAgICAgICAgbGV0IHF1b3RlU3VtbWFyeSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcXVvdGUtc3VtbWFyeVwiKTtcbiAgICAgICAgbGV0IHRleHRDbGVhbmVkVXAgPSB0aGlzLnJlbW92ZUV4dHJhV2hpdGVzcGFjZShcbiAgICAgICAgICAgIHF1b3RlU3VtbWFyeS50ZXh0Q29udGVudFxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gdGV4dENsZWFuZWRVcC5pbmNsdWRlcyhcIk5ldCBBc3NldHNcIik7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgVGlja2VyVHlwZSB9IGZyb20gXCIuL1RpY2tlclR5cGVcIjtcblxuZXhwb3J0IGNsYXNzIFRpY2tlciB7XG4gICAgc3ltYm9sOiBzdHJpbmc7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIHRpY2tlclR5cGU6IFRpY2tlclR5cGU7XG5cbiAgICBjb25zdHJ1Y3RvcihzeW1ib2w6IHN0cmluZywgbmFtZTogc3RyaW5nLCB0aWNrZXJUeXBlOiBUaWNrZXJUeXBlKSB7XG4gICAgICAgIHRoaXMuc3ltYm9sID0gdGhpcy5jb252ZXJ0SHlwaGVuSW5UaWNrZXJTeW1ib2woc3ltYm9sKTtcbiAgICAgICAgdGhpcy5uYW1lID0gdGhpcy5yZW1vdmVFeHRyYVdoaXRlc3BhY2UobmFtZSk7XG4gICAgICAgIHRoaXMudGlja2VyVHlwZSA9IHRpY2tlclR5cGU7XG4gICAgfVxuXG4gICAgY29udmVydEh5cGhlbkluVGlja2VyU3ltYm9sKHN5bWJvbDogc3RyaW5nKSB7XG4gICAgICAgIHJldHVybiBzeW1ib2wucmVwbGFjZShcIi1cIiwgXCIuXCIpO1xuICAgIH1cblxuICAgIGdldEh5cGhlbmF0ZWRUaWNrZXJTeW1ib2woKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN5bWJvbC5yZXBsYWNlKFwiLlwiLCBcIi1cIik7XG4gICAgfVxuXG4gICAgcmVtb3ZlRXh0cmFXaGl0ZXNwYWNlKHN0cjogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IHJlZ2V4ID0gbmV3IFJlZ0V4cChcIlxcXFxzK1wiKTtcbiAgICAgICAgbGV0IHNwbGl0ID0gc3RyLnNwbGl0KHJlZ2V4KTtcbiAgICAgICAgbGV0IGZ1bGwgPSBcIlwiO1xuICAgICAgICBzcGxpdC5mb3JFYWNoKGZ1bmN0aW9uICh3b3JkKSB7XG4gICAgICAgICAgICBmdWxsID0gZnVsbCArIHdvcmQudHJpbSgpICsgXCIgXCI7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBHZXQgcmlkIG9mIHRoZSBvbmUgZXh0cmEgc3BhY2UgYXQgdGhlIGVuZCBiZWZvcmUgd2UgcmV0dXJuXG4gICAgICAgIHJldHVybiBmdWxsLnRyaW0oKTtcbiAgICB9XG5cbiAgICB0b1N0cmluZygpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gYFRpY2tlciAtIHN5bWJvbDogJHt0aGlzLnN5bWJvbH0sIG5hbWU6ICR7dGhpcy5uYW1lfSwgdHlwZTogJHt0aGlzLnRpY2tlclR5cGV9YDtcbiAgICB9XG5cbiAgICBlcXVhbHModGhhdDogVGlja2VyKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICB0aGlzLnN5bWJvbCA9PT0gdGhhdC5zeW1ib2wgJiZcbiAgICAgICAgICAgIHRoaXMubmFtZUVxdWFscyh0aGF0Lm5hbWUpICYmXG4gICAgICAgICAgICB0aGlzLnRpY2tlclR5cGUuZXF1YWxzKHRoYXQudGlja2VyVHlwZSlcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVjayB0byBzZWUgaWYgYSBnaXZlbiBjb21wYW55J3MgbmFtZSBtYXRjaGVzIHRoaXMgY29tcGFueSdzIG5hbWUuXG4gICAgICogU2luY2UgdGhlc2UgdmFsdWVzIGFyZSBiZWluZyBwdWxsZWQgZnJvbSBlYWNoIHNpdGUgd2UncmUgdmlzaXRpbmcgKGFuZCB3ZSBjYW4ndCBjb250cm9sIHdoYXQgdGhleSBjYWxsIHRoZW0pLFxuICAgICAqIGFuZCBzaW5jZSB0aGVzZSBlcXVhbGl0eSBmdW5jdGlvbnMgYXJlIChhdCBsZWFzdCBzbyBmYXIpIG9ubHkgYmVpbmcgdXNlZCB0byBmYWNpbGl0YXRlIHVuaXQgdGVzdGluZyBhbnl3YXksXG4gICAgICogdGhpcyBmdW5jdGlvbiBpcyBiYXNpY2FsbHkganVzdCBjaGVja2luZyB0byBzZWUgaWYgdGhlIG5hbWVzIGFyZSBcImNsb3NlIGVub3VnaFwiIGJ5IGNoZWNraW5nIHRvIHNlZSBpZiBvbmUgc3RyaW5nIGluY2x1ZGVzIHRoZSBvdGhlci5cbiAgICAgKlxuICAgICAqIEZvciBleGFtcGxlLCB0aGUgUkggcGFnZSBmb3IgJFNQWSBjYWxscyBpdCBcIlNQRFIgUyZQIDUwMCBFVEZcIiwgd2hpbGUgWUYgY2FsbHMgaXQgXCJTUERSIFMmUCA1MDAgRVRGIFRydXN0XCIuXG4gICAgICogRXZlbiB0aG91Z2ggdGhlIHN0cmluZ3MgYXJlbid0IGlkZW50aWNhbCwgd2Ugc3RpbGwgd2FudCB0aGVzZSB0byBiZSBjb25zaWRlcmVkIGVxdWFsLCBzbyB3ZSBjYW4ganVzdCBjaGVjayBpZiBvbmUgY29udGFpbnMgdGhlIG90aGVyLCB3aGljaCBpdCBkb2VzLlxuICAgICAqXG4gICAgICogVE9ETyAtIHRoZXJlIHdpbGwgcHJvYmFibHkgYmUgc29tZSBlZGdlIGNhc2VzIGZvciB3aGljaCB0aGlzIHNvbHV0aW9uIHdpbGwgbm90IHdvcmssIHNvIHRoaXMgd2lsbCBsaWtlbHkgaGF2ZSB0byBiZSByZXZpc2VkIGluIHRoZSBmdXR1cmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdGhhdE5hbWUgLSBuYW1lIG9mIHRoZSBjb21wYW55IHRvIHdoaWNoIHdlJ3JlIGNvbXBhcmluZyB0aGlzIGNvbXBhbnlcbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBjb21wYW5pZXMnIG5hbWVzIGFyZSB0aGUgc2FtZSAob3IgYXQgbGVhc3QsIGNsb3NlIGVub3VnaClcbiAgICAgKi9cbiAgICBuYW1lRXF1YWxzKHRoYXROYW1lOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgbGV0IHRoaXNOYW1lID0gdGhpcy5uYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIHRoYXROYW1lID0gdGhhdE5hbWUudG9Mb3dlckNhc2UoKTtcblxuICAgICAgICByZXR1cm4gdGhpc05hbWUuaW5jbHVkZXModGhhdE5hbWUpIHx8IHRoYXROYW1lLmluY2x1ZGVzKHRoaXNOYW1lKTtcbiAgICB9XG59XG4iLCJleHBvcnQgY2xhc3MgVGlja2VyVHlwZSB7XG4gICAgVkFMSURfVFlQRVMgPSBbXCJzdG9ja1wiLCBcImV0ZlwiLCBcIm11dHVhbGZ1bmRcIiwgXCJjcnlwdG9cIiwgXCJmdXR1cmVcIiwgXCJib25kXCJdO1xuICAgIHZhbHVlOiBzdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3Rvcih0aWNrZXJUeXBlOiBzdHJpbmcpIHtcbiAgICAgICAgdGlja2VyVHlwZSA9IHRpY2tlclR5cGUudG9Mb3dlckNhc2UoKS50cmltKCk7XG4gICAgICAgIGlmICh0aGlzLmlzVmFsaWRUeXBlKHRpY2tlclR5cGUpKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gdGlja2VyVHlwZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgdGlja2VyVHlwZTogXCIgKyB0aWNrZXJUeXBlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlzVmFsaWRUeXBlKHR0OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuVkFMSURfVFlQRVMuaW5jbHVkZXModHQpO1xuICAgIH1cblxuICAgIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlO1xuICAgIH1cblxuICAgIGVxdWFscyh0aGF0OiBUaWNrZXJUeXBlKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlID09PSB0aGF0LnZhbHVlO1xuICAgIH1cbn1cbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiaW1wb3J0IHsgUm9iaW5ob29kIH0gZnJvbSBcIi4uL3NpdGVzL1JvYmluaG9vZFwiO1xuaW1wb3J0IHsgWWFob29GaW5hbmNlIH0gZnJvbSBcIi4uL3NpdGVzL1lhaG9vRmluYW5jZVwiO1xuaW1wb3J0IHsgVGlja2VyIH0gZnJvbSBcIi4uL3RpY2tlcnMvVGlja2VyXCI7XG5cbihmdW5jdGlvbiAoKSB7XG4gICAgY2hyb21lLnJ1bnRpbWUub25NZXNzYWdlLmFkZExpc3RlbmVyKGZ1bmN0aW9uIGljb25DbGlja2VkKFxuICAgICAgICByZXF1ZXN0LFxuICAgICAgICBzZW5kZXIsXG4gICAgICAgIHNlbmRSZXNwb25zZVxuICAgICkge1xuICAgICAgICBpZiAocmVxdWVzdC5tZXNzYWdlID09PSBcImNsaWNrZWRfYnJvd3Nlcl9hY3Rpb25cIikge1xuICAgICAgICAgICAgbGV0IGZyb21TaXRlO1xuICAgICAgICAgICAgbGV0IHRvU2l0ZTtcblxuICAgICAgICAgICAgaWYgKHJlcXVlc3QudXJsLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJyb2Jpbmhvb2RcIikpIHtcbiAgICAgICAgICAgICAgICBmcm9tU2l0ZSA9IG5ldyBSb2Jpbmhvb2QoKTtcbiAgICAgICAgICAgICAgICB0b1NpdGUgPSBuZXcgWWFob29GaW5hbmNlKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGZyb21TaXRlID0gbmV3IFlhaG9vRmluYW5jZSgpO1xuICAgICAgICAgICAgICAgIHRvU2l0ZSA9IG5ldyBSb2Jpbmhvb2QoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHBhZ2VIYXNUaWNrZXIocmVxdWVzdC51cmwpKSB7XG4gICAgICAgICAgICAgICAgbGV0IHRpY2tlcjogVGlja2VyID0gZnJvbVNpdGUuZ2V0VGlja2VyKHJlcXVlc3QudXJsLCBkb2N1bWVudCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2codGlja2VyLnRvU3RyaW5nKCkpO1xuXG4gICAgICAgICAgICAgICAgY2hyb21lLnJ1bnRpbWUuc2VuZE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIm9wZW5fbmV3X3RhYlwiLFxuICAgICAgICAgICAgICAgICAgICB0aWNrZXJTeW1ib2w6IHRpY2tlci5zeW1ib2wsXG4gICAgICAgICAgICAgICAgICAgIHRpY2tlck5hbWU6IHRpY2tlci5uYW1lLFxuICAgICAgICAgICAgICAgICAgICB0aWNrZXJUeXBlOiB0aWNrZXIudGlja2VyVHlwZSArIFwiXCIsXG4gICAgICAgICAgICAgICAgICAgIGluZGV4OiByZXF1ZXN0LmluZGV4LFxuICAgICAgICAgICAgICAgICAgICBmcm9tU2l0ZTogZnJvbVNpdGUuaXMoKSxcbiAgICAgICAgICAgICAgICAgICAgdG9TaXRlOiB0b1NpdGUuaXMoKSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY2hyb21lLnJ1bnRpbWUuc2VuZE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIm9wZW5faG9tZXBhZ2VcIixcbiAgICAgICAgICAgICAgICAgICAgaW5kZXg6IHJlcXVlc3QuaW5kZXgsXG4gICAgICAgICAgICAgICAgICAgIGZyb21TaXRlOiBmcm9tU2l0ZS5pcygpLFxuICAgICAgICAgICAgICAgICAgICB0b1NpdGU6IHRvU2l0ZS5pcygpLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBmdW5jdGlvbiBwYWdlSGFzVGlja2VyKHVybDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICB1cmwuc3RhcnRzV2l0aChcImh0dHBzOi8vcm9iaW5ob29kLmNvbS9zdG9ja3MvXCIpIHx8XG4gICAgICAgICAgICB1cmwuc3RhcnRzV2l0aChcImh0dHBzOi8vcm9iaW5ob29kLmNvbS9jcnlwdG8vXCIpIHx8XG4gICAgICAgICAgICB1cmwuc3RhcnRzV2l0aChcImh0dHBzOi8vZmluYW5jZS55YWhvby5jb20vcXVvdGUvXCIpXG4gICAgICAgICk7XG4gICAgfVxufSkoKTtcbiJdLCJuYW1lcyI6WyJjcmVhdGVVcmxGb3JUaWNrZXIiLCJ0aWNrZXIiLCJ0aWNrZXJUeXBlIiwidmFsdWUiLCJ0aGlzIiwiYmFzZVVybCIsInN5bWJvbCIsImdldFRpY2tlciIsInVybCIsImRvY3VtZW50IiwidGlja2VyU3RyaW5nIiwicXVlcnlTZWxlY3RvciIsInRleHRDb250ZW50Iiwic3BsaXQiLCJnZXROYW1lIiwiZ2V0VGlja2VyVHlwZSIsInRyaW0iLCJpc0NyeXB0byIsImluY2x1ZGVzIiwiaXNFdGYiLCJuYW1lIiwiaXMiLCJzaXRlIiwiY3J5cHRvQXJnIiwieCIsInMiLCJnZXRIeXBoZW5hdGVkVGlja2VyU3ltYm9sIiwiZ2V0VGlja2VyRnJvbVBhZ2UiLCJnZXRRdW90ZUhlYWRlckluZm9JZCIsIm5hbWVXaXRoVGlja2VyUmVtb3ZlZCIsImdldENvbXBhbnlIZWFkZXIiLCJyZW1vdmVFeHRyYVdoaXRlc3BhY2UiLCJjbGVhbmVkVXBTeW1ib2wiLCJzdHIiLCJyZWdleCIsIlJlZ0V4cCIsImZ1bGwiLCJmb3JFYWNoIiwid29yZCIsInF1b3RlU3VtbWFyeSIsImNvbnZlcnRIeXBoZW5JblRpY2tlclN5bWJvbCIsInJlcGxhY2UiLCJ0b1N0cmluZyIsImVxdWFscyIsInRoYXQiLCJuYW1lRXF1YWxzIiwidGhhdE5hbWUiLCJ0aGlzTmFtZSIsInRvTG93ZXJDYXNlIiwiVkFMSURfVFlQRVMiLCJpc1ZhbGlkVHlwZSIsIkVycm9yIiwidHQiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImQiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJjaHJvbWUiLCJydW50aW1lIiwib25NZXNzYWdlIiwiYWRkTGlzdGVuZXIiLCJyZXF1ZXN0Iiwic2VuZGVyIiwic2VuZFJlc3BvbnNlIiwibWVzc2FnZSIsImZyb21TaXRlIiwidG9TaXRlIiwic3RhcnRzV2l0aCIsImNvbnNvbGUiLCJsb2ciLCJzZW5kTWVzc2FnZSIsInRpY2tlclN5bWJvbCIsInRpY2tlck5hbWUiLCJpbmRleCJdLCJzb3VyY2VSb290IjoiIn0=