(()=>{"use strict";var t,e,r={776:(t,e,r)=>{r.d(e,{G:()=>s});var o,n=r(199),i=r(219),c=(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),s=function(t){function e(){return t.call(this,"Robinhood","https://robinhood.com")||this}return c(e,t),e.prototype.createUrlForTicker=function(t){return"crypto"===t.tickerType.value?"".concat(this.baseUrl,"/").concat(t.tickerType.value,"/").concat(t.symbol):"".concat(this.baseUrl,"/stocks/").concat(t.symbol)},e.prototype.getTicker=function(t,e){return new i.v(this.getTickerFromUrl(t),this.getName(e),this.getTickerType(this,t,e))},e.prototype.getTickerFromUrl=function(t){var e=t.split("/"),r=e.length-1,o=e[r];return 0===o.trim().length&&(o=e[r-1]),o},e.prototype.getName=function(t){return t.querySelector("main h1").textContent.trim()},e.prototype.isCrypto=function(t){return t.includes("crypto")},e.prototype.isEtf=function(t){return!(null===t.querySelector("#etf-category"))},e.prototype.isNoResultsPage=function(t){return t.querySelector("html title").textContent.includes("Page not found")},e.prototype.isTickerUrl=function(t){return t.includes("https://robinhood.com")&&(t.includes("stocks")||t.includes("crypto"))},e}(n.T)},199:(t,e,r)=>{r.d(e,{T:()=>n});var o=r(110),n=function(){function t(t,e){this.EXCEPTION_TICKERS=new Map,this.name=t,this.baseUrl=e}return t.prototype.is=function(){return this.name},t.prototype.createUrlForTicker=function(t){},t.prototype.getTicker=function(t,e){},t.prototype.getTickerType=function(t,e,r){return t.isEtf(r)?new o.C("etf"):t.isCrypto(e)?new o.C("crypto"):new o.C("stock")},t.prototype.getName=function(t){},t.prototype.isCrypto=function(t){},t.prototype.isEtf=function(t){},t.prototype.isNoResultsPage=function(t){},t.prototype.isTickerUrl=function(t){},t}()},455:(t,e,r)=>{r.d(e,{k:()=>u});var o,n=r(199),i=r(219),c=r(700),s=(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),u=function(t){function e(){var e=t.call(this,"YahooFinance","https://finance.yahoo.com")||this;return e.EXCEPTION_TICKERS.set(["GRT6719","crypto"],["GRT","crypto"]),e}return s(e,t),e.prototype.createUrlForTicker=function(t){var e=t.convertPeriodToHyphen(t.symbol);return e=this.checkExceptionList(e,t.tickerType.toString(),!1),"crypto"===t.tickerType.value&&(e+="-USD"),"".concat(this.baseUrl,"/quote/").concat(e)},e.prototype.getTicker=function(t,e){var r=this.getTickerFromPage(e,this.isCrypto(e)),o=this.getTickerType(this,e,e);return new i.v(this.checkExceptionList(r,o.toString(),!0),this.getName(e),o)},e.prototype.checkExceptionList=function(t,e,r){var o,n,i=[t,e],c=this.EXCEPTION_TICKERS.entries();try{for(var s=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],o=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(c),u=s.next();!u.done;u=s.next()){var p=u.value,a=void 0,l=void 0;if(r?(a=p[0],l=p[1]):(a=p[1],l=p[0]),i[0]===a[0]&&i[1]===a[1]){t=l[0];break}}}catch(t){o={error:t}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(o)throw o.error}}return t},e.prototype.getHeaderSection=function(){return"section.main section.container div.top"},e.prototype.getName=function(t){var e=this.getCompanyHeader(t).split(" (")[0];return(new c.c).removeExtraWhitespace(e)},e.prototype.getTickerFromPage=function(t,e){var r=this.getCompanyHeader(t).split(" (")[1];return r=r.split(")")[0],e&&(r=r.split("-")[0]),r},e.prototype.getCompanyHeader=function(t){return t.querySelector(this.getHeaderSection()+" h1").textContent.trim()},e.prototype.isCrypto=function(t){return t.querySelector(this.getHeaderSection()).textContent.includes("CoinMarketCap")},e.prototype.isEtf=function(t){var e=t.querySelector("section.main div[data-testid='quote-statistics']");return(new c.c).removeExtraWhitespace(e.textContent).includes("Net Assets")},e.prototype.isNoResultsPage=function(t){return!!t.getElementById("lookup-page")},e.prototype.isTickerUrl=function(t){return t.startsWith("https://finance.yahoo.com/quote/")},e}(n.T)},219:(t,e,r)=>{r.d(e,{v:()=>n});var o=r(700),n=function(){function t(t,e,r){this.symbol=this.convertHyphenToPeriod(t);var n=new o.c;this.name=n.removeExtraWhitespace(e),this.tickerType=r}return t.prototype.convertHyphenToPeriod=function(t){return t.replace("-",".")},t.prototype.convertPeriodToHyphen=function(t){return t.replace(".","-")},t.prototype.toString=function(){return"Ticker - symbol: ".concat(this.symbol,", name: ").concat(this.name,", type: ").concat(this.tickerType)},t.prototype.equals=function(t){return this.symbol===t.symbol&&this.nameEquals(t.name)&&this.tickerType.equals(t.tickerType)},t.prototype.nameEquals=function(t){var e=this.name.toLowerCase();return t=t.toLowerCase(),e.includes(t)||t.includes(e)},t}()},110:(t,e,r)=>{r.d(e,{C:()=>o});var o=function(){function t(t){if(this.VALID_TYPES=["stock","etf","mutualfund","crypto","future","bond"],t=t.toLowerCase().trim(),!this.isValidType(t))throw new Error("Invalid tickerType: "+t);this.value=t}return t.prototype.isValidType=function(t){return this.VALID_TYPES.includes(t)},t.prototype.toString=function(){return this.value},t.prototype.equals=function(t){return this.value===t.value},t}()},700:(t,e,r)=>{r.d(e,{c:()=>o});var o=function(){function t(){}return t.prototype.removeExtraWhitespace=function(t){var e=new RegExp("\\s+"),r=t.split(e),o="";return r.forEach((function(t){o=o+t.trim()+" "})),o.trim()},t}()}},o={};function n(t){var e=o[t];if(void 0!==e)return e.exports;var i=o[t]={exports:{}};return r[t](i,i.exports,n),i.exports}n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),t=n(776),e=n(455),chrome.runtime.onMessage.addListener((function(r,o,n){if("clicked_browser_action"===r.message){var i=void 0,c=void 0;if(r.url.toLowerCase().includes("robinhood")?(i=new t.G,c=new e.k):(i=new e.k,c=new t.G),i.isTickerUrl(r.url)){var s=i.getTicker(r.url,document);console.log(s.toString()),chrome.runtime.sendMessage({message:"open_new_tab",tickerSymbol:s.symbol,tickerName:s.name,tickerType:s.tickerType+"",index:r.index,fromSite:i.is(),toSite:c.is()})}else chrome.runtime.sendMessage({message:"open_homepage",index:r.index,fromSite:i.is(),toSite:c.is()})}}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQVNLLEVBQUssQ0FBRUksWUFBWSxFQUFNQyxJQUFLTixFQUFXQyxJQUUxRSxFQ05EVCxFQUFvQlUsRUFBSSxDQUFDSyxFQUFLQyxJQUFVTCxPQUFPTSxVQUFVQyxlQUFlQyxLQUFLSixFQUFLQyxHLGtCQ0s5RUksT0FBT0MsUUFBUUMsVUFBVUMsYUFBWSxTQUNqQ0MsRUFDQUMsRUFDQUMsR0FFQSxHQUF3QiwyQkFBcEJGLEVBQVFHLFFBQXNDLENBQzlDLElBQUlDLE9BQVEsRUFDUkMsT0FBTSxFQVVWLEdBUklMLEVBQVE1RixJQUFJd0QsY0FBYzNDLFNBQVMsY0FDbkNtRixFQUFXLElBQUksSUFDZkMsRUFBUyxJQUFJLE1BRWJELEVBQVcsSUFBSSxJQUNmQyxFQUFTLElBQUksS0FHYkQsRUFBU2hGLFlBQVk0RSxFQUFRNUYsS0FBTSxDQUNuQyxJQUFJUCxFQUFpQnVHLEVBQVNqRyxVQUFVNkYsRUFBUTVGLElBQUtDLFVBQ3JEaUcsUUFBUUMsSUFBSTFHLEVBQU9tQyxZQUVuQjRELE9BQU9DLFFBQVFXLFlBQVksQ0FDdkJMLFFBQVMsZUFDVE0sYUFBYzVHLEVBQU9LLE9BQ3JCd0csV0FBWTdHLEVBQU93QixLQUNuQnZCLFdBQVlELEVBQU9DLFdBQWEsR0FDaEM2RyxNQUFPWCxFQUFRVyxNQUNmUCxTQUFVQSxFQUFTNUUsS0FDbkI2RSxPQUFRQSxFQUFPN0UsTSxNQUduQm9FLE9BQU9DLFFBQVFXLFlBQVksQ0FDdkJMLFFBQVMsZ0JBQ1RRLE1BQU9YLEVBQVFXLE1BQ2ZQLFNBQVVBLEVBQVM1RSxLQUNuQjZFLE9BQVFBLEVBQU83RSxNLENBSS9CLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yb2Jpbmhvb2R0b3lhaG9vZmluYW5jZS8uL3NyYy9zaXRlcy9Sb2Jpbmhvb2QudHMiLCJ3ZWJwYWNrOi8vcm9iaW5ob29kdG95YWhvb2ZpbmFuY2UvLi9zcmMvc2l0ZXMvU2l0ZS50cyIsIndlYnBhY2s6Ly9yb2Jpbmhvb2R0b3lhaG9vZmluYW5jZS8uL3NyYy9zaXRlcy9ZYWhvb0ZpbmFuY2UudHMiLCJ3ZWJwYWNrOi8vcm9iaW5ob29kdG95YWhvb2ZpbmFuY2UvLi9zcmMvdGlja2Vycy9UaWNrZXIudHMiLCJ3ZWJwYWNrOi8vcm9iaW5ob29kdG95YWhvb2ZpbmFuY2UvLi9zcmMvdGlja2Vycy9UaWNrZXJUeXBlLnRzIiwid2VicGFjazovL3JvYmluaG9vZHRveWFob29maW5hbmNlLy4vc3JjL3V0aWxzL1V0aWxzLnRzIiwid2VicGFjazovL3JvYmluaG9vZHRveWFob29maW5hbmNlL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3JvYmluaG9vZHRveWFob29maW5hbmNlL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9yb2Jpbmhvb2R0b3lhaG9vZmluYW5jZS93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3JvYmluaG9vZHRveWFob29maW5hbmNlLy4vc3JjL2NvbnRlbnRTY3JpcHRzL2NvbnRlbnRTY3JpcHQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU2l0ZSB9IGZyb20gXCIuL1NpdGVcIjtcbmltcG9ydCB7IFRpY2tlclR5cGUgfSBmcm9tIFwiLi4vdGlja2Vycy9UaWNrZXJUeXBlXCI7XG5pbXBvcnQgeyBUaWNrZXIgfSBmcm9tIFwiLi4vdGlja2Vycy9UaWNrZXJcIjtcblxuZXhwb3J0IGNsYXNzIFJvYmluaG9vZCBleHRlbmRzIFNpdGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcihcIlJvYmluaG9vZFwiLCBgaHR0cHM6Ly9yb2Jpbmhvb2QuY29tYCk7XG4gICAgfVxuXG4gICAgY3JlYXRlVXJsRm9yVGlja2VyKHRpY2tlcjogVGlja2VyKTogc3RyaW5nIHtcbiAgICAgICAgaWYgKHRpY2tlci50aWNrZXJUeXBlLnZhbHVlID09PSBcImNyeXB0b1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gYCR7dGhpcy5iYXNlVXJsfS8ke3RpY2tlci50aWNrZXJUeXBlLnZhbHVlfS8ke3RpY2tlci5zeW1ib2x9YDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIEVURnMgYWxzbyBnZXQgdGhlICdzdG9ja3MnIHBhdGggaW4gdGhlIHVybCBvbiBSSFxuICAgICAgICAgICAgcmV0dXJuIGAke3RoaXMuYmFzZVVybH0vc3RvY2tzLyR7dGlja2VyLnN5bWJvbH1gO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0VGlja2VyKHVybDogc3RyaW5nLCBkb2N1bWVudDogRG9jdW1lbnQpOiBUaWNrZXIge1xuICAgICAgICByZXR1cm4gbmV3IFRpY2tlcihcbiAgICAgICAgICAgIHRoaXMuZ2V0VGlja2VyRnJvbVVybCh1cmwpLFxuICAgICAgICAgICAgdGhpcy5nZXROYW1lKGRvY3VtZW50KSxcbiAgICAgICAgICAgIHRoaXMuZ2V0VGlja2VyVHlwZSh0aGlzLCB1cmwsIGRvY3VtZW50KVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB1cmwgLSB0aGlzIHBhZ2UncyB1cmxcbiAgICAgKiBAcmV0dXJucyBqdXN0IHRoZSB0aWNrZXIgc2VjdGlvbiBvZiB0aGUgZ2l2ZW4gdXJsXG4gICAgICovXG4gICAgZ2V0VGlja2VyRnJvbVVybCh1cmw6IHN0cmluZykge1xuICAgICAgICBsZXQgc3BsaXRBcnJheSA9IHVybC5zcGxpdChcIi9cIik7XG5cbiAgICAgICAgbGV0IGxhc3RJbmRleCA9IHNwbGl0QXJyYXkubGVuZ3RoIC0gMTtcbiAgICAgICAgbGV0IHRpY2tlciA9IHNwbGl0QXJyYXlbbGFzdEluZGV4XTtcbiAgICAgICAgaWYgKHRpY2tlci50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aWNrZXIgPSBzcGxpdEFycmF5W2xhc3RJbmRleCAtIDFdO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRpY2tlcjtcbiAgICB9XG5cbiAgICBnZXROYW1lKGRvY3VtZW50OiBEb2N1bWVudCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwibWFpbiBoMVwiKS50ZXh0Q29udGVudC50cmltKCk7XG4gICAgfVxuXG4gICAgaXNDcnlwdG8odXJsOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHVybC5pbmNsdWRlcyhcImNyeXB0b1wiKTtcbiAgICB9XG5cbiAgICBpc0V0Zihkb2N1bWVudDogRG9jdW1lbnQpOiBib29sZWFuIHtcbiAgICAgICAgbGV0IGV0ZkNhdGVnb3J5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNldGYtY2F0ZWdvcnlcIik7XG4gICAgICAgIHJldHVybiAhKGV0ZkNhdGVnb3J5ID09PSBudWxsKTtcbiAgICB9XG5cbiAgICBpc05vUmVzdWx0c1BhZ2UoZG9jdW1lbnQ6IERvY3VtZW50KTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBkb2N1bWVudFxuICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCJodG1sIHRpdGxlXCIpXG4gICAgICAgICAgICAudGV4dENvbnRlbnQuaW5jbHVkZXMoXCJQYWdlIG5vdCBmb3VuZFwiKTtcbiAgICB9XG5cbiAgICBpc1RpY2tlclVybCh1cmw6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgdXJsLmluY2x1ZGVzKFwiaHR0cHM6Ly9yb2Jpbmhvb2QuY29tXCIpICYmXG4gICAgICAgICAgICAodXJsLmluY2x1ZGVzKFwic3RvY2tzXCIpIHx8IHVybC5pbmNsdWRlcyhcImNyeXB0b1wiKSlcbiAgICAgICAgKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBUaWNrZXIgfSBmcm9tIFwiLi4vdGlja2Vycy9UaWNrZXJcIjtcbmltcG9ydCB7IFRpY2tlclR5cGUgfSBmcm9tIFwiLi4vdGlja2Vycy9UaWNrZXJUeXBlXCI7XG5cbi8qKlxuICogUGFyZW50IGNsYXNzIGZvciBvYmplY3RzIGhvbGRpbmcgaW5mb3JtYXRpb25cbiAqIGFib3V0IGEgcGFydGljdWxhciB3ZWJzaXRlLlxuICovXG5leHBvcnQgY2xhc3MgU2l0ZSB7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIGJhc2VVcmw6IHN0cmluZztcbiAgICBFWENFUFRJT05fVElDS0VSUzogTWFwPGFueSwgYW55PiA9IG5ldyBNYXAoKTtcblxuICAgIGNvbnN0cnVjdG9yKG5hbWU6IHN0cmluZywgYmFzZVVybDogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuYmFzZVVybCA9IGJhc2VVcmw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIG5hbWUgb2YgdGhlIHNpdGVcbiAgICAgKi9cbiAgICBpcygpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5uYW1lO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdpdmVuIGEgVGlja2VyLCBjcmVhdGUgdGhlIGFwcHJvcHJpYXRlIHVybCBmb3IgdGhhdCBUaWNrZXJcbiAgICAgKiBvbiB0aGlzIFNpdGUuXG4gICAgICogQHBhcmFtIHRpY2tlciAtIHRoZSBUaWNrZXIgZm9yIHdoaWNoIHdlJ3JlIGNyZWF0aW5nIGEgdXJsXG4gICAgICovXG4gICAgY3JlYXRlVXJsRm9yVGlja2VyKHRpY2tlcjogVGlja2VyKTogYW55IHt9XG5cbiAgICAvKipcbiAgICAgKiBQdWxsIGFsbCBuZWNlc3NhcnkgaW5mb3JtYXRpb24gZnJvbSB0aGUgY3VycmVudCB1cmxcbiAgICAgKiBhbmQgcGFnZSB0byBjcmVhdGUgYSBUaWNrZXIgb2JqZWN0IHRvIHNlbmQgdG8gb3RoZXIgU2l0ZXNcbiAgICAgKiBAcGFyYW0gdXJsIC0gdXJsIG9mIHRoZSBjdXJyZW50IHBhZ2VcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnQgLSBET00gb2YgdGhlIGN1cnJlbnQgcGFnZVxuICAgICAqL1xuICAgIGdldFRpY2tlcih1cmw6IHN0cmluZywgZG9jdW1lbnQ6IERvY3VtZW50KTogYW55IHt9XG5cbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmUgdGhlIHR5cGUgb2YgdGlja2VyIGZvciB0aGUgY3VycmVudCBwYWdlXG4gICAgICogKHN0b2NrLCBjcnlwdG8sIGV0YylcbiAgICAgKiBAcGFyYW0gc2l0ZSAtIHRoZSBTaXRlIHdoaWNoIHRoZSB1c2VyIGlzIGN1cnJlbnRseSBvblxuICAgICAqIEBwYXJhbSBjcnlwdG9BcmcgLSBzb21lIHNpdGVzIG1heSBuZWVkIGEgc2VwYXJhdGUgd2F5IHRvIGlkZW50aWZ5IHdoZXRoZXIgb3Igbm90IHRoZSBwYWdlIGlzIGEgY3J5cHRvIHBhZ2UgKHN1Y2ggYXMgdGhlIHVybCkuXG4gICAgICogSWYgdGhhdCdzIHRoZSBjYXNlLCB0aGF0IGFyZyBnb2VzIGhlcmUuIE90aGVyd2lzZSwgdGhlIERvY3VtZW50IHBhcmFtIGlzIHVzdWFsbHkgc2VudCB0d2ljZS5cbiAgICAgKiBAcGFyYW0gZG9jdW1lbnQgLSB0aGUgRE9NIG9mIHRoZSBjdXJyZW50IHBhZ2UsIGFzIGEgRG9jdW1lbnQgb2JqZWN0LlxuICAgICAqIEByZXR1cm5zIFRpY2tlclR5cGUgb2YgdGhlIGN1cnJlbnQgcGFnZVxuICAgICAqL1xuICAgIGdldFRpY2tlclR5cGUoc2l0ZTogU2l0ZSwgY3J5cHRvQXJnOiBhbnksIGRvY3VtZW50OiBEb2N1bWVudCk6IFRpY2tlclR5cGUge1xuICAgICAgICBpZiAoc2l0ZS5pc0V0Zihkb2N1bWVudCkpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVGlja2VyVHlwZShcImV0ZlwiKTtcbiAgICAgICAgfSBlbHNlIGlmIChzaXRlLmlzQ3J5cHRvKGNyeXB0b0FyZykpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVGlja2VyVHlwZShcImNyeXB0b1wiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVGlja2VyVHlwZShcInN0b2NrXCIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHR5cGUgZm9yIHRoZSBtZXRob2RzIGJlbG93IGlzIFwiYW55XCIsIGJlY2F1c2Ugd2UgZG9uJ3Qgd2FudCB0byByZXR1cm4gYSB2YWx1ZSBpbiB0aGUgc3VwZXJjbGFzcywgd2hpY2ggd2Ugd291bGQgaGF2ZSB0byBzaW5jZSB3ZSdyZSB1c2luZyB0aGVtIGluIGdldFRpY2tlclR5cGUgYWJvdmUuXG4gICAgLy8gSW1wbGVtZW50YXRpb25zIG9mIHRoZXNlIG1ldGhvZHMgaW4gc3ViY2xhc3NlcyBzaG91bGQgcmV0dXJuIGEgYm9vbGVhbi5cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgY29tcGFueSdzIGZ1bGwgbmFtZVxuICAgICAqIEBwYXJhbSBkb2N1bWVudCAtIERPTSBjb250ZW50IG9mIHRoZSBjdXJyZW50IHBhZ2VcbiAgICAgKi9cbiAgICBnZXROYW1lKGRvY3VtZW50OiBEb2N1bWVudCk6IGFueSB7fVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBjdXJyZW50IHBhZ2UgaXMgZm9yIGEgY3J5cHRvY3VycmVuY3ksXG4gICAgICogZmFsc2Ugb3RoZXJ3aXNlLlxuICAgICAqIEBwYXJhbSB4IC0gYXJnIG9mIGFueSB0eXBlIHdoaWNoIHdpbGwgaGVscCBhIHBhcnRpdWxhciBzaXRlXG4gICAgICogaWRlbnRpZnkgYSBjcnlwdG9jdXJyZW5jeSBwYWdlLlxuICAgICAqL1xuICAgIGlzQ3J5cHRvKHg6IGFueSk6IGFueSB7fVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBjdXJyZW50IHBhZ2UgaXMgZm9yIGFuIEVURixcbiAgICAgKiBmYWxzZSBvdGhlcndpc2UuXG4gICAgICogQHBhcmFtIGRvY3VtZW50IC0gRE9NIG9mIHRoZSBjdXJyZW50IHBhZ2UuXG4gICAgICovXG4gICAgaXNFdGYoZG9jdW1lbnQ6IERvY3VtZW50KTogYW55IHt9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGN1cnJlbnQgcGFnZSBpcyBhIE5vIFJlc3VsdHMgcGFnZSxcbiAgICAgKiBmYWxzZSBvdGhlcndpc2UuXG4gICAgICogQHBhcmFtIGRvY3VtZW50IC0gRE9NIG9mIHRoZSBjdXJyZW50IHBhZ2UuXG4gICAgICovXG4gICAgaXNOb1Jlc3VsdHNQYWdlKGRvY3VtZW50OiBEb2N1bWVudCk6IGFueSB7fVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHVybCAtIHRoZSBjdXJyZW50IHBhZ2UncyB1cmxcbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoZSB1cmwgaW5kaWNhdGVzIHRoYXQgdGhlIHBhZ2UgaXMgZm9yIG9uZSBzcGVjaWZpYyBUaWNrZXIsXG4gICAgICogZmFsc2UgaWYgaXQncyBhbnkgb3RoZXIga2luZCBvZiBwYWdlLlxuICAgICAqL1xuICAgIGlzVGlja2VyVXJsKHVybDogc3RyaW5nKTogYW55IHt9XG59XG4iLCJpbXBvcnQgeyBTaXRlIH0gZnJvbSBcIi4vU2l0ZVwiO1xuaW1wb3J0IHsgVGlja2VyVHlwZSB9IGZyb20gXCIuLi90aWNrZXJzL1RpY2tlclR5cGVcIjtcbmltcG9ydCB7IFRpY2tlciB9IGZyb20gXCIuLi90aWNrZXJzL1RpY2tlclwiO1xuaW1wb3J0IHsgVXRpbHMgfSBmcm9tIFwiLi4vdXRpbHMvVXRpbHNcIjtcblxuZXhwb3J0IGNsYXNzIFlhaG9vRmluYW5jZSBleHRlbmRzIFNpdGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcihcIllhaG9vRmluYW5jZVwiLCBgaHR0cHM6Ly9maW5hbmNlLnlhaG9vLmNvbWApO1xuXG4gICAgICAgIHRoaXMuRVhDRVBUSU9OX1RJQ0tFUlMuc2V0KFtcIkdSVDY3MTlcIiwgXCJjcnlwdG9cIl0sIFtcIkdSVFwiLCBcImNyeXB0b1wiXSk7XG4gICAgfVxuXG4gICAgY3JlYXRlVXJsRm9yVGlja2VyKHRpY2tlcjogVGlja2VyKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IHM6IHN0cmluZyA9IHRpY2tlci5jb252ZXJ0UGVyaW9kVG9IeXBoZW4odGlja2VyLnN5bWJvbCk7XG5cbiAgICAgICAgcyA9IHRoaXMuY2hlY2tFeGNlcHRpb25MaXN0KHMsIHRpY2tlci50aWNrZXJUeXBlLnRvU3RyaW5nKCksIGZhbHNlKTtcblxuICAgICAgICAvLyBJZiB0aGUgcGFnZSB0aGF0IHdlJ3JlIG9uIGlzIGZvciBhIHN0b2NrIG9yIEVURiwgdGhlbiB3ZSBjYW4ganVzdCBsZWF2ZSB0aGUgdGlja2VyIGFzLWlzLlxuICAgICAgICAvLyBJZiB0aGUgcGFnZSB0aGF0IHdlJ3JlIG9uIGlzIGZvciBhIGNyeXB0b2N1cnJlbmN5LCB0aGVuIHdlIG5lZWRcbiAgICAgICAgLy8gdG8gYWRqdXN0IHRoZSB0aWNrZXIgdG8gYWRkIHRoZSBcInF1b3RlIGN1cnJlbmN5XCIgLS1cbiAgICAgICAgLy8gdGhlIGN1cnJlbmN5IGZvciB3aGljaCB3ZSdyZSBkaXNwbGF5aW5nIHRoZSBleGNoYW5nZSByYXRlIHRvIHRoZSBjcnlwdG9jdXJyZW5jeS5cbiAgICAgICAgLy8gQnkgZGVmYXVsdCwgd2UnbGwgdXNlIHRoZSBVUyBEb2xsYXIgKFwiVVNEXCIpLlxuICAgICAgICAvLyBUT0RPOiBBbGxvdyB1c2VyIHRvIHNlbGVjdCB0aGVpciBwcmVmZXJyZWQgcXVvdGUgY3VycmVuY3kgaW4gT3B0aW9ucyBtZW51LlxuICAgICAgICBpZiAodGlja2VyLnRpY2tlclR5cGUudmFsdWUgPT09IFwiY3J5cHRvXCIpIHtcbiAgICAgICAgICAgIHMgPSBzICsgYC1VU0RgO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgJHt0aGlzLmJhc2VVcmx9L3F1b3RlLyR7c31gO1xuICAgIH1cblxuICAgIGdldFRpY2tlcih1cmw6IHN0cmluZywgZG9jdW1lbnQ6IERvY3VtZW50KTogVGlja2VyIHtcbiAgICAgICAgbGV0IHRpY2tlclN0cmluZzogc3RyaW5nID0gdGhpcy5nZXRUaWNrZXJGcm9tUGFnZShcbiAgICAgICAgICAgIGRvY3VtZW50LFxuICAgICAgICAgICAgdGhpcy5pc0NyeXB0byhkb2N1bWVudClcbiAgICAgICAgKTtcbiAgICAgICAgbGV0IHRpY2tlclR5cGU6IFRpY2tlclR5cGUgPSB0aGlzLmdldFRpY2tlclR5cGUoXG4gICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgZG9jdW1lbnQsXG4gICAgICAgICAgICBkb2N1bWVudFxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiBuZXcgVGlja2VyKFxuICAgICAgICAgICAgdGhpcy5jaGVja0V4Y2VwdGlvbkxpc3QodGlja2VyU3RyaW5nLCB0aWNrZXJUeXBlLnRvU3RyaW5nKCksIHRydWUpLFxuICAgICAgICAgICAgdGhpcy5nZXROYW1lKGRvY3VtZW50KSxcbiAgICAgICAgICAgIHRpY2tlclR5cGVcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGVyZSBhcmUgYSBmZXcgb3V0bGllciBzZWN1cml0aWVzIHdoaWNoIGRvIG5vdCBhYmlkZSBieSB0aGUgdXJsIGNyZWF0aW9uXG4gICAgICogcnVsZXMgd2hpY2ggYXJlIG5vcm1hbGx5IHVzZWQgb24gY2VydGFpbiBzaXRlcy4gVG8gaGFuZGxlIHRoZXNlIGNhc2VzLCB3ZSBuZWVkIHRvXG4gICAgICogY2hlY2sgdG8gc2VlIGlmIG91ciB0aWNrZXIgZmFsbHMgaW50byB0aGlzIHNtYWxsIHNldCBvZiBleGNlcHRpb25zLFxuICAgICAqIGFuZCBpZiBzbywgdG8gY29udmVydCBpdCB0byB0aGUgY29ycmVjdCB0aWNrZXIuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdGlja2VyU3RyIC0gdGhlIHRpY2tlciB3aGljaCB3ZSdyZSBjaGVja2luZyB0byBzZWUgaWYgaXQncyBvbiB0aGUgZXhjZXB0aW9uIGxpc3RcbiAgICAgKiBAcGFyYW0gdHRTdHIgLSB0aGUgdGlja2VyIHR5cGUgb2YgdGhlIGdpdmVuIHRpY2tlclxuICAgICAqIEBwYXJhbSBpc091dGdvaW5nIC0gdHJ1ZSBpZiB3ZSdyZSBjb252ZXJ0aW5nIHRoZSB0aWNrZXIgdG9cbiAgICAgKiB1c2UgaXQgZm9yIGEgZGlmZmVyZW50IHNpdGUsIGZhbHNlIGlmIHRoaXMgaXMgYW4gaW5jb21pbmcgdGlja2VyXG4gICAgICogd2hpY2ggd2UncmUgY29udmVydGluZyBmb3IgdXNlIG9uICp0aGlzKiBzaXRlLlxuICAgICAqIEByZXR1cm5zIHRoZSBjb3JyZWN0IHRpY2tlciBzdHJpbmcsIHdoZXRoZXIgaXQgbmVlZGVkIHRvIGJlIGFkanVzdGVkIG9yIG5vdC5cbiAgICAgKi9cbiAgICBjaGVja0V4Y2VwdGlvbkxpc3QoXG4gICAgICAgIHRpY2tlclN0cjogc3RyaW5nLFxuICAgICAgICB0dFN0cjogc3RyaW5nLFxuICAgICAgICBpc091dGdvaW5nOiBib29sZWFuXG4gICAgKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IGFyZ0FycmF5ID0gW3RpY2tlclN0ciwgdHRTdHJdO1xuICAgICAgICBsZXQgZXhjZXB0aW9uSXRlcmF0b3IgPSB0aGlzLkVYQ0VQVElPTl9USUNLRVJTLmVudHJpZXMoKTtcbiAgICAgICAgZm9yIChsZXQgcGFpciBvZiBleGNlcHRpb25JdGVyYXRvcikge1xuICAgICAgICAgICAgbGV0IGtleUFycmF5O1xuICAgICAgICAgICAgbGV0IHZhbEFycmF5O1xuICAgICAgICAgICAgaWYgKGlzT3V0Z29pbmcpIHtcbiAgICAgICAgICAgICAgICBrZXlBcnJheSA9IHBhaXJbMF07XG4gICAgICAgICAgICAgICAgdmFsQXJyYXkgPSBwYWlyWzFdO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBrZXlBcnJheSA9IHBhaXJbMV07XG4gICAgICAgICAgICAgICAgdmFsQXJyYXkgPSBwYWlyWzBdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoYXJnQXJyYXlbMF0gPT09IGtleUFycmF5WzBdICYmIGFyZ0FycmF5WzFdID09PSBrZXlBcnJheVsxXSkge1xuICAgICAgICAgICAgICAgIHRpY2tlclN0ciA9IHZhbEFycmF5WzBdO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRpY2tlclN0cjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyBpZCBmb3IgdGhlIHF1b3RlIGhlYWRlciBlbGVtZW50XG4gICAgICovXG4gICAgZ2V0SGVhZGVyU2VjdGlvbigpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gXCJzZWN0aW9uLm1haW4gc2VjdGlvbi5jb250YWluZXIgZGl2LnRvcFwiO1xuICAgIH1cblxuICAgIGdldE5hbWUoZG9jdW1lbnQ6IERvY3VtZW50KTogc3RyaW5nIHtcbiAgICAgICAgbGV0IG5hbWUgPSB0aGlzLmdldENvbXBhbnlIZWFkZXIoZG9jdW1lbnQpO1xuICAgICAgICBsZXQgbmFtZVdpdGhUaWNrZXJSZW1vdmVkID0gbmFtZS5zcGxpdChcIiAoXCIpWzBdO1xuICAgICAgICBsZXQgdXRpbHMgPSBuZXcgVXRpbHMoKTtcbiAgICAgICAgcmV0dXJuIHV0aWxzLnJlbW92ZUV4dHJhV2hpdGVzcGFjZShuYW1lV2l0aFRpY2tlclJlbW92ZWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZpbmQgdGhlIHRpY2tlciBzeW1ib2wgaW4gdGhlIHBhZ2UsIGFuZCBzZXBhcmF0ZSBpdCBmcm9tIGFueSB1bm5lY2Vzc2FyeSB0ZXh0XG4gICAgICogd2hpY2ggc3Vycm91bmRzIGl0LlxuICAgICAqIEBwYXJhbSBkb2N1bWVudCAtIERPTSBvZiB0aGUgY3VycmVudCBwYWdlXG4gICAgICogQHBhcmFtIGlzQ3J5cHRvIC0gdHJ1ZSBpZiB0aGUgY3VycmVudCBwYWdlIGlzIGZvciBhIGNyeXB0b2N1cnJlbmN5LFxuICAgICAqIGZhbHNlIG90aGVyd2lzZVxuICAgICAqIEByZXR1cm5zIHRpY2tlciBzeW1ib2xcbiAgICAgKi9cbiAgICBnZXRUaWNrZXJGcm9tUGFnZShkb2N1bWVudDogRG9jdW1lbnQsIGlzQ3J5cHRvOiBib29sZWFuKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IG5hbWUgPSB0aGlzLmdldENvbXBhbnlIZWFkZXIoZG9jdW1lbnQpO1xuICAgICAgICBsZXQgY2xlYW5lZFVwU3ltYm9sID0gbmFtZS5zcGxpdChcIiAoXCIpWzFdO1xuICAgICAgICBjbGVhbmVkVXBTeW1ib2wgPSBjbGVhbmVkVXBTeW1ib2wuc3BsaXQoXCIpXCIpWzBdO1xuICAgICAgICBpZiAoaXNDcnlwdG8pIHtcbiAgICAgICAgICAgIGNsZWFuZWRVcFN5bWJvbCA9IGNsZWFuZWRVcFN5bWJvbC5zcGxpdChcIi1cIilbMF07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY2xlYW5lZFVwU3ltYm9sO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudCAtIERPTSBvZiB0aGUgY3VycmVudCBwYWdlXG4gICAgICogQHJldHVybnMgdGV4dCBjb250ZW50IG9mIHRoZSBjb21wYW55IGhlYWRlciBlbGVtZW50XG4gICAgICovXG4gICAgZ2V0Q29tcGFueUhlYWRlcihkb2N1bWVudDogRG9jdW1lbnQpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gZG9jdW1lbnRcbiAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuZ2V0SGVhZGVyU2VjdGlvbigpICsgXCIgaDFcIilcbiAgICAgICAgICAgIC50ZXh0Q29udGVudC50cmltKCk7XG4gICAgfVxuXG4gICAgaXNDcnlwdG8oZG9jdW1lbnQ6IERvY3VtZW50KTogYm9vbGVhbiB7XG4gICAgICAgIGxldCBxdW90ZUhlYWRlckluZm8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuZ2V0SGVhZGVyU2VjdGlvbigpKTtcbiAgICAgICAgcmV0dXJuIHF1b3RlSGVhZGVySW5mby50ZXh0Q29udGVudC5pbmNsdWRlcyhcIkNvaW5NYXJrZXRDYXBcIik7XG4gICAgfVxuXG4gICAgaXNFdGYoZG9jdW1lbnQ6IERvY3VtZW50KTogYm9vbGVhbiB7XG4gICAgICAgIGxldCBxdW90ZVN1bW1hcnkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgICAgXCJzZWN0aW9uLm1haW4gZGl2W2RhdGEtdGVzdGlkPSdxdW90ZS1zdGF0aXN0aWNzJ11cIlxuICAgICAgICApO1xuICAgICAgICBsZXQgdXRpbHMgPSBuZXcgVXRpbHMoKTtcblxuICAgICAgICBsZXQgdGV4dENsZWFuZWRVcCA9IHV0aWxzLnJlbW92ZUV4dHJhV2hpdGVzcGFjZShcbiAgICAgICAgICAgIHF1b3RlU3VtbWFyeS50ZXh0Q29udGVudFxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gdGV4dENsZWFuZWRVcC5pbmNsdWRlcyhcIk5ldCBBc3NldHNcIik7XG4gICAgfVxuXG4gICAgaXNOb1Jlc3VsdHNQYWdlKGRvY3VtZW50OiBEb2N1bWVudCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gISFkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxvb2t1cC1wYWdlXCIpO1xuICAgIH1cblxuICAgIGlzVGlja2VyVXJsKHVybDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB1cmwuc3RhcnRzV2l0aChcImh0dHBzOi8vZmluYW5jZS55YWhvby5jb20vcXVvdGUvXCIpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFRpY2tlclR5cGUgfSBmcm9tIFwiLi9UaWNrZXJUeXBlXCI7XG5pbXBvcnQgeyBVdGlscyB9IGZyb20gXCIuLi91dGlscy9VdGlsc1wiO1xuXG5leHBvcnQgY2xhc3MgVGlja2VyIHtcbiAgICBzeW1ib2w6IHN0cmluZztcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgdGlja2VyVHlwZTogVGlja2VyVHlwZTtcblxuICAgIGNvbnN0cnVjdG9yKHN5bWJvbDogc3RyaW5nLCBuYW1lOiBzdHJpbmcsIHRpY2tlclR5cGU6IFRpY2tlclR5cGUpIHtcbiAgICAgICAgdGhpcy5zeW1ib2wgPSB0aGlzLmNvbnZlcnRIeXBoZW5Ub1BlcmlvZChzeW1ib2wpO1xuICAgICAgICBsZXQgdXRpbHMgPSBuZXcgVXRpbHMoKTtcbiAgICAgICAgdGhpcy5uYW1lID0gdXRpbHMucmVtb3ZlRXh0cmFXaGl0ZXNwYWNlKG5hbWUpO1xuICAgICAgICB0aGlzLnRpY2tlclR5cGUgPSB0aWNrZXJUeXBlO1xuICAgIH1cblxuICAgIGNvbnZlcnRIeXBoZW5Ub1BlcmlvZChzeW1ib2w6IHN0cmluZykge1xuICAgICAgICByZXR1cm4gc3ltYm9sLnJlcGxhY2UoXCItXCIsIFwiLlwiKTtcbiAgICB9XG5cbiAgICBjb252ZXJ0UGVyaW9kVG9IeXBoZW4oc3ltYm9sOiBzdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuIHN5bWJvbC5yZXBsYWNlKFwiLlwiLCBcIi1cIik7XG4gICAgfVxuXG4gICAgdG9TdHJpbmcoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGBUaWNrZXIgLSBzeW1ib2w6ICR7dGhpcy5zeW1ib2x9LCBuYW1lOiAke3RoaXMubmFtZX0sIHR5cGU6ICR7dGhpcy50aWNrZXJUeXBlfWA7XG4gICAgfVxuXG4gICAgZXF1YWxzKHRoYXQ6IFRpY2tlcik6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgdGhpcy5zeW1ib2wgPT09IHRoYXQuc3ltYm9sICYmXG4gICAgICAgICAgICB0aGlzLm5hbWVFcXVhbHModGhhdC5uYW1lKSAmJlxuICAgICAgICAgICAgdGhpcy50aWNrZXJUeXBlLmVxdWFscyh0aGF0LnRpY2tlclR5cGUpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgdG8gc2VlIGlmIGEgZ2l2ZW4gY29tcGFueSdzIG5hbWUgbWF0Y2hlcyB0aGlzIGNvbXBhbnkncyBuYW1lLlxuICAgICAqIFNpbmNlIHRoZXNlIHZhbHVlcyBhcmUgYmVpbmcgcHVsbGVkIGZyb20gZWFjaCBzaXRlIHdlJ3JlIHZpc2l0aW5nIChhbmQgd2UgY2FuJ3QgY29udHJvbCB3aGF0IHRoZXkgY2FsbCB0aGVtKSxcbiAgICAgKiBhbmQgc2luY2UgdGhlc2UgZXF1YWxpdHkgZnVuY3Rpb25zIGFyZSAoYXQgbGVhc3Qgc28gZmFyKSBvbmx5IGJlaW5nIHVzZWQgdG8gZmFjaWxpdGF0ZSB1bml0IHRlc3RpbmcgYW55d2F5LFxuICAgICAqIHRoaXMgZnVuY3Rpb24gaXMgYmFzaWNhbGx5IGp1c3QgY2hlY2tpbmcgdG8gc2VlIGlmIHRoZSBuYW1lcyBhcmUgXCJjbG9zZSBlbm91Z2hcIiBieSBjaGVja2luZyB0byBzZWUgaWYgb25lIHN0cmluZyBpbmNsdWRlcyB0aGUgb3RoZXIuXG4gICAgICpcbiAgICAgKiBGb3IgZXhhbXBsZSwgdGhlIFJIIHBhZ2UgZm9yICRTUFkgY2FsbHMgaXQgXCJTUERSIFMmUCA1MDAgRVRGXCIsIHdoaWxlIFlGIGNhbGxzIGl0IFwiU1BEUiBTJlAgNTAwIEVURiBUcnVzdFwiLlxuICAgICAqIEV2ZW4gdGhvdWdoIHRoZSBzdHJpbmdzIGFyZW4ndCBpZGVudGljYWwsIHdlIHN0aWxsIHdhbnQgdGhlc2UgdG8gYmUgY29uc2lkZXJlZCBlcXVhbCwgc28gd2UgY2FuIGp1c3QgY2hlY2sgaWYgb25lIGNvbnRhaW5zIHRoZSBvdGhlciwgd2hpY2ggaXQgZG9lcy5cbiAgICAgKlxuICAgICAqIFRPRE8gLSB0aGVyZSB3aWxsIHByb2JhYmx5IGJlIHNvbWUgZWRnZSBjYXNlcyBmb3Igd2hpY2ggdGhpcyBzb2x1dGlvbiB3aWxsIG5vdCB3b3JrLCBzbyB0aGlzIHdpbGwgbGlrZWx5IGhhdmUgdG8gYmUgcmV2aXNlZCBpbiB0aGUgZnV0dXJlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRoYXROYW1lIC0gbmFtZSBvZiB0aGUgY29tcGFueSB0byB3aGljaCB3ZSdyZSBjb21wYXJpbmcgdGhpcyBjb21wYW55XG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgY29tcGFuaWVzJyBuYW1lcyBhcmUgdGhlIHNhbWUgKG9yIGF0IGxlYXN0LCBjbG9zZSBlbm91Z2gpXG4gICAgICovXG4gICAgbmFtZUVxdWFscyh0aGF0TmFtZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIGxldCB0aGlzTmFtZSA9IHRoaXMubmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICB0aGF0TmFtZSA9IHRoYXROYW1lLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXNOYW1lLmluY2x1ZGVzKHRoYXROYW1lKSB8fCB0aGF0TmFtZS5pbmNsdWRlcyh0aGlzTmFtZSk7XG4gICAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIFRpY2tlclR5cGUge1xuICAgIFZBTElEX1RZUEVTID0gW1wic3RvY2tcIiwgXCJldGZcIiwgXCJtdXR1YWxmdW5kXCIsIFwiY3J5cHRvXCIsIFwiZnV0dXJlXCIsIFwiYm9uZFwiXTtcbiAgICB2YWx1ZTogc3RyaW5nO1xuXG4gICAgY29uc3RydWN0b3IodGlja2VyVHlwZTogc3RyaW5nKSB7XG4gICAgICAgIHRpY2tlclR5cGUgPSB0aWNrZXJUeXBlLnRvTG93ZXJDYXNlKCkudHJpbSgpO1xuICAgICAgICBpZiAodGhpcy5pc1ZhbGlkVHlwZSh0aWNrZXJUeXBlKSkge1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRpY2tlclR5cGU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHRpY2tlclR5cGU6IFwiICsgdGlja2VyVHlwZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gdHQgLSBUaWNrZXJUeXBlIGFzIGEgc3RyaW5nXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gc3RyaW5nIGlzIHdpdGhpblxuICAgICAqIHRoZSBWQUxJRF9UWVBFUyBsaXN0LCBmYWxzZSBvdGhlcndpc2VcbiAgICAgKi9cbiAgICBpc1ZhbGlkVHlwZSh0dDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLlZBTElEX1RZUEVTLmluY2x1ZGVzKHR0KTtcbiAgICB9XG5cbiAgICB0b1N0cmluZygpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTtcbiAgICB9XG5cbiAgICBlcXVhbHModGhhdDogVGlja2VyVHlwZSk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy52YWx1ZSA9PT0gdGhhdC52YWx1ZTtcbiAgICB9XG59XG4iLCJleHBvcnQgY2xhc3MgVXRpbHMge1xuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgbGFyZ2UgY2h1bmtzIG9mIHdoaXRlc3BhY2UgZnJvbSBhIGdpdmVuIHN0cmluZyxcbiAgICAgKiByZXBsYWNpbmcgZWFjaCB3aXRoIGp1c3QgYSBzaW5nbGUgc3BhY2UuXG4gICAgICogQHBhcmFtIHN0ciAtIHRleHQgd2hpY2ggY29udGFpbnMgZXhjZXNzIHdoaXRlc3BhY2VcbiAgICAgKiBAcmV0dXJucyBzdHJpbmcgd2l0aCBleGNlc3Mgd2hpdGVzcGFjZSByZW1vdmVkXG4gICAgICovXG4gICAgcmVtb3ZlRXh0cmFXaGl0ZXNwYWNlKHN0cjogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IHJlZ2V4ID0gbmV3IFJlZ0V4cChcIlxcXFxzK1wiKTtcbiAgICAgICAgbGV0IHNwbGl0ID0gc3RyLnNwbGl0KHJlZ2V4KTtcbiAgICAgICAgbGV0IGZ1bGwgPSBcIlwiO1xuICAgICAgICBzcGxpdC5mb3JFYWNoKGZ1bmN0aW9uICh3b3JkKSB7XG4gICAgICAgICAgICBmdWxsID0gZnVsbCArIHdvcmQudHJpbSgpICsgXCIgXCI7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBHZXQgcmlkIG9mIHRoZSBvbmUgZXh0cmEgc3BhY2UgYXQgdGhlIGVuZCBiZWZvcmUgd2UgcmV0dXJuXG4gICAgICAgIHJldHVybiBmdWxsLnRyaW0oKTtcbiAgICB9XG59XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsImltcG9ydCB7IFJvYmluaG9vZCB9IGZyb20gXCIuLi9zaXRlcy9Sb2Jpbmhvb2RcIjtcbmltcG9ydCB7IFlhaG9vRmluYW5jZSB9IGZyb20gXCIuLi9zaXRlcy9ZYWhvb0ZpbmFuY2VcIjtcbmltcG9ydCB7IFRpY2tlciB9IGZyb20gXCIuLi90aWNrZXJzL1RpY2tlclwiO1xuXG4oZnVuY3Rpb24gKCkge1xuICAgIGNocm9tZS5ydW50aW1lLm9uTWVzc2FnZS5hZGRMaXN0ZW5lcihmdW5jdGlvbiBpY29uQ2xpY2tlZChcbiAgICAgICAgcmVxdWVzdCxcbiAgICAgICAgc2VuZGVyLFxuICAgICAgICBzZW5kUmVzcG9uc2VcbiAgICApIHtcbiAgICAgICAgaWYgKHJlcXVlc3QubWVzc2FnZSA9PT0gXCJjbGlja2VkX2Jyb3dzZXJfYWN0aW9uXCIpIHtcbiAgICAgICAgICAgIGxldCBmcm9tU2l0ZTtcbiAgICAgICAgICAgIGxldCB0b1NpdGU7XG5cbiAgICAgICAgICAgIGlmIChyZXF1ZXN0LnVybC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwicm9iaW5ob29kXCIpKSB7XG4gICAgICAgICAgICAgICAgZnJvbVNpdGUgPSBuZXcgUm9iaW5ob29kKCk7XG4gICAgICAgICAgICAgICAgdG9TaXRlID0gbmV3IFlhaG9vRmluYW5jZSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBmcm9tU2l0ZSA9IG5ldyBZYWhvb0ZpbmFuY2UoKTtcbiAgICAgICAgICAgICAgICB0b1NpdGUgPSBuZXcgUm9iaW5ob29kKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChmcm9tU2l0ZS5pc1RpY2tlclVybChyZXF1ZXN0LnVybCkpIHtcbiAgICAgICAgICAgICAgICBsZXQgdGlja2VyOiBUaWNrZXIgPSBmcm9tU2l0ZS5nZXRUaWNrZXIocmVxdWVzdC51cmwsIGRvY3VtZW50KTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0aWNrZXIudG9TdHJpbmcoKSk7XG5cbiAgICAgICAgICAgICAgICBjaHJvbWUucnVudGltZS5zZW5kTWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwib3Blbl9uZXdfdGFiXCIsXG4gICAgICAgICAgICAgICAgICAgIHRpY2tlclN5bWJvbDogdGlja2VyLnN5bWJvbCxcbiAgICAgICAgICAgICAgICAgICAgdGlja2VyTmFtZTogdGlja2VyLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHRpY2tlclR5cGU6IHRpY2tlci50aWNrZXJUeXBlICsgXCJcIixcbiAgICAgICAgICAgICAgICAgICAgaW5kZXg6IHJlcXVlc3QuaW5kZXgsXG4gICAgICAgICAgICAgICAgICAgIGZyb21TaXRlOiBmcm9tU2l0ZS5pcygpLFxuICAgICAgICAgICAgICAgICAgICB0b1NpdGU6IHRvU2l0ZS5pcygpLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjaHJvbWUucnVudGltZS5zZW5kTWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwib3Blbl9ob21lcGFnZVwiLFxuICAgICAgICAgICAgICAgICAgICBpbmRleDogcmVxdWVzdC5pbmRleCxcbiAgICAgICAgICAgICAgICAgICAgZnJvbVNpdGU6IGZyb21TaXRlLmlzKCksXG4gICAgICAgICAgICAgICAgICAgIHRvU2l0ZTogdG9TaXRlLmlzKCksXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbn0pKCk7XG4iXSwibmFtZXMiOlsiY3JlYXRlVXJsRm9yVGlja2VyIiwidGlja2VyIiwidGlja2VyVHlwZSIsInZhbHVlIiwidGhpcyIsImJhc2VVcmwiLCJzeW1ib2wiLCJnZXRUaWNrZXIiLCJ1cmwiLCJkb2N1bWVudCIsImdldFRpY2tlckZyb21VcmwiLCJnZXROYW1lIiwiZ2V0VGlja2VyVHlwZSIsInNwbGl0QXJyYXkiLCJzcGxpdCIsImxhc3RJbmRleCIsImxlbmd0aCIsInRyaW0iLCJxdWVyeVNlbGVjdG9yIiwidGV4dENvbnRlbnQiLCJpc0NyeXB0byIsImluY2x1ZGVzIiwiaXNFdGYiLCJpc05vUmVzdWx0c1BhZ2UiLCJpc1RpY2tlclVybCIsIm5hbWUiLCJFWENFUFRJT05fVElDS0VSUyIsIk1hcCIsImlzIiwic2l0ZSIsImNyeXB0b0FyZyIsIngiLCJzZXQiLCJzIiwiY29udmVydFBlcmlvZFRvSHlwaGVuIiwiY2hlY2tFeGNlcHRpb25MaXN0IiwidG9TdHJpbmciLCJ0aWNrZXJTdHJpbmciLCJnZXRUaWNrZXJGcm9tUGFnZSIsInRpY2tlclN0ciIsInR0U3RyIiwiaXNPdXRnb2luZyIsImFyZ0FycmF5IiwiZXhjZXB0aW9uSXRlcmF0b3IiLCJlbnRyaWVzIiwicGFpciIsImtleUFycmF5IiwidmFsQXJyYXkiLCJnZXRIZWFkZXJTZWN0aW9uIiwibmFtZVdpdGhUaWNrZXJSZW1vdmVkIiwiZ2V0Q29tcGFueUhlYWRlciIsInJlbW92ZUV4dHJhV2hpdGVzcGFjZSIsImNsZWFuZWRVcFN5bWJvbCIsInF1b3RlU3VtbWFyeSIsImdldEVsZW1lbnRCeUlkIiwic3RhcnRzV2l0aCIsImNvbnZlcnRIeXBoZW5Ub1BlcmlvZCIsInV0aWxzIiwicmVwbGFjZSIsImVxdWFscyIsInRoYXQiLCJuYW1lRXF1YWxzIiwidGhhdE5hbWUiLCJ0aGlzTmFtZSIsInRvTG93ZXJDYXNlIiwiVkFMSURfVFlQRVMiLCJpc1ZhbGlkVHlwZSIsIkVycm9yIiwidHQiLCJzdHIiLCJyZWdleCIsIlJlZ0V4cCIsImZ1bGwiLCJmb3JFYWNoIiwid29yZCIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiZCIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImNocm9tZSIsInJ1bnRpbWUiLCJvbk1lc3NhZ2UiLCJhZGRMaXN0ZW5lciIsInJlcXVlc3QiLCJzZW5kZXIiLCJzZW5kUmVzcG9uc2UiLCJtZXNzYWdlIiwiZnJvbVNpdGUiLCJ0b1NpdGUiLCJjb25zb2xlIiwibG9nIiwic2VuZE1lc3NhZ2UiLCJ0aWNrZXJTeW1ib2wiLCJ0aWNrZXJOYW1lIiwiaW5kZXgiXSwic291cmNlUm9vdCI6IiJ9