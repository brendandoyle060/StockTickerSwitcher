(()=>{"use strict";var t,e,r={776:(t,e,r)=>{r.d(e,{G:()=>s});var o,n=r(199),i=r(219),c=(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),s=function(t){function e(){return t.call(this,"Robinhood","https://robinhood.com")||this}return c(e,t),e.prototype.createUrlForTicker=function(t){return"crypto"===t.tickerType.value?"".concat(this.baseUrl,"/").concat(t.tickerType.value,"/").concat(t.symbol):"".concat(this.baseUrl,"/stocks/").concat(t.symbol)},e.prototype.getTicker=function(t,e){return new i.v(this.getTickerFromUrl(t),this.getName(e),this.getTickerType(this,t,e))},e.prototype.getTickerFromUrl=function(t){var e=t.split("/"),r=e.length-1,o=e[r];return 0===o.trim().length&&(o=e[r-1]),o},e.prototype.getName=function(t){return t.querySelector("main h1").textContent.trim()},e.prototype.isCrypto=function(t){return t.includes("crypto")},e.prototype.isEtf=function(t){return!(null===t.querySelector("#etf-category"))},e.prototype.isNoResultsPage=function(t){return t.querySelector("html title").textContent.includes("Page not found")},e.prototype.isTickerUrl=function(t){return t.includes("https://robinhood.com")&&(t.includes("stocks")||t.includes("crypto"))},e}(n.T)},199:(t,e,r)=>{r.d(e,{T:()=>n});var o=r(110),n=function(){function t(t,e){this.EXCEPTION_TICKERS=new Map,this.name=t,this.baseUrl=e}return t.prototype.is=function(){return this.name},t.prototype.createUrlForTicker=function(t){},t.prototype.getTicker=function(t,e){},t.prototype.getTickerType=function(t,e,r){return t.isEtf(r)?new o.C("etf"):t.isCrypto(e)?new o.C("crypto"):new o.C("stock")},t.prototype.getName=function(t){},t.prototype.isCrypto=function(t){},t.prototype.isEtf=function(t){},t.prototype.isNoResultsPage=function(t){},t.prototype.isTickerUrl=function(t){},t}()},455:(t,e,r)=>{r.d(e,{k:()=>u});var o,n=r(199),i=r(219),c=r(700),s=(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),u=function(t){function e(){var e=t.call(this,"YahooFinance","https://finance.yahoo.com")||this;return e.EXCEPTION_TICKERS.set(["GRT6719","crypto"],["GRT","crypto"]),e}return s(e,t),e.prototype.createUrlForTicker=function(t){var e=t.convertPeriodToHyphen(t.symbol);return e=this.checkExceptionList(e,t.tickerType.toString(),!1),"crypto"===t.tickerType.value&&(e+="-USD"),"".concat(this.baseUrl,"/quote/").concat(e)},e.prototype.getTicker=function(t,e){var r=this.getTickerFromPage(e,this.isCrypto(e)),o=this.getTickerType(this,e,e);return new i.v(this.checkExceptionList(r,o.toString(),!0),this.getName(e),o)},e.prototype.checkExceptionList=function(t,e,r){var o,n,i=[t,e],c=this.EXCEPTION_TICKERS.entries();try{for(var s=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],o=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(c),u=s.next();!u.done;u=s.next()){var p=u.value,a=void 0,l=void 0;if(r?(a=p[0],l=p[1]):(a=p[1],l=p[0]),i[0]===a[0]&&i[1]===a[1]){t=l[0];break}}}catch(t){o={error:t}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(o)throw o.error}}return t},e.prototype.getHeaderSection=function(){return"section.main section.container div.top"},e.prototype.getName=function(t){var e=this.getCompanyHeader(t).split(" (")[0];return(new c.c).removeExtraWhitespace(e)},e.prototype.getTickerFromPage=function(t,e){var r=this.getCompanyHeader(t).split(" (")[1];return r=r.split(")")[0],e&&(r=r.split("-")[0]),r},e.prototype.getCompanyHeader=function(t){return t.querySelector(this.getHeaderSection()+" h1").textContent.trim()},e.prototype.isCrypto=function(t){return t.querySelector(this.getHeaderSection()).textContent.includes("CoinMarketCap")},e.prototype.isEtf=function(t){var e=t.querySelector("section.main div[data-testid='quote-statistics']");return(new c.c).removeExtraWhitespace(e.textContent).includes("Net Assets")},e.prototype.isNoResultsPage=function(t){return!!t.getElementById("module-error404")},e.prototype.isTickerUrl=function(t){return t.startsWith("https://finance.yahoo.com/quote/")},e}(n.T)},219:(t,e,r)=>{r.d(e,{v:()=>n});var o=r(700),n=function(){function t(t,e,r){this.symbol=this.convertHyphenToPeriod(t);var n=new o.c;this.name=n.removeExtraWhitespace(e),this.tickerType=r}return t.prototype.convertHyphenToPeriod=function(t){return t.replace("-",".")},t.prototype.convertPeriodToHyphen=function(t){return t.replace(".","-")},t.prototype.toString=function(){return"Ticker - symbol: ".concat(this.symbol,", name: ").concat(this.name,", type: ").concat(this.tickerType)},t.prototype.equals=function(t){return this.symbol===t.symbol&&this.nameEquals(t.name)&&this.tickerType.equals(t.tickerType)},t.prototype.nameEquals=function(t){var e=this.name.toLowerCase();return t=t.toLowerCase(),e.includes(t)||t.includes(e)},t}()},110:(t,e,r)=>{r.d(e,{C:()=>o});var o=function(){function t(t){if(this.VALID_TYPES=["stock","etf","mutualfund","crypto","future","bond"],t=t.toLowerCase().trim(),!this.isValidType(t))throw new Error("Invalid tickerType: "+t);this.value=t}return t.prototype.isValidType=function(t){return this.VALID_TYPES.includes(t)},t.prototype.toString=function(){return this.value},t.prototype.equals=function(t){return this.value===t.value},t}()},700:(t,e,r)=>{r.d(e,{c:()=>o});var o=function(){function t(){}return t.prototype.removeExtraWhitespace=function(t){var e=new RegExp("\\s+"),r=t.split(e),o="";return r.forEach((function(t){o=o+t.trim()+" "})),o.trim()},t}()}},o={};function n(t){var e=o[t];if(void 0!==e)return e.exports;var i=o[t]={exports:{}};return r[t](i,i.exports,n),i.exports}n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),t=n(776),e=n(455),chrome.runtime.onMessage.addListener((function(r,o,n){if("clicked_browser_action"===r.message){var i=void 0,c=void 0;if(r.url.toLowerCase().includes("robinhood")?(i=new t.G,c=new e.k):(i=new e.k,c=new t.G),i.isTickerUrl(r.url)){var s=i.getTicker(r.url,document);console.log(s.toString()),chrome.runtime.sendMessage({message:"open_new_tab",tickerSymbol:s.symbol,tickerName:s.name,tickerType:s.tickerType+"",index:r.index,fromSite:i.is(),toSite:c.is()})}else chrome.runtime.sendMessage({message:"open_homepage",index:r.index,fromSite:i.is(),toSite:c.is()})}}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UixFQUFTSyxFQUFLLENBQUVJLFlBQVksRUFBTUMsSUFBS04sRUFBV0MsSUFFMUUsRUNORFQsRUFBb0JVLEVBQUksQ0FBQ0ssRUFBS0MsSUFBVUwsT0FBT00sVUFBVUMsZUFBZUMsS0FBS0osRUFBS0MsRyxrQkNLOUVJLE9BQU9DLFFBQVFDLFVBQVVDLGFBQVksU0FDakNDLEVBQ0FDLEVBQ0FDLEdBRUEsR0FBd0IsMkJBQXBCRixFQUFRRyxRQUFzQyxDQUM5QyxJQUFJQyxPQUFRLEVBQ1JDLE9BQU0sRUFVVixHQVJJTCxFQUFRNUYsSUFBSXdELGNBQWMzQyxTQUFTLGNBQ25DbUYsRUFBVyxJQUFJLElBQ2ZDLEVBQVMsSUFBSSxNQUViRCxFQUFXLElBQUksSUFDZkMsRUFBUyxJQUFJLEtBR2JELEVBQVNoRixZQUFZNEUsRUFBUTVGLEtBQU0sQ0FDbkMsSUFBSVAsRUFBaUJ1RyxFQUFTakcsVUFBVTZGLEVBQVE1RixJQUFLQyxVQUNyRGlHLFFBQVFDLElBQUkxRyxFQUFPbUMsWUFFbkI0RCxPQUFPQyxRQUFRVyxZQUFZLENBQ3ZCTCxRQUFTLGVBQ1RNLGFBQWM1RyxFQUFPSyxPQUNyQndHLFdBQVk3RyxFQUFPd0IsS0FDbkJ2QixXQUFZRCxFQUFPQyxXQUFhLEdBQ2hDNkcsTUFBT1gsRUFBUVcsTUFDZlAsU0FBVUEsRUFBUzVFLEtBQ25CNkUsT0FBUUEsRUFBTzdFLE0sTUFHbkJvRSxPQUFPQyxRQUFRVyxZQUFZLENBQ3ZCTCxRQUFTLGdCQUNUUSxNQUFPWCxFQUFRVyxNQUNmUCxTQUFVQSxFQUFTNUUsS0FDbkI2RSxPQUFRQSxFQUFPN0UsTSxDQUkvQixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcm9iaW5ob29kdG95YWhvb2ZpbmFuY2UvLi9zcmMvc2l0ZXMvUm9iaW5ob29kLnRzIiwid2VicGFjazovL3JvYmluaG9vZHRveWFob29maW5hbmNlLy4vc3JjL3NpdGVzL1NpdGUudHMiLCJ3ZWJwYWNrOi8vcm9iaW5ob29kdG95YWhvb2ZpbmFuY2UvLi9zcmMvc2l0ZXMvWWFob29GaW5hbmNlLnRzIiwid2VicGFjazovL3JvYmluaG9vZHRveWFob29maW5hbmNlLy4vc3JjL3RpY2tlcnMvVGlja2VyLnRzIiwid2VicGFjazovL3JvYmluaG9vZHRveWFob29maW5hbmNlLy4vc3JjL3RpY2tlcnMvVGlja2VyVHlwZS50cyIsIndlYnBhY2s6Ly9yb2Jpbmhvb2R0b3lhaG9vZmluYW5jZS8uL3NyYy91dGlscy9VdGlscy50cyIsIndlYnBhY2s6Ly9yb2Jpbmhvb2R0b3lhaG9vZmluYW5jZS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9yb2Jpbmhvb2R0b3lhaG9vZmluYW5jZS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vcm9iaW5ob29kdG95YWhvb2ZpbmFuY2Uvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9yb2Jpbmhvb2R0b3lhaG9vZmluYW5jZS8uL3NyYy9jb250ZW50U2NyaXB0cy9jb250ZW50U2NyaXB0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNpdGUgfSBmcm9tIFwiLi9TaXRlXCI7XG5pbXBvcnQgeyBUaWNrZXJUeXBlIH0gZnJvbSBcIi4uL3RpY2tlcnMvVGlja2VyVHlwZVwiO1xuaW1wb3J0IHsgVGlja2VyIH0gZnJvbSBcIi4uL3RpY2tlcnMvVGlja2VyXCI7XG5cbmV4cG9ydCBjbGFzcyBSb2Jpbmhvb2QgZXh0ZW5kcyBTaXRlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoXCJSb2Jpbmhvb2RcIiwgYGh0dHBzOi8vcm9iaW5ob29kLmNvbWApO1xuICAgIH1cblxuICAgIGNyZWF0ZVVybEZvclRpY2tlcih0aWNrZXI6IFRpY2tlcik6IHN0cmluZyB7XG4gICAgICAgIGlmICh0aWNrZXIudGlja2VyVHlwZS52YWx1ZSA9PT0gXCJjcnlwdG9cIikge1xuICAgICAgICAgICAgcmV0dXJuIGAke3RoaXMuYmFzZVVybH0vJHt0aWNrZXIudGlja2VyVHlwZS52YWx1ZX0vJHt0aWNrZXIuc3ltYm9sfWA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBFVEZzIGFsc28gZ2V0IHRoZSAnc3RvY2tzJyBwYXRoIGluIHRoZSB1cmwgb24gUkhcbiAgICAgICAgICAgIHJldHVybiBgJHt0aGlzLmJhc2VVcmx9L3N0b2Nrcy8ke3RpY2tlci5zeW1ib2x9YDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldFRpY2tlcih1cmw6IHN0cmluZywgZG9jdW1lbnQ6IERvY3VtZW50KTogVGlja2VyIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUaWNrZXIoXG4gICAgICAgICAgICB0aGlzLmdldFRpY2tlckZyb21VcmwodXJsKSxcbiAgICAgICAgICAgIHRoaXMuZ2V0TmFtZShkb2N1bWVudCksXG4gICAgICAgICAgICB0aGlzLmdldFRpY2tlclR5cGUodGhpcywgdXJsLCBkb2N1bWVudClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gdXJsIC0gdGhpcyBwYWdlJ3MgdXJsXG4gICAgICogQHJldHVybnMganVzdCB0aGUgdGlja2VyIHNlY3Rpb24gb2YgdGhlIGdpdmVuIHVybFxuICAgICAqL1xuICAgIGdldFRpY2tlckZyb21VcmwodXJsOiBzdHJpbmcpIHtcbiAgICAgICAgbGV0IHNwbGl0QXJyYXkgPSB1cmwuc3BsaXQoXCIvXCIpO1xuXG4gICAgICAgIGxldCBsYXN0SW5kZXggPSBzcGxpdEFycmF5Lmxlbmd0aCAtIDE7XG4gICAgICAgIGxldCB0aWNrZXIgPSBzcGxpdEFycmF5W2xhc3RJbmRleF07XG4gICAgICAgIGlmICh0aWNrZXIudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGlja2VyID0gc3BsaXRBcnJheVtsYXN0SW5kZXggLSAxXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aWNrZXI7XG4gICAgfVxuXG4gICAgZ2V0TmFtZShkb2N1bWVudDogRG9jdW1lbnQpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIm1haW4gaDFcIikudGV4dENvbnRlbnQudHJpbSgpO1xuICAgIH1cblxuICAgIGlzQ3J5cHRvKHVybDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB1cmwuaW5jbHVkZXMoXCJjcnlwdG9cIik7XG4gICAgfVxuXG4gICAgaXNFdGYoZG9jdW1lbnQ6IERvY3VtZW50KTogYm9vbGVhbiB7XG4gICAgICAgIGxldCBldGZDYXRlZ29yeSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZXRmLWNhdGVnb3J5XCIpO1xuICAgICAgICByZXR1cm4gIShldGZDYXRlZ29yeSA9PT0gbnVsbCk7XG4gICAgfVxuXG4gICAgaXNOb1Jlc3VsdHNQYWdlKGRvY3VtZW50OiBEb2N1bWVudCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gZG9jdW1lbnRcbiAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKFwiaHRtbCB0aXRsZVwiKVxuICAgICAgICAgICAgLnRleHRDb250ZW50LmluY2x1ZGVzKFwiUGFnZSBub3QgZm91bmRcIik7XG4gICAgfVxuXG4gICAgaXNUaWNrZXJVcmwodXJsOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIHVybC5pbmNsdWRlcyhcImh0dHBzOi8vcm9iaW5ob29kLmNvbVwiKSAmJlxuICAgICAgICAgICAgKHVybC5pbmNsdWRlcyhcInN0b2Nrc1wiKSB8fCB1cmwuaW5jbHVkZXMoXCJjcnlwdG9cIikpXG4gICAgICAgICk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgVGlja2VyIH0gZnJvbSBcIi4uL3RpY2tlcnMvVGlja2VyXCI7XG5pbXBvcnQgeyBUaWNrZXJUeXBlIH0gZnJvbSBcIi4uL3RpY2tlcnMvVGlja2VyVHlwZVwiO1xuXG4vKipcbiAqIFBhcmVudCBjbGFzcyBmb3Igb2JqZWN0cyBob2xkaW5nIGluZm9ybWF0aW9uXG4gKiBhYm91dCBhIHBhcnRpY3VsYXIgd2Vic2l0ZS5cbiAqL1xuZXhwb3J0IGNsYXNzIFNpdGUge1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBiYXNlVXJsOiBzdHJpbmc7XG4gICAgRVhDRVBUSU9OX1RJQ0tFUlM6IE1hcDxhbnksIGFueT4gPSBuZXcgTWFwKCk7XG5cbiAgICBjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcsIGJhc2VVcmw6IHN0cmluZykge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLmJhc2VVcmwgPSBiYXNlVXJsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBuYW1lIG9mIHRoZSBzaXRlXG4gICAgICovXG4gICAgaXMoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubmFtZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHaXZlbiBhIFRpY2tlciwgY3JlYXRlIHRoZSBhcHByb3ByaWF0ZSB1cmwgZm9yIHRoYXQgVGlja2VyXG4gICAgICogb24gdGhpcyBTaXRlLlxuICAgICAqIEBwYXJhbSB0aWNrZXIgLSB0aGUgVGlja2VyIGZvciB3aGljaCB3ZSdyZSBjcmVhdGluZyBhIHVybFxuICAgICAqL1xuICAgIGNyZWF0ZVVybEZvclRpY2tlcih0aWNrZXI6IFRpY2tlcik6IGFueSB7fVxuXG4gICAgLyoqXG4gICAgICogUHVsbCBhbGwgbmVjZXNzYXJ5IGluZm9ybWF0aW9uIGZyb20gdGhlIGN1cnJlbnQgdXJsXG4gICAgICogYW5kIHBhZ2UgdG8gY3JlYXRlIGEgVGlja2VyIG9iamVjdCB0byBzZW5kIHRvIG90aGVyIFNpdGVzXG4gICAgICogQHBhcmFtIHVybCAtIHVybCBvZiB0aGUgY3VycmVudCBwYWdlXG4gICAgICogQHBhcmFtIGRvY3VtZW50IC0gRE9NIG9mIHRoZSBjdXJyZW50IHBhZ2VcbiAgICAgKi9cbiAgICBnZXRUaWNrZXIodXJsOiBzdHJpbmcsIGRvY3VtZW50OiBEb2N1bWVudCk6IGFueSB7fVxuXG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lIHRoZSB0eXBlIG9mIHRpY2tlciBmb3IgdGhlIGN1cnJlbnQgcGFnZVxuICAgICAqIChzdG9jaywgY3J5cHRvLCBldGMpXG4gICAgICogQHBhcmFtIHNpdGUgLSB0aGUgU2l0ZSB3aGljaCB0aGUgdXNlciBpcyBjdXJyZW50bHkgb25cbiAgICAgKiBAcGFyYW0gY3J5cHRvQXJnIC0gc29tZSBzaXRlcyBtYXkgbmVlZCBhIHNlcGFyYXRlIHdheSB0byBpZGVudGlmeSB3aGV0aGVyIG9yIG5vdCB0aGUgcGFnZSBpcyBhIGNyeXB0byBwYWdlIChzdWNoIGFzIHRoZSB1cmwpLlxuICAgICAqIElmIHRoYXQncyB0aGUgY2FzZSwgdGhhdCBhcmcgZ29lcyBoZXJlLiBPdGhlcndpc2UsIHRoZSBEb2N1bWVudCBwYXJhbSBpcyB1c3VhbGx5IHNlbnQgdHdpY2UuXG4gICAgICogQHBhcmFtIGRvY3VtZW50IC0gdGhlIERPTSBvZiB0aGUgY3VycmVudCBwYWdlLCBhcyBhIERvY3VtZW50IG9iamVjdC5cbiAgICAgKiBAcmV0dXJucyBUaWNrZXJUeXBlIG9mIHRoZSBjdXJyZW50IHBhZ2VcbiAgICAgKi9cbiAgICBnZXRUaWNrZXJUeXBlKHNpdGU6IFNpdGUsIGNyeXB0b0FyZzogYW55LCBkb2N1bWVudDogRG9jdW1lbnQpOiBUaWNrZXJUeXBlIHtcbiAgICAgICAgaWYgKHNpdGUuaXNFdGYoZG9jdW1lbnQpKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFRpY2tlclR5cGUoXCJldGZcIik7XG4gICAgICAgIH0gZWxzZSBpZiAoc2l0ZS5pc0NyeXB0byhjcnlwdG9BcmcpKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFRpY2tlclR5cGUoXCJjcnlwdG9cIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFRpY2tlclR5cGUoXCJzdG9ja1wiKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFJldHVybiB0eXBlIGZvciB0aGUgbWV0aG9kcyBiZWxvdyBpcyBcImFueVwiLCBiZWNhdXNlIHdlIGRvbid0IHdhbnQgdG8gcmV0dXJuIGEgdmFsdWUgaW4gdGhlIHN1cGVyY2xhc3MsIHdoaWNoIHdlIHdvdWxkIGhhdmUgdG8gc2luY2Ugd2UncmUgdXNpbmcgdGhlbSBpbiBnZXRUaWNrZXJUeXBlIGFib3ZlLlxuICAgIC8vIEltcGxlbWVudGF0aW9ucyBvZiB0aGVzZSBtZXRob2RzIGluIHN1YmNsYXNzZXMgc2hvdWxkIHJldHVybiBhIGJvb2xlYW4uXG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGNvbXBhbnkncyBmdWxsIG5hbWVcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnQgLSBET00gY29udGVudCBvZiB0aGUgY3VycmVudCBwYWdlXG4gICAgICovXG4gICAgZ2V0TmFtZShkb2N1bWVudDogRG9jdW1lbnQpOiBhbnkge31cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgY3VycmVudCBwYWdlIGlzIGZvciBhIGNyeXB0b2N1cnJlbmN5LFxuICAgICAqIGZhbHNlIG90aGVyd2lzZS5cbiAgICAgKiBAcGFyYW0geCAtIGFyZyBvZiBhbnkgdHlwZSB3aGljaCB3aWxsIGhlbHAgYSBwYXJ0aXVsYXIgc2l0ZVxuICAgICAqIGlkZW50aWZ5IGEgY3J5cHRvY3VycmVuY3kgcGFnZS5cbiAgICAgKi9cbiAgICBpc0NyeXB0byh4OiBhbnkpOiBhbnkge31cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgY3VycmVudCBwYWdlIGlzIGZvciBhbiBFVEYsXG4gICAgICogZmFsc2Ugb3RoZXJ3aXNlLlxuICAgICAqIEBwYXJhbSBkb2N1bWVudCAtIERPTSBvZiB0aGUgY3VycmVudCBwYWdlLlxuICAgICAqL1xuICAgIGlzRXRmKGRvY3VtZW50OiBEb2N1bWVudCk6IGFueSB7fVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBjdXJyZW50IHBhZ2UgaXMgYSBObyBSZXN1bHRzIHBhZ2UsXG4gICAgICogZmFsc2Ugb3RoZXJ3aXNlLlxuICAgICAqIEBwYXJhbSBkb2N1bWVudCAtIERPTSBvZiB0aGUgY3VycmVudCBwYWdlLlxuICAgICAqL1xuICAgIGlzTm9SZXN1bHRzUGFnZShkb2N1bWVudDogRG9jdW1lbnQpOiBhbnkge31cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB1cmwgLSB0aGUgY3VycmVudCBwYWdlJ3MgdXJsXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgdXJsIGluZGljYXRlcyB0aGF0IHRoZSBwYWdlIGlzIGZvciBvbmUgc3BlY2lmaWMgVGlja2VyLFxuICAgICAqIGZhbHNlIGlmIGl0J3MgYW55IG90aGVyIGtpbmQgb2YgcGFnZS5cbiAgICAgKi9cbiAgICBpc1RpY2tlclVybCh1cmw6IHN0cmluZyk6IGFueSB7fVxufVxuIiwiaW1wb3J0IHsgU2l0ZSB9IGZyb20gXCIuL1NpdGVcIjtcbmltcG9ydCB7IFRpY2tlclR5cGUgfSBmcm9tIFwiLi4vdGlja2Vycy9UaWNrZXJUeXBlXCI7XG5pbXBvcnQgeyBUaWNrZXIgfSBmcm9tIFwiLi4vdGlja2Vycy9UaWNrZXJcIjtcbmltcG9ydCB7IFV0aWxzIH0gZnJvbSBcIi4uL3V0aWxzL1V0aWxzXCI7XG5cbmV4cG9ydCBjbGFzcyBZYWhvb0ZpbmFuY2UgZXh0ZW5kcyBTaXRlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoXCJZYWhvb0ZpbmFuY2VcIiwgYGh0dHBzOi8vZmluYW5jZS55YWhvby5jb21gKTtcblxuICAgICAgICB0aGlzLkVYQ0VQVElPTl9USUNLRVJTLnNldChbXCJHUlQ2NzE5XCIsIFwiY3J5cHRvXCJdLCBbXCJHUlRcIiwgXCJjcnlwdG9cIl0pO1xuICAgIH1cblxuICAgIGNyZWF0ZVVybEZvclRpY2tlcih0aWNrZXI6IFRpY2tlcik6IHN0cmluZyB7XG4gICAgICAgIGxldCBzOiBzdHJpbmcgPSB0aWNrZXIuY29udmVydFBlcmlvZFRvSHlwaGVuKHRpY2tlci5zeW1ib2wpO1xuXG4gICAgICAgIHMgPSB0aGlzLmNoZWNrRXhjZXB0aW9uTGlzdChzLCB0aWNrZXIudGlja2VyVHlwZS50b1N0cmluZygpLCBmYWxzZSk7XG5cbiAgICAgICAgLy8gSWYgdGhlIHBhZ2UgdGhhdCB3ZSdyZSBvbiBpcyBmb3IgYSBzdG9jayBvciBFVEYsIHRoZW4gd2UgY2FuIGp1c3QgbGVhdmUgdGhlIHRpY2tlciBhcy1pcy5cbiAgICAgICAgLy8gSWYgdGhlIHBhZ2UgdGhhdCB3ZSdyZSBvbiBpcyBmb3IgYSBjcnlwdG9jdXJyZW5jeSwgdGhlbiB3ZSBuZWVkXG4gICAgICAgIC8vIHRvIGFkanVzdCB0aGUgdGlja2VyIHRvIGFkZCB0aGUgXCJxdW90ZSBjdXJyZW5jeVwiIC0tXG4gICAgICAgIC8vIHRoZSBjdXJyZW5jeSBmb3Igd2hpY2ggd2UncmUgZGlzcGxheWluZyB0aGUgZXhjaGFuZ2UgcmF0ZSB0byB0aGUgY3J5cHRvY3VycmVuY3kuXG4gICAgICAgIC8vIEJ5IGRlZmF1bHQsIHdlJ2xsIHVzZSB0aGUgVVMgRG9sbGFyIChcIlVTRFwiKS5cbiAgICAgICAgLy8gVE9ETzogQWxsb3cgdXNlciB0byBzZWxlY3QgdGhlaXIgcHJlZmVycmVkIHF1b3RlIGN1cnJlbmN5IGluIE9wdGlvbnMgbWVudS5cbiAgICAgICAgaWYgKHRpY2tlci50aWNrZXJUeXBlLnZhbHVlID09PSBcImNyeXB0b1wiKSB7XG4gICAgICAgICAgICBzID0gcyArIGAtVVNEYDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYCR7dGhpcy5iYXNlVXJsfS9xdW90ZS8ke3N9YDtcbiAgICB9XG5cbiAgICBnZXRUaWNrZXIodXJsOiBzdHJpbmcsIGRvY3VtZW50OiBEb2N1bWVudCk6IFRpY2tlciB7XG4gICAgICAgIGxldCB0aWNrZXJTdHJpbmc6IHN0cmluZyA9IHRoaXMuZ2V0VGlja2VyRnJvbVBhZ2UoXG4gICAgICAgICAgICBkb2N1bWVudCxcbiAgICAgICAgICAgIHRoaXMuaXNDcnlwdG8oZG9jdW1lbnQpXG4gICAgICAgICk7XG4gICAgICAgIGxldCB0aWNrZXJUeXBlOiBUaWNrZXJUeXBlID0gdGhpcy5nZXRUaWNrZXJUeXBlKFxuICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgIGRvY3VtZW50LFxuICAgICAgICAgICAgZG9jdW1lbnRcbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4gbmV3IFRpY2tlcihcbiAgICAgICAgICAgIHRoaXMuY2hlY2tFeGNlcHRpb25MaXN0KHRpY2tlclN0cmluZywgdGlja2VyVHlwZS50b1N0cmluZygpLCB0cnVlKSxcbiAgICAgICAgICAgIHRoaXMuZ2V0TmFtZShkb2N1bWVudCksXG4gICAgICAgICAgICB0aWNrZXJUeXBlXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlcmUgYXJlIGEgZmV3IG91dGxpZXIgc2VjdXJpdGllcyB3aGljaCBkbyBub3QgYWJpZGUgYnkgdGhlIHVybCBjcmVhdGlvblxuICAgICAqIHJ1bGVzIHdoaWNoIGFyZSBub3JtYWxseSB1c2VkIG9uIGNlcnRhaW4gc2l0ZXMuIFRvIGhhbmRsZSB0aGVzZSBjYXNlcywgd2UgbmVlZCB0b1xuICAgICAqIGNoZWNrIHRvIHNlZSBpZiBvdXIgdGlja2VyIGZhbGxzIGludG8gdGhpcyBzbWFsbCBzZXQgb2YgZXhjZXB0aW9ucyxcbiAgICAgKiBhbmQgaWYgc28sIHRvIGNvbnZlcnQgaXQgdG8gdGhlIGNvcnJlY3QgdGlja2VyLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRpY2tlclN0ciAtIHRoZSB0aWNrZXIgd2hpY2ggd2UncmUgY2hlY2tpbmcgdG8gc2VlIGlmIGl0J3Mgb24gdGhlIGV4Y2VwdGlvbiBsaXN0XG4gICAgICogQHBhcmFtIHR0U3RyIC0gdGhlIHRpY2tlciB0eXBlIG9mIHRoZSBnaXZlbiB0aWNrZXJcbiAgICAgKiBAcGFyYW0gaXNPdXRnb2luZyAtIHRydWUgaWYgd2UncmUgY29udmVydGluZyB0aGUgdGlja2VyIHRvXG4gICAgICogdXNlIGl0IGZvciBhIGRpZmZlcmVudCBzaXRlLCBmYWxzZSBpZiB0aGlzIGlzIGFuIGluY29taW5nIHRpY2tlclxuICAgICAqIHdoaWNoIHdlJ3JlIGNvbnZlcnRpbmcgZm9yIHVzZSBvbiAqdGhpcyogc2l0ZS5cbiAgICAgKiBAcmV0dXJucyB0aGUgY29ycmVjdCB0aWNrZXIgc3RyaW5nLCB3aGV0aGVyIGl0IG5lZWRlZCB0byBiZSBhZGp1c3RlZCBvciBub3QuXG4gICAgICovXG4gICAgY2hlY2tFeGNlcHRpb25MaXN0KFxuICAgICAgICB0aWNrZXJTdHI6IHN0cmluZyxcbiAgICAgICAgdHRTdHI6IHN0cmluZyxcbiAgICAgICAgaXNPdXRnb2luZzogYm9vbGVhblxuICAgICk6IHN0cmluZyB7XG4gICAgICAgIGxldCBhcmdBcnJheSA9IFt0aWNrZXJTdHIsIHR0U3RyXTtcbiAgICAgICAgbGV0IGV4Y2VwdGlvbkl0ZXJhdG9yID0gdGhpcy5FWENFUFRJT05fVElDS0VSUy5lbnRyaWVzKCk7XG4gICAgICAgIGZvciAobGV0IHBhaXIgb2YgZXhjZXB0aW9uSXRlcmF0b3IpIHtcbiAgICAgICAgICAgIGxldCBrZXlBcnJheTtcbiAgICAgICAgICAgIGxldCB2YWxBcnJheTtcbiAgICAgICAgICAgIGlmIChpc091dGdvaW5nKSB7XG4gICAgICAgICAgICAgICAga2V5QXJyYXkgPSBwYWlyWzBdO1xuICAgICAgICAgICAgICAgIHZhbEFycmF5ID0gcGFpclsxXTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAga2V5QXJyYXkgPSBwYWlyWzFdO1xuICAgICAgICAgICAgICAgIHZhbEFycmF5ID0gcGFpclswXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGFyZ0FycmF5WzBdID09PSBrZXlBcnJheVswXSAmJiBhcmdBcnJheVsxXSA9PT0ga2V5QXJyYXlbMV0pIHtcbiAgICAgICAgICAgICAgICB0aWNrZXJTdHIgPSB2YWxBcnJheVswXTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aWNrZXJTdHI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHJldHVybnMgaWQgZm9yIHRoZSBxdW90ZSBoZWFkZXIgZWxlbWVudFxuICAgICAqL1xuICAgIGdldEhlYWRlclNlY3Rpb24oKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIFwic2VjdGlvbi5tYWluIHNlY3Rpb24uY29udGFpbmVyIGRpdi50b3BcIjtcbiAgICB9XG5cbiAgICBnZXROYW1lKGRvY3VtZW50OiBEb2N1bWVudCk6IHN0cmluZyB7XG4gICAgICAgIGxldCBuYW1lID0gdGhpcy5nZXRDb21wYW55SGVhZGVyKGRvY3VtZW50KTtcbiAgICAgICAgbGV0IG5hbWVXaXRoVGlja2VyUmVtb3ZlZCA9IG5hbWUuc3BsaXQoXCIgKFwiKVswXTtcbiAgICAgICAgbGV0IHV0aWxzID0gbmV3IFV0aWxzKCk7XG4gICAgICAgIHJldHVybiB1dGlscy5yZW1vdmVFeHRyYVdoaXRlc3BhY2UobmFtZVdpdGhUaWNrZXJSZW1vdmVkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGaW5kIHRoZSB0aWNrZXIgc3ltYm9sIGluIHRoZSBwYWdlLCBhbmQgc2VwYXJhdGUgaXQgZnJvbSBhbnkgdW5uZWNlc3NhcnkgdGV4dFxuICAgICAqIHdoaWNoIHN1cnJvdW5kcyBpdC5cbiAgICAgKiBAcGFyYW0gZG9jdW1lbnQgLSBET00gb2YgdGhlIGN1cnJlbnQgcGFnZVxuICAgICAqIEBwYXJhbSBpc0NyeXB0byAtIHRydWUgaWYgdGhlIGN1cnJlbnQgcGFnZSBpcyBmb3IgYSBjcnlwdG9jdXJyZW5jeSxcbiAgICAgKiBmYWxzZSBvdGhlcndpc2VcbiAgICAgKiBAcmV0dXJucyB0aWNrZXIgc3ltYm9sXG4gICAgICovXG4gICAgZ2V0VGlja2VyRnJvbVBhZ2UoZG9jdW1lbnQ6IERvY3VtZW50LCBpc0NyeXB0bzogYm9vbGVhbik6IHN0cmluZyB7XG4gICAgICAgIGxldCBuYW1lID0gdGhpcy5nZXRDb21wYW55SGVhZGVyKGRvY3VtZW50KTtcbiAgICAgICAgbGV0IGNsZWFuZWRVcFN5bWJvbCA9IG5hbWUuc3BsaXQoXCIgKFwiKVsxXTtcbiAgICAgICAgY2xlYW5lZFVwU3ltYm9sID0gY2xlYW5lZFVwU3ltYm9sLnNwbGl0KFwiKVwiKVswXTtcbiAgICAgICAgaWYgKGlzQ3J5cHRvKSB7XG4gICAgICAgICAgICBjbGVhbmVkVXBTeW1ib2wgPSBjbGVhbmVkVXBTeW1ib2wuc3BsaXQoXCItXCIpWzBdO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNsZWFuZWRVcFN5bWJvbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnQgLSBET00gb2YgdGhlIGN1cnJlbnQgcGFnZVxuICAgICAqIEByZXR1cm5zIHRleHQgY29udGVudCBvZiB0aGUgY29tcGFueSBoZWFkZXIgZWxlbWVudFxuICAgICAqL1xuICAgIGdldENvbXBhbnlIZWFkZXIoZG9jdW1lbnQ6IERvY3VtZW50KTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50XG4gICAgICAgICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLmdldEhlYWRlclNlY3Rpb24oKSArIFwiIGgxXCIpXG4gICAgICAgICAgICAudGV4dENvbnRlbnQudHJpbSgpO1xuICAgIH1cblxuICAgIGlzQ3J5cHRvKGRvY3VtZW50OiBEb2N1bWVudCk6IGJvb2xlYW4ge1xuICAgICAgICBsZXQgcXVvdGVIZWFkZXJJbmZvID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLmdldEhlYWRlclNlY3Rpb24oKSk7XG4gICAgICAgIHJldHVybiBxdW90ZUhlYWRlckluZm8udGV4dENvbnRlbnQuaW5jbHVkZXMoXCJDb2luTWFya2V0Q2FwXCIpO1xuICAgIH1cblxuICAgIGlzRXRmKGRvY3VtZW50OiBEb2N1bWVudCk6IGJvb2xlYW4ge1xuICAgICAgICBsZXQgcXVvdGVTdW1tYXJ5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICAgIFwic2VjdGlvbi5tYWluIGRpdltkYXRhLXRlc3RpZD0ncXVvdGUtc3RhdGlzdGljcyddXCJcbiAgICAgICAgKTtcbiAgICAgICAgbGV0IHV0aWxzID0gbmV3IFV0aWxzKCk7XG5cbiAgICAgICAgbGV0IHRleHRDbGVhbmVkVXAgPSB1dGlscy5yZW1vdmVFeHRyYVdoaXRlc3BhY2UoXG4gICAgICAgICAgICBxdW90ZVN1bW1hcnkudGV4dENvbnRlbnRcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIHRleHRDbGVhbmVkVXAuaW5jbHVkZXMoXCJOZXQgQXNzZXRzXCIpO1xuICAgIH1cblxuICAgIGlzTm9SZXN1bHRzUGFnZShkb2N1bWVudDogRG9jdW1lbnQpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuICEhZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtb2R1bGUtZXJyb3I0MDRcIik7XG4gICAgfVxuXG4gICAgaXNUaWNrZXJVcmwodXJsOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHVybC5zdGFydHNXaXRoKFwiaHR0cHM6Ly9maW5hbmNlLnlhaG9vLmNvbS9xdW90ZS9cIik7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgVGlja2VyVHlwZSB9IGZyb20gXCIuL1RpY2tlclR5cGVcIjtcbmltcG9ydCB7IFV0aWxzIH0gZnJvbSBcIi4uL3V0aWxzL1V0aWxzXCI7XG5cbmV4cG9ydCBjbGFzcyBUaWNrZXIge1xuICAgIHN5bWJvbDogc3RyaW5nO1xuICAgIG5hbWU6IHN0cmluZztcbiAgICB0aWNrZXJUeXBlOiBUaWNrZXJUeXBlO1xuXG4gICAgY29uc3RydWN0b3Ioc3ltYm9sOiBzdHJpbmcsIG5hbWU6IHN0cmluZywgdGlja2VyVHlwZTogVGlja2VyVHlwZSkge1xuICAgICAgICB0aGlzLnN5bWJvbCA9IHRoaXMuY29udmVydEh5cGhlblRvUGVyaW9kKHN5bWJvbCk7XG4gICAgICAgIGxldCB1dGlscyA9IG5ldyBVdGlscygpO1xuICAgICAgICB0aGlzLm5hbWUgPSB1dGlscy5yZW1vdmVFeHRyYVdoaXRlc3BhY2UobmFtZSk7XG4gICAgICAgIHRoaXMudGlja2VyVHlwZSA9IHRpY2tlclR5cGU7XG4gICAgfVxuXG4gICAgY29udmVydEh5cGhlblRvUGVyaW9kKHN5bWJvbDogc3RyaW5nKSB7XG4gICAgICAgIHJldHVybiBzeW1ib2wucmVwbGFjZShcIi1cIiwgXCIuXCIpO1xuICAgIH1cblxuICAgIGNvbnZlcnRQZXJpb2RUb0h5cGhlbihzeW1ib2w6IHN0cmluZykge1xuICAgICAgICByZXR1cm4gc3ltYm9sLnJlcGxhY2UoXCIuXCIsIFwiLVwiKTtcbiAgICB9XG5cbiAgICB0b1N0cmluZygpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gYFRpY2tlciAtIHN5bWJvbDogJHt0aGlzLnN5bWJvbH0sIG5hbWU6ICR7dGhpcy5uYW1lfSwgdHlwZTogJHt0aGlzLnRpY2tlclR5cGV9YDtcbiAgICB9XG5cbiAgICBlcXVhbHModGhhdDogVGlja2VyKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICB0aGlzLnN5bWJvbCA9PT0gdGhhdC5zeW1ib2wgJiZcbiAgICAgICAgICAgIHRoaXMubmFtZUVxdWFscyh0aGF0Lm5hbWUpICYmXG4gICAgICAgICAgICB0aGlzLnRpY2tlclR5cGUuZXF1YWxzKHRoYXQudGlja2VyVHlwZSlcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVjayB0byBzZWUgaWYgYSBnaXZlbiBjb21wYW55J3MgbmFtZSBtYXRjaGVzIHRoaXMgY29tcGFueSdzIG5hbWUuXG4gICAgICogU2luY2UgdGhlc2UgdmFsdWVzIGFyZSBiZWluZyBwdWxsZWQgZnJvbSBlYWNoIHNpdGUgd2UncmUgdmlzaXRpbmcgKGFuZCB3ZSBjYW4ndCBjb250cm9sIHdoYXQgdGhleSBjYWxsIHRoZW0pLFxuICAgICAqIGFuZCBzaW5jZSB0aGVzZSBlcXVhbGl0eSBmdW5jdGlvbnMgYXJlIChhdCBsZWFzdCBzbyBmYXIpIG9ubHkgYmVpbmcgdXNlZCB0byBmYWNpbGl0YXRlIHVuaXQgdGVzdGluZyBhbnl3YXksXG4gICAgICogdGhpcyBmdW5jdGlvbiBpcyBiYXNpY2FsbHkganVzdCBjaGVja2luZyB0byBzZWUgaWYgdGhlIG5hbWVzIGFyZSBcImNsb3NlIGVub3VnaFwiIGJ5IGNoZWNraW5nIHRvIHNlZSBpZiBvbmUgc3RyaW5nIGluY2x1ZGVzIHRoZSBvdGhlci5cbiAgICAgKlxuICAgICAqIEZvciBleGFtcGxlLCB0aGUgUkggcGFnZSBmb3IgJFNQWSBjYWxscyBpdCBcIlNQRFIgUyZQIDUwMCBFVEZcIiwgd2hpbGUgWUYgY2FsbHMgaXQgXCJTUERSIFMmUCA1MDAgRVRGIFRydXN0XCIuXG4gICAgICogRXZlbiB0aG91Z2ggdGhlIHN0cmluZ3MgYXJlbid0IGlkZW50aWNhbCwgd2Ugc3RpbGwgd2FudCB0aGVzZSB0byBiZSBjb25zaWRlcmVkIGVxdWFsLCBzbyB3ZSBjYW4ganVzdCBjaGVjayBpZiBvbmUgY29udGFpbnMgdGhlIG90aGVyLCB3aGljaCBpdCBkb2VzLlxuICAgICAqXG4gICAgICogVE9ETyAtIHRoZXJlIHdpbGwgcHJvYmFibHkgYmUgc29tZSBlZGdlIGNhc2VzIGZvciB3aGljaCB0aGlzIHNvbHV0aW9uIHdpbGwgbm90IHdvcmssIHNvIHRoaXMgd2lsbCBsaWtlbHkgaGF2ZSB0byBiZSByZXZpc2VkIGluIHRoZSBmdXR1cmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdGhhdE5hbWUgLSBuYW1lIG9mIHRoZSBjb21wYW55IHRvIHdoaWNoIHdlJ3JlIGNvbXBhcmluZyB0aGlzIGNvbXBhbnlcbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBjb21wYW5pZXMnIG5hbWVzIGFyZSB0aGUgc2FtZSAob3IgYXQgbGVhc3QsIGNsb3NlIGVub3VnaClcbiAgICAgKi9cbiAgICBuYW1lRXF1YWxzKHRoYXROYW1lOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgbGV0IHRoaXNOYW1lID0gdGhpcy5uYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIHRoYXROYW1lID0gdGhhdE5hbWUudG9Mb3dlckNhc2UoKTtcblxuICAgICAgICByZXR1cm4gdGhpc05hbWUuaW5jbHVkZXModGhhdE5hbWUpIHx8IHRoYXROYW1lLmluY2x1ZGVzKHRoaXNOYW1lKTtcbiAgICB9XG59XG4iLCJleHBvcnQgY2xhc3MgVGlja2VyVHlwZSB7XG4gICAgVkFMSURfVFlQRVMgPSBbXCJzdG9ja1wiLCBcImV0ZlwiLCBcIm11dHVhbGZ1bmRcIiwgXCJjcnlwdG9cIiwgXCJmdXR1cmVcIiwgXCJib25kXCJdO1xuICAgIHZhbHVlOiBzdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3Rvcih0aWNrZXJUeXBlOiBzdHJpbmcpIHtcbiAgICAgICAgdGlja2VyVHlwZSA9IHRpY2tlclR5cGUudG9Mb3dlckNhc2UoKS50cmltKCk7XG4gICAgICAgIGlmICh0aGlzLmlzVmFsaWRUeXBlKHRpY2tlclR5cGUpKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gdGlja2VyVHlwZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgdGlja2VyVHlwZTogXCIgKyB0aWNrZXJUeXBlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB0dCAtIFRpY2tlclR5cGUgYXMgYSBzdHJpbmdcbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBzdHJpbmcgaXMgd2l0aGluXG4gICAgICogdGhlIFZBTElEX1RZUEVTIGxpc3QsIGZhbHNlIG90aGVyd2lzZVxuICAgICAqL1xuICAgIGlzVmFsaWRUeXBlKHR0OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuVkFMSURfVFlQRVMuaW5jbHVkZXModHQpO1xuICAgIH1cblxuICAgIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlO1xuICAgIH1cblxuICAgIGVxdWFscyh0aGF0OiBUaWNrZXJUeXBlKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlID09PSB0aGF0LnZhbHVlO1xuICAgIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBVdGlscyB7XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBsYXJnZSBjaHVua3Mgb2Ygd2hpdGVzcGFjZSBmcm9tIGEgZ2l2ZW4gc3RyaW5nLFxuICAgICAqIHJlcGxhY2luZyBlYWNoIHdpdGgganVzdCBhIHNpbmdsZSBzcGFjZS5cbiAgICAgKiBAcGFyYW0gc3RyIC0gdGV4dCB3aGljaCBjb250YWlucyBleGNlc3Mgd2hpdGVzcGFjZVxuICAgICAqIEByZXR1cm5zIHN0cmluZyB3aXRoIGV4Y2VzcyB3aGl0ZXNwYWNlIHJlbW92ZWRcbiAgICAgKi9cbiAgICByZW1vdmVFeHRyYVdoaXRlc3BhY2Uoc3RyOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICBsZXQgcmVnZXggPSBuZXcgUmVnRXhwKFwiXFxcXHMrXCIpO1xuICAgICAgICBsZXQgc3BsaXQgPSBzdHIuc3BsaXQocmVnZXgpO1xuICAgICAgICBsZXQgZnVsbCA9IFwiXCI7XG4gICAgICAgIHNwbGl0LmZvckVhY2goZnVuY3Rpb24gKHdvcmQpIHtcbiAgICAgICAgICAgIGZ1bGwgPSBmdWxsICsgd29yZC50cmltKCkgKyBcIiBcIjtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIEdldCByaWQgb2YgdGhlIG9uZSBleHRyYSBzcGFjZSBhdCB0aGUgZW5kIGJlZm9yZSB3ZSByZXR1cm5cbiAgICAgICAgcmV0dXJuIGZ1bGwudHJpbSgpO1xuICAgIH1cbn1cbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiaW1wb3J0IHsgUm9iaW5ob29kIH0gZnJvbSBcIi4uL3NpdGVzL1JvYmluaG9vZFwiO1xuaW1wb3J0IHsgWWFob29GaW5hbmNlIH0gZnJvbSBcIi4uL3NpdGVzL1lhaG9vRmluYW5jZVwiO1xuaW1wb3J0IHsgVGlja2VyIH0gZnJvbSBcIi4uL3RpY2tlcnMvVGlja2VyXCI7XG5cbihmdW5jdGlvbiAoKSB7XG4gICAgY2hyb21lLnJ1bnRpbWUub25NZXNzYWdlLmFkZExpc3RlbmVyKGZ1bmN0aW9uIGljb25DbGlja2VkKFxuICAgICAgICByZXF1ZXN0LFxuICAgICAgICBzZW5kZXIsXG4gICAgICAgIHNlbmRSZXNwb25zZVxuICAgICkge1xuICAgICAgICBpZiAocmVxdWVzdC5tZXNzYWdlID09PSBcImNsaWNrZWRfYnJvd3Nlcl9hY3Rpb25cIikge1xuICAgICAgICAgICAgbGV0IGZyb21TaXRlO1xuICAgICAgICAgICAgbGV0IHRvU2l0ZTtcblxuICAgICAgICAgICAgaWYgKHJlcXVlc3QudXJsLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJyb2Jpbmhvb2RcIikpIHtcbiAgICAgICAgICAgICAgICBmcm9tU2l0ZSA9IG5ldyBSb2Jpbmhvb2QoKTtcbiAgICAgICAgICAgICAgICB0b1NpdGUgPSBuZXcgWWFob29GaW5hbmNlKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGZyb21TaXRlID0gbmV3IFlhaG9vRmluYW5jZSgpO1xuICAgICAgICAgICAgICAgIHRvU2l0ZSA9IG5ldyBSb2Jpbmhvb2QoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGZyb21TaXRlLmlzVGlja2VyVXJsKHJlcXVlc3QudXJsKSkge1xuICAgICAgICAgICAgICAgIGxldCB0aWNrZXI6IFRpY2tlciA9IGZyb21TaXRlLmdldFRpY2tlcihyZXF1ZXN0LnVybCwgZG9jdW1lbnQpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRpY2tlci50b1N0cmluZygpKTtcblxuICAgICAgICAgICAgICAgIGNocm9tZS5ydW50aW1lLnNlbmRNZXNzYWdlKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJvcGVuX25ld190YWJcIixcbiAgICAgICAgICAgICAgICAgICAgdGlja2VyU3ltYm9sOiB0aWNrZXIuc3ltYm9sLFxuICAgICAgICAgICAgICAgICAgICB0aWNrZXJOYW1lOiB0aWNrZXIubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgdGlja2VyVHlwZTogdGlja2VyLnRpY2tlclR5cGUgKyBcIlwiLFxuICAgICAgICAgICAgICAgICAgICBpbmRleDogcmVxdWVzdC5pbmRleCxcbiAgICAgICAgICAgICAgICAgICAgZnJvbVNpdGU6IGZyb21TaXRlLmlzKCksXG4gICAgICAgICAgICAgICAgICAgIHRvU2l0ZTogdG9TaXRlLmlzKCksXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNocm9tZS5ydW50aW1lLnNlbmRNZXNzYWdlKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJvcGVuX2hvbWVwYWdlXCIsXG4gICAgICAgICAgICAgICAgICAgIGluZGV4OiByZXF1ZXN0LmluZGV4LFxuICAgICAgICAgICAgICAgICAgICBmcm9tU2l0ZTogZnJvbVNpdGUuaXMoKSxcbiAgICAgICAgICAgICAgICAgICAgdG9TaXRlOiB0b1NpdGUuaXMoKSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xufSkoKTtcbiJdLCJuYW1lcyI6WyJjcmVhdGVVcmxGb3JUaWNrZXIiLCJ0aWNrZXIiLCJ0aWNrZXJUeXBlIiwidmFsdWUiLCJ0aGlzIiwiYmFzZVVybCIsInN5bWJvbCIsImdldFRpY2tlciIsInVybCIsImRvY3VtZW50IiwiZ2V0VGlja2VyRnJvbVVybCIsImdldE5hbWUiLCJnZXRUaWNrZXJUeXBlIiwic3BsaXRBcnJheSIsInNwbGl0IiwibGFzdEluZGV4IiwibGVuZ3RoIiwidHJpbSIsInF1ZXJ5U2VsZWN0b3IiLCJ0ZXh0Q29udGVudCIsImlzQ3J5cHRvIiwiaW5jbHVkZXMiLCJpc0V0ZiIsImlzTm9SZXN1bHRzUGFnZSIsImlzVGlja2VyVXJsIiwibmFtZSIsIkVYQ0VQVElPTl9USUNLRVJTIiwiTWFwIiwiaXMiLCJzaXRlIiwiY3J5cHRvQXJnIiwieCIsInNldCIsInMiLCJjb252ZXJ0UGVyaW9kVG9IeXBoZW4iLCJjaGVja0V4Y2VwdGlvbkxpc3QiLCJ0b1N0cmluZyIsInRpY2tlclN0cmluZyIsImdldFRpY2tlckZyb21QYWdlIiwidGlja2VyU3RyIiwidHRTdHIiLCJpc091dGdvaW5nIiwiYXJnQXJyYXkiLCJleGNlcHRpb25JdGVyYXRvciIsImVudHJpZXMiLCJwYWlyIiwia2V5QXJyYXkiLCJ2YWxBcnJheSIsImdldEhlYWRlclNlY3Rpb24iLCJuYW1lV2l0aFRpY2tlclJlbW92ZWQiLCJnZXRDb21wYW55SGVhZGVyIiwicmVtb3ZlRXh0cmFXaGl0ZXNwYWNlIiwiY2xlYW5lZFVwU3ltYm9sIiwicXVvdGVTdW1tYXJ5IiwiZ2V0RWxlbWVudEJ5SWQiLCJzdGFydHNXaXRoIiwiY29udmVydEh5cGhlblRvUGVyaW9kIiwidXRpbHMiLCJyZXBsYWNlIiwiZXF1YWxzIiwidGhhdCIsIm5hbWVFcXVhbHMiLCJ0aGF0TmFtZSIsInRoaXNOYW1lIiwidG9Mb3dlckNhc2UiLCJWQUxJRF9UWVBFUyIsImlzVmFsaWRUeXBlIiwiRXJyb3IiLCJ0dCIsInN0ciIsInJlZ2V4IiwiUmVnRXhwIiwiZnVsbCIsImZvckVhY2giLCJ3b3JkIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJkIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiY2hyb21lIiwicnVudGltZSIsIm9uTWVzc2FnZSIsImFkZExpc3RlbmVyIiwicmVxdWVzdCIsInNlbmRlciIsInNlbmRSZXNwb25zZSIsIm1lc3NhZ2UiLCJmcm9tU2l0ZSIsInRvU2l0ZSIsImNvbnNvbGUiLCJsb2ciLCJzZW5kTWVzc2FnZSIsInRpY2tlclN5bWJvbCIsInRpY2tlck5hbWUiLCJpbmRleCJdLCJzb3VyY2VSb290IjoiIn0=