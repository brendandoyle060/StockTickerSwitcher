(()=>{"use strict";var t,e,r={776:(t,e,r)=>{r.d(e,{G:()=>s});var o,n=r(199),i=r(219),c=(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),s=function(t){function e(){return t.call(this,"Robinhood","https://robinhood.com")||this}return c(e,t),e.prototype.createUrlForTicker=function(t){return"crypto"===t.tickerType.value?"".concat(this.baseUrl,"/").concat(t.tickerType.value,"/").concat(t.symbol):"".concat(this.baseUrl,"/stocks/").concat(t.symbol)},e.prototype.getTicker=function(t,e){return new i.v(this.getTickerFromUrl(t),this.getName(e),this.getTickerType(this,t,e))},e.prototype.getTickerFromUrl=function(t){var e=t.split("/"),r=e.length-1,o=e[r];return 0===o.trim().length&&(o=e[r-1]),o},e.prototype.getName=function(t){return t.querySelector("main h1").textContent.trim()},e.prototype.isCrypto=function(t){return t.includes("crypto")},e.prototype.isEtf=function(t){return!(null===t.querySelector("#etf-category"))},e}(n.T)},199:(t,e,r)=>{r.d(e,{T:()=>n});var o=r(110),n=function(){function t(t,e){this.name=t,this.baseUrl=e}return t.prototype.is=function(){return this.name},t.prototype.createUrlForTicker=function(t){},t.prototype.getTickerType=function(t,e,r){return t.isEtf(r)?new o.C("etf"):t.isCrypto(e)?new o.C("crypto"):new o.C("stock")},t.prototype.isCrypto=function(t){},t.prototype.isEtf=function(t){},t}()},455:(t,e,r)=>{r.d(e,{k:()=>s});var o,n=r(199),i=r(219),c=(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),s=function(t){function e(){return t.call(this,"YahooFinance","https://finance.yahoo.com")||this}return c(e,t),e.prototype.createUrlForTicker=function(t){var e=t.getHyphenatedTickerSymbol();return"crypto"===t.tickerType.value&&(e+="-USD"),"".concat(this.baseUrl,"/quote/").concat(e)},e.prototype.getTicker=function(t,e){return new i.v(this.getTickerFromPage(e,this.isCrypto(e)),this.getName(e),this.getTickerType(this,e,e))},e.prototype.getQuoteHeaderInfoId=function(){return"#quote-header-info"},e.prototype.getName=function(t){var e=this.getCompanyHeader(t).split(" (")[0];return this.removeExtraWhitespace(e)},e.prototype.getTickerFromPage=function(t,e){var r=this.getCompanyHeader(t).split(" (")[1];return r=r.split(")")[0],e&&(r=r.split("-")[0]),r},e.prototype.getCompanyHeader=function(t){return t.querySelector(this.getQuoteHeaderInfoId()+" h1").textContent.trim()},e.prototype.removeExtraWhitespace=function(t){var e=new RegExp("\\s+"),r=t.split(e),o="";return r.forEach((function(t){o=o+t.trim()+" "})),o.trim()},e.prototype.isCrypto=function(t){return t.querySelector(this.getQuoteHeaderInfoId()+"").textContent.includes("CoinMarketCap")},e.prototype.isEtf=function(t){var e=t.querySelector("#quote-summary");return this.removeExtraWhitespace(e.textContent).includes("Net Assets")},e}(n.T)},219:(t,e,r)=>{r.d(e,{v:()=>o});var o=function(){function t(t,e,r){this.symbol=this.convertHyphenInTickerSymbol(t),this.name=this.removeExtraWhitespace(e),this.tickerType=r}return t.prototype.convertHyphenInTickerSymbol=function(t){return t.replace("-",".")},t.prototype.getHyphenatedTickerSymbol=function(){return this.symbol.replace(".","-")},t.prototype.removeExtraWhitespace=function(t){var e=new RegExp("\\s+"),r=t.split(e),o="";return r.forEach((function(t){o=o+t.trim()+" "})),o.trim()},t.prototype.toString=function(){return"Ticker - symbol: ".concat(this.symbol,", name: ").concat(this.name,", type: ").concat(this.tickerType)},t.prototype.equals=function(t){return this.symbol===t.symbol&&this.nameEquals(t.name)&&this.tickerType.equals(t.tickerType)},t.prototype.nameEquals=function(t){var e=this.name.toLowerCase();return t=t.toLowerCase(),e.includes(t)||t.includes(e)},t}()},110:(t,e,r)=>{r.d(e,{C:()=>o});var o=function(){function t(t){if(this.VALID_TYPES=["stock","etf","mutualfund","crypto","future","bond"],t=t.toLowerCase().trim(),!this.isValidType(t))throw new Error("Invalid tickerType: "+t);this.value=t}return t.prototype.isValidType=function(t){return this.VALID_TYPES.includes(t)},t.prototype.toString=function(){return this.value},t.prototype.equals=function(t){return this.value===t.value},t}()}},o={};function n(t){var e=o[t];if(void 0!==e)return e.exports;var i=o[t]={exports:{}};return r[t](i,i.exports,n),i.exports}n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),t=n(776),e=n(455),chrome.runtime.onMessage.addListener((function(r,o,n){if("clicked_browser_action"===r.message){var i=void 0,c=void 0;if(r.url.toLowerCase().includes("robinhood")?(i=new t.G,c=new e.k):(i=new e.k,c=new t.G),(p=r.url).startsWith("https://robinhood.com/stocks/")||p.startsWith("https://robinhood.com/crypto/")||p.startsWith("https://finance.yahoo.com/quote/")){var s=i.getTicker(r.url,document);console.log(s.toString()),chrome.runtime.sendMessage({message:"open_new_tab",tickerSymbol:s.symbol,tickerName:s.name,tickerType:s.tickerType+"",index:r.index,fromSite:i.is(),toSite:c.is()})}else chrome.runtime.sendMessage({message:"open_homepage",index:r.index,fromSite:i.is(),toSite:c.is()})}var p}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29udGVudFNjcmlwdC5qcyIsIm1hcHBpbmdzIjoid2hCQUlBLGNBQ0ksYSxPQUNJLFlBQU0sWUFBYSwwQkFBd0IsSUFDL0MsQ0EyQ0osT0E5QytCLE9BSzNCLFlBQUFBLG1CQUFBLFNBQW1CQyxHQUNmLE1BQWdDLFdBQTVCQSxFQUFPQyxXQUFXQyxNQUNYLFVBQUdDLEtBQUtDLFFBQU8sWUFBSUosRUFBT0MsV0FBV0MsTUFBSyxZQUFJRixFQUFPSyxRQUdyRCxVQUFHRixLQUFLQyxRQUFPLG1CQUFXSixFQUFPSyxPQUVoRCxFQUVBLFlBQUFDLFVBQUEsU0FBVUMsRUFBYUMsR0FDbkIsT0FBTyxJQUFJLElBQ1BMLEtBQUtNLGlCQUFpQkYsR0FDdEJKLEtBQUtPLFFBQVFGLEdBQ2JMLEtBQUtRLGNBQWNSLEtBQU1JLEVBQUtDLEdBRXRDLEVBRUEsWUFBQUMsaUJBQUEsU0FBaUJGLEdBQ2IsSUFBSUssRUFBYUwsRUFBSU0sTUFBTSxLQUV2QkMsRUFBWUYsRUFBV0csT0FBUyxFQUNoQ2YsRUFBU1ksRUFBV0UsR0FLeEIsT0FKNkIsSUFBekJkLEVBQU9nQixPQUFPRCxTQUNkZixFQUFTWSxFQUFXRSxFQUFZLElBRzdCZCxDQUNYLEVBRUEsWUFBQVUsUUFBQSxTQUFRRixHQUNKLE9BQU9BLEVBQVNTLGNBQWMsV0FBV0MsWUFBWUYsTUFDekQsRUFFQSxZQUFBRyxTQUFBLFNBQVNaLEdBQ0wsT0FBT0EsRUFBSWEsU0FBUyxTQUN4QixFQUVBLFlBQUFDLE1BQUEsU0FBTWIsR0FFRixRQUF5QixPQURQQSxFQUFTUyxjQUFjLGlCQUU3QyxFQUNKLEVBOUNBLENBQStCLEksOENDRC9CLGFBSUksV0FBWUssRUFBY2xCLEdBQ3RCRCxLQUFLbUIsS0FBT0EsRUFDWm5CLEtBQUtDLFFBQVVBLENBQ25CLENBc0JKLE9BcEJJLFlBQUFtQixHQUFBLFdBQ0ksT0FBT3BCLEtBQUttQixJQUNoQixFQUVBLFlBQUF2QixtQkFBQSxTQUFtQkMsR0FBc0IsRUFFekMsWUFBQVcsY0FBQSxTQUFjYSxFQUFZQyxFQUFnQmpCLEdBQ3RDLE9BQUlnQixFQUFLSCxNQUFNYixHQUNKLElBQUksSUFBVyxPQUNmZ0IsRUFBS0wsU0FBU00sR0FDZCxJQUFJLElBQVcsVUFFZixJQUFJLElBQVcsUUFFOUIsRUFJQSxZQUFBTixTQUFBLFNBQVNPLEdBQWMsRUFDdkIsWUFBQUwsTUFBQSxTQUFNYixHQUEwQixFQUNwQyxFQTdCQSxFLDRmQ0NBLGNBQ0ksYSxPQUNJLFlBQU0sZUFBZ0IsOEJBQTRCLElBQ3RELENBNkVKLE9BaEZrQyxPQUs5QixZQUFBVCxtQkFBQSxTQUFtQkMsR0FDZixJQUFJMkIsRUFBWTNCLEVBQU80Qiw0QkFXdkIsTUFIZ0MsV0FBNUI1QixFQUFPQyxXQUFXQyxRQUNsQnlCLEdBQVEsUUFFTCxVQUFHeEIsS0FBS0MsUUFBTyxrQkFBVXVCLEVBQ3BDLEVBRUEsWUFBQXJCLFVBQUEsU0FBVUMsRUFBYUMsR0FDbkIsT0FBTyxJQUFJLElBQ1BMLEtBQUswQixrQkFBa0JyQixFQUFVTCxLQUFLZ0IsU0FBU1gsSUFDL0NMLEtBQUtPLFFBQVFGLEdBQ2JMLEtBQUtRLGNBQWNSLEtBQU1LLEVBQVVBLEdBRTNDLEVBRUEsWUFBQXNCLHFCQUFBLFdBQ0ksTUFBTyxvQkFDWCxFQUVBLFlBQUFwQixRQUFBLFNBQVFGLEdBQ0osSUFDSXVCLEVBRE81QixLQUFLNkIsaUJBQWlCeEIsR0FDQUssTUFBTSxNQUFNLEdBQzdDLE9BQU9WLEtBQUs4QixzQkFBc0JGLEVBQ3RDLEVBRUEsWUFBQUYsa0JBQUEsU0FBa0JyQixFQUFvQlcsR0FDbEMsSUFDSWUsRUFETy9CLEtBQUs2QixpQkFBaUJ4QixHQUNOSyxNQUFNLE1BQU0sR0FNdkMsT0FMQXFCLEVBQWtCQSxFQUFnQnJCLE1BQU0sS0FBSyxHQUN6Q00sSUFDQWUsRUFBa0JBLEVBQWdCckIsTUFBTSxLQUFLLElBRzFDcUIsQ0FDWCxFQUVBLFlBQUFGLGlCQUFBLFNBQWlCeEIsR0FDYixPQUFPQSxFQUNGUyxjQUFjZCxLQUFLMkIsdUJBQXlCLE9BQzVDWixZQUFZRixNQUNyQixFQUVBLFlBQUFpQixzQkFBQSxTQUFzQkUsR0FDbEIsSUFBSUMsRUFBUSxJQUFJQyxPQUFPLFFBQ25CeEIsRUFBUXNCLEVBQUl0QixNQUFNdUIsR0FDbEJFLEVBQU8sR0FLWCxPQUpBekIsRUFBTTBCLFNBQVEsU0FBVUMsR0FDcEJGLEVBQU9BLEVBQU9FLEVBQUt4QixPQUFTLEdBQ2hDLElBRU9zQixFQUFLdEIsTUFDaEIsRUFFQSxZQUFBRyxTQUFBLFNBQVNYLEdBSUwsT0FIc0JBLEVBQVNTLGNBQzNCZCxLQUFLMkIsdUJBQXlCLElBRVhaLFlBQVlFLFNBQVMsZ0JBQ2hELEVBRUEsWUFBQUMsTUFBQSxTQUFNYixHQUNGLElBQUlpQyxFQUFlakMsRUFBU1MsY0FBYyxrQkFJMUMsT0FIb0JkLEtBQUs4QixzQkFDckJRLEVBQWF2QixhQUVJRSxTQUFTLGFBQ2xDLEVBQ0osRUFoRkEsQ0FBa0MsSSxpQ0NGbEMsaUJBS0ksV0FBWWYsRUFBZ0JpQixFQUFjckIsR0FDdENFLEtBQUtFLE9BQVNGLEtBQUt1Qyw0QkFBNEJyQyxHQUMvQ0YsS0FBS21CLEtBQU9uQixLQUFLOEIsc0JBQXNCWCxHQUN2Q25CLEtBQUtGLFdBQWFBLENBQ3RCLENBcURKLE9BbkRJLFlBQUF5Qyw0QkFBQSxTQUE0QnJDLEdBQ3hCLE9BQU9BLEVBQU9zQyxRQUFRLElBQUssSUFDL0IsRUFFQSxZQUFBZiwwQkFBQSxXQUNJLE9BQU96QixLQUFLRSxPQUFPc0MsUUFBUSxJQUFLLElBQ3BDLEVBRUEsWUFBQVYsc0JBQUEsU0FBc0JFLEdBQ2xCLElBQUlDLEVBQVEsSUFBSUMsT0FBTyxRQUNuQnhCLEVBQVFzQixFQUFJdEIsTUFBTXVCLEdBQ2xCRSxFQUFPLEdBS1gsT0FKQXpCLEVBQU0wQixTQUFRLFNBQVVDLEdBQ3BCRixFQUFPQSxFQUFPRSxFQUFLeEIsT0FBUyxHQUNoQyxJQUVPc0IsRUFBS3RCLE1BQ2hCLEVBRUEsWUFBQTRCLFNBQUEsV0FDSSxNQUFPLDJCQUFvQnpDLEtBQUtFLE9BQU0sbUJBQVdGLEtBQUttQixLQUFJLG1CQUFXbkIsS0FBS0YsV0FDOUUsRUFFQSxZQUFBNEMsT0FBQSxTQUFPQyxHQUNILE9BQ0kzQyxLQUFLRSxTQUFXeUMsRUFBS3pDLFFBQ3JCRixLQUFLNEMsV0FBV0QsRUFBS3hCLE9BQ3JCbkIsS0FBS0YsV0FBVzRDLE9BQU9DLEVBQUs3QyxXQUVwQyxFQWdCQSxZQUFBOEMsV0FBQSxTQUFXQyxHQUNQLElBQUlDLEVBQVc5QyxLQUFLbUIsS0FBSzRCLGNBR3pCLE9BRkFGLEVBQVdBLEVBQVNFLGNBRWJELEVBQVM3QixTQUFTNEIsSUFBYUEsRUFBUzVCLFNBQVM2QixFQUM1RCxFQUNKLEVBOURBLEUsaUNDRkEsaUJBSUksV0FBWWhELEdBRVIsR0FMSixLQUFBa0QsWUFBYyxDQUFDLFFBQVMsTUFBTyxhQUFjLFNBQVUsU0FBVSxRQUk3RGxELEVBQWFBLEVBQVdpRCxjQUFjbEMsUUFDbENiLEtBQUtpRCxZQUFZbkQsR0FHakIsTUFBTSxJQUFJb0QsTUFBTSx1QkFBeUJwRCxHQUZ6Q0UsS0FBS0QsTUFBUUQsQ0FJckIsQ0FhSixPQVhJLFlBQUFtRCxZQUFBLFNBQVlFLEdBQ1IsT0FBT25ELEtBQUtnRCxZQUFZL0IsU0FBU2tDLEVBQ3JDLEVBRUEsWUFBQVYsU0FBQSxXQUNJLE9BQU96QyxLQUFLRCxLQUNoQixFQUVBLFlBQUEyQyxPQUFBLFNBQU9DLEdBQ0gsT0FBTzNDLEtBQUtELFFBQVU0QyxFQUFLNUMsS0FDL0IsRUFDSixFQXhCQSxFLEdDQ0lxRCxFQUEyQixDQUFDLEVBR2hDLFNBQVNDLEVBQW9CQyxHQUU1QixJQUFJQyxFQUFlSCxFQUF5QkUsR0FDNUMsUUFBcUJFLElBQWpCRCxFQUNILE9BQU9BLEVBQWFFLFFBR3JCLElBQUlDLEVBQVNOLEVBQXlCRSxHQUFZLENBR2pERyxRQUFTLENBQUMsR0FPWCxPQUhBRSxFQUFvQkwsR0FBVUksRUFBUUEsRUFBT0QsUUFBU0osR0FHL0NLLEVBQU9ELE9BQ2YsQ0NyQkFKLEVBQW9CTyxFQUFJLENBQUNILEVBQVNJLEtBQ2pDLElBQUksSUFBSUMsS0FBT0QsRUFDWFIsRUFBb0JVLEVBQUVGLEVBQVlDLEtBQVNULEVBQW9CVSxFQUFFTixFQUFTSyxJQUM1RUUsT0FBT0MsZUFBZVIsRUFBU0ssRUFBSyxDQUFFSSxZQUFZLEVBQU1DLElBQUtOLEVBQVdDLElBRTFFLEVDTkRULEVBQW9CVSxFQUFJLENBQUNLLEVBQUtDLElBQVVMLE9BQU9NLFVBQVVDLGVBQWVDLEtBQUtKLEVBQUtDLEcsa0JDSzlFSSxPQUFPQyxRQUFRQyxVQUFVQyxhQUFZLFNBQ2pDQyxFQUNBQyxFQUNBQyxHQUVBLEdBQXdCLDJCQUFwQkYsRUFBUUcsUUFBc0MsQ0FDOUMsSUFBSUMsT0FBUSxFQUNSQyxPQUFNLEVBVVYsR0FSSUwsRUFBUXpFLElBQUkyQyxjQUFjOUIsU0FBUyxjQUNuQ2dFLEVBQVcsSUFBSSxJQUNmQyxFQUFTLElBQUksTUFFYkQsRUFBVyxJQUFJLElBQ2ZDLEVBQVMsSUFBSSxNQTJCRjlFLEVBeEJHeUUsRUFBUXpFLEtBMEJ0QitFLFdBQVcsa0NBQ2YvRSxFQUFJK0UsV0FBVyxrQ0FDZi9FLEVBQUkrRSxXQUFXLG9DQTVCaUIsQ0FDNUIsSUFBSXRGLEVBQWlCb0YsRUFBUzlFLFVBQVUwRSxFQUFRekUsSUFBS0MsVUFDckQrRSxRQUFRQyxJQUFJeEYsRUFBTzRDLFlBRW5CZ0MsT0FBT0MsUUFBUVksWUFBWSxDQUN2Qk4sUUFBUyxlQUNUTyxhQUFjMUYsRUFBT0ssT0FDckJzRixXQUFZM0YsRUFBT3NCLEtBQ25CckIsV0FBWUQsRUFBT0MsV0FBYSxHQUNoQzJGLE1BQU9aLEVBQVFZLE1BQ2ZSLFNBQVVBLEVBQVM3RCxLQUNuQjhELE9BQVFBLEVBQU85RCxNLE1BR25CcUQsT0FBT0MsUUFBUVksWUFBWSxDQUN2Qk4sUUFBUyxnQkFDVFMsTUFBT1osRUFBUVksTUFDZlIsU0FBVUEsRUFBUzdELEtBQ25COEQsT0FBUUEsRUFBTzlELE0sQ0FNL0IsSUFBdUJoQixDQUZ2QixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcm9iaW5ob29kdG95YWhvb2ZpbmFuY2UvLi9zcmMvc2l0ZXMvUm9iaW5ob29kLnRzIiwid2VicGFjazovL3JvYmluaG9vZHRveWFob29maW5hbmNlLy4vc3JjL3NpdGVzL1NpdGUudHMiLCJ3ZWJwYWNrOi8vcm9iaW5ob29kdG95YWhvb2ZpbmFuY2UvLi9zcmMvc2l0ZXMvWWFob29GaW5hbmNlLnRzIiwid2VicGFjazovL3JvYmluaG9vZHRveWFob29maW5hbmNlLy4vc3JjL3RpY2tlcnMvVGlja2VyLnRzIiwid2VicGFjazovL3JvYmluaG9vZHRveWFob29maW5hbmNlLy4vc3JjL3RpY2tlcnMvVGlja2VyVHlwZS50cyIsIndlYnBhY2s6Ly9yb2Jpbmhvb2R0b3lhaG9vZmluYW5jZS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9yb2Jpbmhvb2R0b3lhaG9vZmluYW5jZS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vcm9iaW5ob29kdG95YWhvb2ZpbmFuY2Uvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9yb2Jpbmhvb2R0b3lhaG9vZmluYW5jZS8uL3NyYy9jb250ZW50U2NyaXB0cy9jb250ZW50U2NyaXB0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNpdGUgfSBmcm9tIFwiLi9TaXRlXCI7XG5pbXBvcnQgeyBUaWNrZXJUeXBlIH0gZnJvbSBcIi4uL3RpY2tlcnMvVGlja2VyVHlwZVwiO1xuaW1wb3J0IHsgVGlja2VyIH0gZnJvbSBcIi4uL3RpY2tlcnMvVGlja2VyXCI7XG5cbmV4cG9ydCBjbGFzcyBSb2Jpbmhvb2QgZXh0ZW5kcyBTaXRlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoXCJSb2Jpbmhvb2RcIiwgYGh0dHBzOi8vcm9iaW5ob29kLmNvbWApO1xuICAgIH1cblxuICAgIGNyZWF0ZVVybEZvclRpY2tlcih0aWNrZXI6IFRpY2tlcik6IHN0cmluZyB7XG4gICAgICAgIGlmICh0aWNrZXIudGlja2VyVHlwZS52YWx1ZSA9PT0gXCJjcnlwdG9cIikge1xuICAgICAgICAgICAgcmV0dXJuIGAke3RoaXMuYmFzZVVybH0vJHt0aWNrZXIudGlja2VyVHlwZS52YWx1ZX0vJHt0aWNrZXIuc3ltYm9sfWA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBFVEZzIGFsc28gZ2V0IHRoZSAnc3RvY2tzJyBwYXRoIGluIHRoZSB1cmwgb24gUkhcbiAgICAgICAgICAgIHJldHVybiBgJHt0aGlzLmJhc2VVcmx9L3N0b2Nrcy8ke3RpY2tlci5zeW1ib2x9YDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldFRpY2tlcih1cmw6IHN0cmluZywgZG9jdW1lbnQ6IERvY3VtZW50KTogVGlja2VyIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUaWNrZXIoXG4gICAgICAgICAgICB0aGlzLmdldFRpY2tlckZyb21VcmwodXJsKSxcbiAgICAgICAgICAgIHRoaXMuZ2V0TmFtZShkb2N1bWVudCksXG4gICAgICAgICAgICB0aGlzLmdldFRpY2tlclR5cGUodGhpcywgdXJsLCBkb2N1bWVudClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBnZXRUaWNrZXJGcm9tVXJsKHVybDogc3RyaW5nKSB7XG4gICAgICAgIGxldCBzcGxpdEFycmF5ID0gdXJsLnNwbGl0KFwiL1wiKTtcblxuICAgICAgICBsZXQgbGFzdEluZGV4ID0gc3BsaXRBcnJheS5sZW5ndGggLSAxO1xuICAgICAgICBsZXQgdGlja2VyID0gc3BsaXRBcnJheVtsYXN0SW5kZXhdO1xuICAgICAgICBpZiAodGlja2VyLnRyaW0oKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRpY2tlciA9IHNwbGl0QXJyYXlbbGFzdEluZGV4IC0gMV07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGlja2VyO1xuICAgIH1cblxuICAgIGdldE5hbWUoZG9jdW1lbnQ6IERvY3VtZW50KTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJtYWluIGgxXCIpLnRleHRDb250ZW50LnRyaW0oKTtcbiAgICB9XG5cbiAgICBpc0NyeXB0byh1cmw6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdXJsLmluY2x1ZGVzKFwiY3J5cHRvXCIpO1xuICAgIH1cblxuICAgIGlzRXRmKGRvY3VtZW50OiBEb2N1bWVudCk6IGJvb2xlYW4ge1xuICAgICAgICBsZXQgZXRmQ2F0ZWdvcnkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2V0Zi1jYXRlZ29yeVwiKTtcbiAgICAgICAgcmV0dXJuICEoZXRmQ2F0ZWdvcnkgPT09IG51bGwpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFRpY2tlciB9IGZyb20gXCIuLi90aWNrZXJzL1RpY2tlclwiO1xuaW1wb3J0IHsgVGlja2VyVHlwZSB9IGZyb20gXCIuLi90aWNrZXJzL1RpY2tlclR5cGVcIjtcblxuZXhwb3J0IGNsYXNzIFNpdGUge1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBiYXNlVXJsOiBzdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcsIGJhc2VVcmw6IHN0cmluZykge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLmJhc2VVcmwgPSBiYXNlVXJsO1xuICAgIH1cblxuICAgIGlzKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLm5hbWU7XG4gICAgfVxuXG4gICAgY3JlYXRlVXJsRm9yVGlja2VyKHRpY2tlcjogVGlja2VyKTogYW55IHt9XG5cbiAgICBnZXRUaWNrZXJUeXBlKHNpdGU6IFNpdGUsIGNyeXB0b0FyZzogYW55LCBkb2N1bWVudDogRG9jdW1lbnQpOiBUaWNrZXJUeXBlIHtcbiAgICAgICAgaWYgKHNpdGUuaXNFdGYoZG9jdW1lbnQpKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFRpY2tlclR5cGUoXCJldGZcIik7XG4gICAgICAgIH0gZWxzZSBpZiAoc2l0ZS5pc0NyeXB0byhjcnlwdG9BcmcpKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFRpY2tlclR5cGUoXCJjcnlwdG9cIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFRpY2tlclR5cGUoXCJzdG9ja1wiKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFJldHVybiB0eXBlIGhlcmUgaXMgXCJhbnlcIiwgYmVjYXVzZSB3ZSBkb24ndCB3YW50IHRvIHJldHVybiBhIHZhbHVlIGluIHRoZSBzdXBlcmNsYXNzLCB3aGljaCB3ZSB3b3VsZCBoYXZlIHRvIHNpbmNlIHdlJ3JlIHVzaW5nIHRoZW0gaW4gZ2V0VGlja2VyVHlwZSBhYm92ZS5cbiAgICAvLyBJbXBsZW1lbnRhdGlvbnMgb2YgdGhlc2UgbWV0aG9kcyBpbiBzdWJjbGFzc2VzIHNob3VsZCByZXR1cm4gYSBib29sZWFuLlxuICAgIGlzQ3J5cHRvKHg6IGFueSk6IGFueSB7fVxuICAgIGlzRXRmKGRvY3VtZW50OiBEb2N1bWVudCk6IGFueSB7fVxufVxuIiwiaW1wb3J0IHsgU2l0ZSB9IGZyb20gXCIuL1NpdGVcIjtcbmltcG9ydCB7IFRpY2tlclR5cGUgfSBmcm9tIFwiLi4vdGlja2Vycy9UaWNrZXJUeXBlXCI7XG5pbXBvcnQgeyBUaWNrZXIgfSBmcm9tIFwiLi4vdGlja2Vycy9UaWNrZXJcIjtcblxuZXhwb3J0IGNsYXNzIFlhaG9vRmluYW5jZSBleHRlbmRzIFNpdGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcihcIllhaG9vRmluYW5jZVwiLCBgaHR0cHM6Ly9maW5hbmNlLnlhaG9vLmNvbWApO1xuICAgIH1cblxuICAgIGNyZWF0ZVVybEZvclRpY2tlcih0aWNrZXI6IFRpY2tlcik6IHN0cmluZyB7XG4gICAgICAgIGxldCBzOiBzdHJpbmcgPSB0aWNrZXIuZ2V0SHlwaGVuYXRlZFRpY2tlclN5bWJvbCgpO1xuXG4gICAgICAgIC8vIElmIHRoZSBwYWdlIHRoYXQgd2UncmUgb24gaXMgZm9yIGEgc3RvY2sgb3IgRVRGLCB0aGVuIHdlIGNhbiBqdXN0IGxlYXZlIHRoZSB0aWNrZXIgYXMtaXMuXG4gICAgICAgIC8vIElmIHRoZSBwYWdlIHRoYXQgd2UncmUgb24gaXMgZm9yIGEgY3J5cHRvY3VycmVuY3ksIHRoZW4gd2UgbmVlZFxuICAgICAgICAvLyB0byBhZGp1c3QgdGhlIHRpY2tlciB0byBhZGQgdGhlIFwicXVvdGUgY3VycmVuY3lcIiAtLVxuICAgICAgICAvLyB0aGUgY3VycmVuY3kgZm9yIHdoaWNoIHdlJ3JlIGRpc3BsYXlpbmcgdGhlIGV4Y2hhbmdlIHJhdGUgdG8gdGhlIGNyeXB0b2N1cnJlbmN5LlxuICAgICAgICAvLyBCeSBkZWZhdWx0LCB3ZSdsbCB1c2UgdGhlIFVTIERvbGxhciAoXCJVU0RcIikuXG4gICAgICAgIC8vIFRPRE86IEFsbG93IHVzZXIgdG8gc2VsZWN0IHRoZWlyIHByZWZlcnJlZCBxdW90ZSBjdXJyZW5jeSBpbiBPcHRpb25zIG1lbnUuXG4gICAgICAgIGlmICh0aWNrZXIudGlja2VyVHlwZS52YWx1ZSA9PT0gXCJjcnlwdG9cIikge1xuICAgICAgICAgICAgcyA9IHMgKyBgLVVTRGA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGAke3RoaXMuYmFzZVVybH0vcXVvdGUvJHtzfWA7XG4gICAgfVxuXG4gICAgZ2V0VGlja2VyKHVybDogc3RyaW5nLCBkb2N1bWVudDogRG9jdW1lbnQpOiBUaWNrZXIge1xuICAgICAgICByZXR1cm4gbmV3IFRpY2tlcihcbiAgICAgICAgICAgIHRoaXMuZ2V0VGlja2VyRnJvbVBhZ2UoZG9jdW1lbnQsIHRoaXMuaXNDcnlwdG8oZG9jdW1lbnQpKSxcbiAgICAgICAgICAgIHRoaXMuZ2V0TmFtZShkb2N1bWVudCksXG4gICAgICAgICAgICB0aGlzLmdldFRpY2tlclR5cGUodGhpcywgZG9jdW1lbnQsIGRvY3VtZW50KVxuICAgICAgICApO1xuICAgIH1cblxuICAgIGdldFF1b3RlSGVhZGVySW5mb0lkKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBcIiNxdW90ZS1oZWFkZXItaW5mb1wiO1xuICAgIH1cblxuICAgIGdldE5hbWUoZG9jdW1lbnQ6IERvY3VtZW50KTogc3RyaW5nIHtcbiAgICAgICAgbGV0IG5hbWUgPSB0aGlzLmdldENvbXBhbnlIZWFkZXIoZG9jdW1lbnQpO1xuICAgICAgICBsZXQgbmFtZVdpdGhUaWNrZXJSZW1vdmVkID0gbmFtZS5zcGxpdChcIiAoXCIpWzBdO1xuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdmVFeHRyYVdoaXRlc3BhY2UobmFtZVdpdGhUaWNrZXJSZW1vdmVkKTtcbiAgICB9XG5cbiAgICBnZXRUaWNrZXJGcm9tUGFnZShkb2N1bWVudDogRG9jdW1lbnQsIGlzQ3J5cHRvOiBib29sZWFuKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IG5hbWUgPSB0aGlzLmdldENvbXBhbnlIZWFkZXIoZG9jdW1lbnQpO1xuICAgICAgICBsZXQgY2xlYW5lZFVwU3ltYm9sID0gbmFtZS5zcGxpdChcIiAoXCIpWzFdO1xuICAgICAgICBjbGVhbmVkVXBTeW1ib2wgPSBjbGVhbmVkVXBTeW1ib2wuc3BsaXQoXCIpXCIpWzBdO1xuICAgICAgICBpZiAoaXNDcnlwdG8pIHtcbiAgICAgICAgICAgIGNsZWFuZWRVcFN5bWJvbCA9IGNsZWFuZWRVcFN5bWJvbC5zcGxpdChcIi1cIilbMF07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY2xlYW5lZFVwU3ltYm9sO1xuICAgIH1cblxuICAgIGdldENvbXBhbnlIZWFkZXIoZG9jdW1lbnQ6IERvY3VtZW50KTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50XG4gICAgICAgICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLmdldFF1b3RlSGVhZGVySW5mb0lkKCkgKyBcIiBoMVwiKVxuICAgICAgICAgICAgLnRleHRDb250ZW50LnRyaW0oKTtcbiAgICB9XG5cbiAgICByZW1vdmVFeHRyYVdoaXRlc3BhY2Uoc3RyOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICBsZXQgcmVnZXggPSBuZXcgUmVnRXhwKFwiXFxcXHMrXCIpO1xuICAgICAgICBsZXQgc3BsaXQgPSBzdHIuc3BsaXQocmVnZXgpO1xuICAgICAgICBsZXQgZnVsbCA9IFwiXCI7XG4gICAgICAgIHNwbGl0LmZvckVhY2goZnVuY3Rpb24gKHdvcmQpIHtcbiAgICAgICAgICAgIGZ1bGwgPSBmdWxsICsgd29yZC50cmltKCkgKyBcIiBcIjtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIEdldCByaWQgb2YgdGhlIG9uZSBleHRyYSBzcGFjZSBhdCB0aGUgZW5kIGJlZm9yZSB3ZSByZXR1cm5cbiAgICAgICAgcmV0dXJuIGZ1bGwudHJpbSgpO1xuICAgIH1cblxuICAgIGlzQ3J5cHRvKGRvY3VtZW50OiBEb2N1bWVudCk6IGJvb2xlYW4ge1xuICAgICAgICBsZXQgcXVvdGVIZWFkZXJJbmZvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICAgIHRoaXMuZ2V0UXVvdGVIZWFkZXJJbmZvSWQoKSArIFwiXCJcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIHF1b3RlSGVhZGVySW5mby50ZXh0Q29udGVudC5pbmNsdWRlcyhcIkNvaW5NYXJrZXRDYXBcIik7XG4gICAgfVxuXG4gICAgaXNFdGYoZG9jdW1lbnQ6IERvY3VtZW50KTogYm9vbGVhbiB7XG4gICAgICAgIGxldCBxdW90ZVN1bW1hcnkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3F1b3RlLXN1bW1hcnlcIik7XG4gICAgICAgIGxldCB0ZXh0Q2xlYW5lZFVwID0gdGhpcy5yZW1vdmVFeHRyYVdoaXRlc3BhY2UoXG4gICAgICAgICAgICBxdW90ZVN1bW1hcnkudGV4dENvbnRlbnRcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIHRleHRDbGVhbmVkVXAuaW5jbHVkZXMoXCJOZXQgQXNzZXRzXCIpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFRpY2tlclR5cGUgfSBmcm9tIFwiLi9UaWNrZXJUeXBlXCI7XG5cbmV4cG9ydCBjbGFzcyBUaWNrZXIge1xuICAgIHN5bWJvbDogc3RyaW5nO1xuICAgIG5hbWU6IHN0cmluZztcbiAgICB0aWNrZXJUeXBlOiBUaWNrZXJUeXBlO1xuXG4gICAgY29uc3RydWN0b3Ioc3ltYm9sOiBzdHJpbmcsIG5hbWU6IHN0cmluZywgdGlja2VyVHlwZTogVGlja2VyVHlwZSkge1xuICAgICAgICB0aGlzLnN5bWJvbCA9IHRoaXMuY29udmVydEh5cGhlbkluVGlja2VyU3ltYm9sKHN5bWJvbCk7XG4gICAgICAgIHRoaXMubmFtZSA9IHRoaXMucmVtb3ZlRXh0cmFXaGl0ZXNwYWNlKG5hbWUpO1xuICAgICAgICB0aGlzLnRpY2tlclR5cGUgPSB0aWNrZXJUeXBlO1xuICAgIH1cblxuICAgIGNvbnZlcnRIeXBoZW5JblRpY2tlclN5bWJvbChzeW1ib2w6IHN0cmluZykge1xuICAgICAgICByZXR1cm4gc3ltYm9sLnJlcGxhY2UoXCItXCIsIFwiLlwiKTtcbiAgICB9XG5cbiAgICBnZXRIeXBoZW5hdGVkVGlja2VyU3ltYm9sKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zeW1ib2wucmVwbGFjZShcIi5cIiwgXCItXCIpO1xuICAgIH1cblxuICAgIHJlbW92ZUV4dHJhV2hpdGVzcGFjZShzdHI6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIGxldCByZWdleCA9IG5ldyBSZWdFeHAoXCJcXFxccytcIik7XG4gICAgICAgIGxldCBzcGxpdCA9IHN0ci5zcGxpdChyZWdleCk7XG4gICAgICAgIGxldCBmdWxsID0gXCJcIjtcbiAgICAgICAgc3BsaXQuZm9yRWFjaChmdW5jdGlvbiAod29yZCkge1xuICAgICAgICAgICAgZnVsbCA9IGZ1bGwgKyB3b3JkLnRyaW0oKSArIFwiIFwiO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gR2V0IHJpZCBvZiB0aGUgb25lIGV4dHJhIHNwYWNlIGF0IHRoZSBlbmQgYmVmb3JlIHdlIHJldHVyblxuICAgICAgICByZXR1cm4gZnVsbC50cmltKCk7XG4gICAgfVxuXG4gICAgdG9TdHJpbmcoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGBUaWNrZXIgLSBzeW1ib2w6ICR7dGhpcy5zeW1ib2x9LCBuYW1lOiAke3RoaXMubmFtZX0sIHR5cGU6ICR7dGhpcy50aWNrZXJUeXBlfWA7XG4gICAgfVxuXG4gICAgZXF1YWxzKHRoYXQ6IFRpY2tlcik6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgdGhpcy5zeW1ib2wgPT09IHRoYXQuc3ltYm9sICYmXG4gICAgICAgICAgICB0aGlzLm5hbWVFcXVhbHModGhhdC5uYW1lKSAmJlxuICAgICAgICAgICAgdGhpcy50aWNrZXJUeXBlLmVxdWFscyh0aGF0LnRpY2tlclR5cGUpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgdG8gc2VlIGlmIGEgZ2l2ZW4gY29tcGFueSdzIG5hbWUgbWF0Y2hlcyB0aGlzIGNvbXBhbnkncyBuYW1lLlxuICAgICAqIFNpbmNlIHRoZXNlIHZhbHVlcyBhcmUgYmVpbmcgcHVsbGVkIGZyb20gZWFjaCBzaXRlIHdlJ3JlIHZpc2l0aW5nIChhbmQgd2UgY2FuJ3QgY29udHJvbCB3aGF0IHRoZXkgY2FsbCB0aGVtKSxcbiAgICAgKiBhbmQgc2luY2UgdGhlc2UgZXF1YWxpdHkgZnVuY3Rpb25zIGFyZSAoYXQgbGVhc3Qgc28gZmFyKSBvbmx5IGJlaW5nIHVzZWQgdG8gZmFjaWxpdGF0ZSB1bml0IHRlc3RpbmcgYW55d2F5LFxuICAgICAqIHRoaXMgZnVuY3Rpb24gaXMgYmFzaWNhbGx5IGp1c3QgY2hlY2tpbmcgdG8gc2VlIGlmIHRoZSBuYW1lcyBhcmUgXCJjbG9zZSBlbm91Z2hcIiBieSBjaGVja2luZyB0byBzZWUgaWYgb25lIHN0cmluZyBpbmNsdWRlcyB0aGUgb3RoZXIuXG4gICAgICpcbiAgICAgKiBGb3IgZXhhbXBsZSwgdGhlIFJIIHBhZ2UgZm9yICRTUFkgY2FsbHMgaXQgXCJTUERSIFMmUCA1MDAgRVRGXCIsIHdoaWxlIFlGIGNhbGxzIGl0IFwiU1BEUiBTJlAgNTAwIEVURiBUcnVzdFwiLlxuICAgICAqIEV2ZW4gdGhvdWdoIHRoZSBzdHJpbmdzIGFyZW4ndCBpZGVudGljYWwsIHdlIHN0aWxsIHdhbnQgdGhlc2UgdG8gYmUgY29uc2lkZXJlZCBlcXVhbCwgc28gd2UgY2FuIGp1c3QgY2hlY2sgaWYgb25lIGNvbnRhaW5zIHRoZSBvdGhlciwgd2hpY2ggaXQgZG9lcy5cbiAgICAgKlxuICAgICAqIFRPRE8gLSB0aGVyZSB3aWxsIHByb2JhYmx5IGJlIHNvbWUgZWRnZSBjYXNlcyBmb3Igd2hpY2ggdGhpcyBzb2x1dGlvbiB3aWxsIG5vdCB3b3JrLCBzbyB0aGlzIHdpbGwgbGlrZWx5IGhhdmUgdG8gYmUgcmV2aXNlZCBpbiB0aGUgZnV0dXJlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRoYXROYW1lIC0gbmFtZSBvZiB0aGUgY29tcGFueSB0byB3aGljaCB3ZSdyZSBjb21wYXJpbmcgdGhpcyBjb21wYW55XG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgY29tcGFuaWVzJyBuYW1lcyBhcmUgdGhlIHNhbWUgKG9yIGF0IGxlYXN0LCBjbG9zZSBlbm91Z2gpXG4gICAgICovXG4gICAgbmFtZUVxdWFscyh0aGF0TmFtZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIGxldCB0aGlzTmFtZSA9IHRoaXMubmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICB0aGF0TmFtZSA9IHRoYXROYW1lLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXNOYW1lLmluY2x1ZGVzKHRoYXROYW1lKSB8fCB0aGF0TmFtZS5pbmNsdWRlcyh0aGlzTmFtZSk7XG4gICAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIFRpY2tlclR5cGUge1xuICAgIFZBTElEX1RZUEVTID0gW1wic3RvY2tcIiwgXCJldGZcIiwgXCJtdXR1YWxmdW5kXCIsIFwiY3J5cHRvXCIsIFwiZnV0dXJlXCIsIFwiYm9uZFwiXTtcbiAgICB2YWx1ZTogc3RyaW5nO1xuXG4gICAgY29uc3RydWN0b3IodGlja2VyVHlwZTogc3RyaW5nKSB7XG4gICAgICAgIHRpY2tlclR5cGUgPSB0aWNrZXJUeXBlLnRvTG93ZXJDYXNlKCkudHJpbSgpO1xuICAgICAgICBpZiAodGhpcy5pc1ZhbGlkVHlwZSh0aWNrZXJUeXBlKSkge1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRpY2tlclR5cGU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHRpY2tlclR5cGU6IFwiICsgdGlja2VyVHlwZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpc1ZhbGlkVHlwZSh0dDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLlZBTElEX1RZUEVTLmluY2x1ZGVzKHR0KTtcbiAgICB9XG5cbiAgICB0b1N0cmluZygpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTtcbiAgICB9XG5cbiAgICBlcXVhbHModGhhdDogVGlja2VyVHlwZSk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy52YWx1ZSA9PT0gdGhhdC52YWx1ZTtcbiAgICB9XG59XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsImltcG9ydCB7IFJvYmluaG9vZCB9IGZyb20gXCIuLi9zaXRlcy9Sb2Jpbmhvb2RcIjtcbmltcG9ydCB7IFlhaG9vRmluYW5jZSB9IGZyb20gXCIuLi9zaXRlcy9ZYWhvb0ZpbmFuY2VcIjtcbmltcG9ydCB7IFRpY2tlciB9IGZyb20gXCIuLi90aWNrZXJzL1RpY2tlclwiO1xuXG4oZnVuY3Rpb24gKCkge1xuICAgIGNocm9tZS5ydW50aW1lLm9uTWVzc2FnZS5hZGRMaXN0ZW5lcihmdW5jdGlvbiBpY29uQ2xpY2tlZChcbiAgICAgICAgcmVxdWVzdCxcbiAgICAgICAgc2VuZGVyLFxuICAgICAgICBzZW5kUmVzcG9uc2VcbiAgICApIHtcbiAgICAgICAgaWYgKHJlcXVlc3QubWVzc2FnZSA9PT0gXCJjbGlja2VkX2Jyb3dzZXJfYWN0aW9uXCIpIHtcbiAgICAgICAgICAgIGxldCBmcm9tU2l0ZTtcbiAgICAgICAgICAgIGxldCB0b1NpdGU7XG5cbiAgICAgICAgICAgIGlmIChyZXF1ZXN0LnVybC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwicm9iaW5ob29kXCIpKSB7XG4gICAgICAgICAgICAgICAgZnJvbVNpdGUgPSBuZXcgUm9iaW5ob29kKCk7XG4gICAgICAgICAgICAgICAgdG9TaXRlID0gbmV3IFlhaG9vRmluYW5jZSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBmcm9tU2l0ZSA9IG5ldyBZYWhvb0ZpbmFuY2UoKTtcbiAgICAgICAgICAgICAgICB0b1NpdGUgPSBuZXcgUm9iaW5ob29kKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChwYWdlSGFzVGlja2VyKHJlcXVlc3QudXJsKSkge1xuICAgICAgICAgICAgICAgIGxldCB0aWNrZXI6IFRpY2tlciA9IGZyb21TaXRlLmdldFRpY2tlcihyZXF1ZXN0LnVybCwgZG9jdW1lbnQpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRpY2tlci50b1N0cmluZygpKTtcblxuICAgICAgICAgICAgICAgIGNocm9tZS5ydW50aW1lLnNlbmRNZXNzYWdlKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJvcGVuX25ld190YWJcIixcbiAgICAgICAgICAgICAgICAgICAgdGlja2VyU3ltYm9sOiB0aWNrZXIuc3ltYm9sLFxuICAgICAgICAgICAgICAgICAgICB0aWNrZXJOYW1lOiB0aWNrZXIubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgdGlja2VyVHlwZTogdGlja2VyLnRpY2tlclR5cGUgKyBcIlwiLFxuICAgICAgICAgICAgICAgICAgICBpbmRleDogcmVxdWVzdC5pbmRleCxcbiAgICAgICAgICAgICAgICAgICAgZnJvbVNpdGU6IGZyb21TaXRlLmlzKCksXG4gICAgICAgICAgICAgICAgICAgIHRvU2l0ZTogdG9TaXRlLmlzKCksXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNocm9tZS5ydW50aW1lLnNlbmRNZXNzYWdlKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJvcGVuX2hvbWVwYWdlXCIsXG4gICAgICAgICAgICAgICAgICAgIGluZGV4OiByZXF1ZXN0LmluZGV4LFxuICAgICAgICAgICAgICAgICAgICBmcm9tU2l0ZTogZnJvbVNpdGUuaXMoKSxcbiAgICAgICAgICAgICAgICAgICAgdG9TaXRlOiB0b1NpdGUuaXMoKSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgZnVuY3Rpb24gcGFnZUhhc1RpY2tlcih1cmw6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgdXJsLnN0YXJ0c1dpdGgoXCJodHRwczovL3JvYmluaG9vZC5jb20vc3RvY2tzL1wiKSB8fFxuICAgICAgICAgICAgdXJsLnN0YXJ0c1dpdGgoXCJodHRwczovL3JvYmluaG9vZC5jb20vY3J5cHRvL1wiKSB8fFxuICAgICAgICAgICAgdXJsLnN0YXJ0c1dpdGgoXCJodHRwczovL2ZpbmFuY2UueWFob28uY29tL3F1b3RlL1wiKVxuICAgICAgICApO1xuICAgIH1cbn0pKCk7XG4iXSwibmFtZXMiOlsiY3JlYXRlVXJsRm9yVGlja2VyIiwidGlja2VyIiwidGlja2VyVHlwZSIsInZhbHVlIiwidGhpcyIsImJhc2VVcmwiLCJzeW1ib2wiLCJnZXRUaWNrZXIiLCJ1cmwiLCJkb2N1bWVudCIsImdldFRpY2tlckZyb21VcmwiLCJnZXROYW1lIiwiZ2V0VGlja2VyVHlwZSIsInNwbGl0QXJyYXkiLCJzcGxpdCIsImxhc3RJbmRleCIsImxlbmd0aCIsInRyaW0iLCJxdWVyeVNlbGVjdG9yIiwidGV4dENvbnRlbnQiLCJpc0NyeXB0byIsImluY2x1ZGVzIiwiaXNFdGYiLCJuYW1lIiwiaXMiLCJzaXRlIiwiY3J5cHRvQXJnIiwieCIsInMiLCJnZXRIeXBoZW5hdGVkVGlja2VyU3ltYm9sIiwiZ2V0VGlja2VyRnJvbVBhZ2UiLCJnZXRRdW90ZUhlYWRlckluZm9JZCIsIm5hbWVXaXRoVGlja2VyUmVtb3ZlZCIsImdldENvbXBhbnlIZWFkZXIiLCJyZW1vdmVFeHRyYVdoaXRlc3BhY2UiLCJjbGVhbmVkVXBTeW1ib2wiLCJzdHIiLCJyZWdleCIsIlJlZ0V4cCIsImZ1bGwiLCJmb3JFYWNoIiwid29yZCIsInF1b3RlU3VtbWFyeSIsImNvbnZlcnRIeXBoZW5JblRpY2tlclN5bWJvbCIsInJlcGxhY2UiLCJ0b1N0cmluZyIsImVxdWFscyIsInRoYXQiLCJuYW1lRXF1YWxzIiwidGhhdE5hbWUiLCJ0aGlzTmFtZSIsInRvTG93ZXJDYXNlIiwiVkFMSURfVFlQRVMiLCJpc1ZhbGlkVHlwZSIsIkVycm9yIiwidHQiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImQiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJjaHJvbWUiLCJydW50aW1lIiwib25NZXNzYWdlIiwiYWRkTGlzdGVuZXIiLCJyZXF1ZXN0Iiwic2VuZGVyIiwic2VuZFJlc3BvbnNlIiwibWVzc2FnZSIsImZyb21TaXRlIiwidG9TaXRlIiwic3RhcnRzV2l0aCIsImNvbnNvbGUiLCJsb2ciLCJzZW5kTWVzc2FnZSIsInRpY2tlclN5bWJvbCIsInRpY2tlck5hbWUiLCJpbmRleCJdLCJzb3VyY2VSb290IjoiIn0=