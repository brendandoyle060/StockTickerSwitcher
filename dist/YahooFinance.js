(()=>{"use strict";var t,e,r,o,n,i,c={199:(t,e,r)=>{r.d(e,{T:()=>n});var o=r(110),n=function(){function t(t,e){this.EXCEPTION_TICKERS=new Map,this.name=t,this.baseUrl=e}return t.prototype.is=function(){return this.name},t.prototype.createUrlForTicker=function(t){},t.prototype.getTicker=function(t,e){},t.prototype.getTickerType=function(t,e,r){return t.isEtf(r)?new o.C("etf"):t.isCrypto(e)?new o.C("crypto"):new o.C("stock")},t.prototype.getName=function(t){},t.prototype.isCrypto=function(t){},t.prototype.isEtf=function(t){},t.prototype.isNoResultsPage=function(t){},t}()},219:(t,e,r)=>{r.d(e,{v:()=>n});var o=r(700),n=function(){function t(t,e,r){this.symbol=this.convertHyphenToPeriod(t);var n=new o.c;this.name=n.removeExtraWhitespace(e),this.tickerType=r}return t.prototype.convertHyphenToPeriod=function(t){return t.replace("-",".")},t.prototype.convertPeriodToHyphen=function(t){return t.replace(".","-")},t.prototype.toString=function(){return"Ticker - symbol: ".concat(this.symbol,", name: ").concat(this.name,", type: ").concat(this.tickerType)},t.prototype.equals=function(t){return this.symbol===t.symbol&&this.nameEquals(t.name)&&this.tickerType.equals(t.tickerType)},t.prototype.nameEquals=function(t){var e=this.name.toLowerCase();return t=t.toLowerCase(),e.includes(t)||t.includes(e)},t}()},110:(t,e,r)=>{r.d(e,{C:()=>o});var o=function(){function t(t){if(this.VALID_TYPES=["stock","etf","mutualfund","crypto","future","bond"],t=t.toLowerCase().trim(),!this.isValidType(t))throw new Error("Invalid tickerType: "+t);this.value=t}return t.prototype.isValidType=function(t){return this.VALID_TYPES.includes(t)},t.prototype.toString=function(){return this.value},t.prototype.equals=function(t){return this.value===t.value},t}()},700:(t,e,r)=>{r.d(e,{c:()=>o});var o=function(){function t(){}return t.prototype.removeExtraWhitespace=function(t){var e=new RegExp("\\s+"),r=t.split(e),o="";return r.forEach((function(t){o=o+t.trim()+" "})),o.trim()},t}()}},p={};function u(t){var e=p[t];if(void 0!==e)return e.exports;var r=p[t]={exports:{}};return c[t](r,r.exports,u),r.exports}u.d=(t,e)=>{for(var r in e)u.o(e,r)&&!u.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},u.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),e=u(199),r=u(219),o=u(700),t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)},n=function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)},i=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],o=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},function(t){function e(){var e=t.call(this,"YahooFinance","https://finance.yahoo.com")||this;return e.EXCEPTION_TICKERS.set(["GRT6719","crypto"],["GRT","crypto"]),e}n(e,t),e.prototype.createUrlForTicker=function(t){var e=t.convertPeriodToHyphen(t.symbol);return e=this.checkExceptionList(e,t.tickerType.toString(),!1),"crypto"===t.tickerType.value&&(e+="-USD"),"".concat(this.baseUrl,"/quote/").concat(e)},e.prototype.getTicker=function(t,e){var o=this.getTickerFromPage(e,this.isCrypto(e)),n=this.getTickerType(this,e,e);return new r.v(this.checkExceptionList(o,n.toString(),!0),this.getName(e),n)},e.prototype.checkExceptionList=function(t,e,r){var o,n,c=[t,e],p=this.EXCEPTION_TICKERS.entries();try{for(var u=i(p),a=u.next();!a.done;a=u.next()){var s=a.value,y=void 0,f=void 0;if(r?(y=s[0],f=s[1]):(y=s[1],f=s[0]),c[0]===y[0]&&c[1]===y[1]){t=f[0];break}}}catch(t){o={error:t}}finally{try{a&&!a.done&&(n=u.return)&&n.call(u)}finally{if(o)throw o.error}}return t},e.prototype.getQuoteHeaderInfoId=function(){return"#quote-header-info"},e.prototype.getName=function(t){var e=this.getCompanyHeader(t).split(" (")[0];return(new o.c).removeExtraWhitespace(e)},e.prototype.getTickerFromPage=function(t,e){var r=this.getCompanyHeader(t).split(" (")[1];return r=r.split(")")[0],e&&(r=r.split("-")[0]),r},e.prototype.getCompanyHeader=function(t){return t.querySelector(this.getQuoteHeaderInfoId()+" h1").textContent.trim()},e.prototype.isCrypto=function(t){return t.querySelector(this.getQuoteHeaderInfoId()).textContent.includes("CoinMarketCap")},e.prototype.isEtf=function(t){var e=t.querySelector("#quote-summary");return(new o.c).removeExtraWhitespace(e.textContent).includes("Net Assets")},e.prototype.isNoResultsPage=function(t){return!!t.getElementById("lookup-page")}}(e.T)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QSxFQUFTK0UsZUFBZSxjQUNyQyxDQUNKLENBakpBLENBQWtDLEkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yb2Jpbmhvb2R0b3lhaG9vZmluYW5jZS8uL3NyYy9zaXRlcy9TaXRlLnRzIiwid2VicGFjazovL3JvYmluaG9vZHRveWFob29maW5hbmNlLy4vc3JjL3RpY2tlcnMvVGlja2VyLnRzIiwid2VicGFjazovL3JvYmluaG9vZHRveWFob29maW5hbmNlLy4vc3JjL3RpY2tlcnMvVGlja2VyVHlwZS50cyIsIndlYnBhY2s6Ly9yb2Jpbmhvb2R0b3lhaG9vZmluYW5jZS8uL3NyYy91dGlscy9VdGlscy50cyIsIndlYnBhY2s6Ly9yb2Jpbmhvb2R0b3lhaG9vZmluYW5jZS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9yb2Jpbmhvb2R0b3lhaG9vZmluYW5jZS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vcm9iaW5ob29kdG95YWhvb2ZpbmFuY2Uvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9yb2Jpbmhvb2R0b3lhaG9vZmluYW5jZS8uL3NyYy9zaXRlcy9ZYWhvb0ZpbmFuY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVGlja2VyIH0gZnJvbSBcIi4uL3RpY2tlcnMvVGlja2VyXCI7XG5pbXBvcnQgeyBUaWNrZXJUeXBlIH0gZnJvbSBcIi4uL3RpY2tlcnMvVGlja2VyVHlwZVwiO1xuXG4vKipcbiAqIFBhcmVudCBjbGFzcyBmb3Igb2JqZWN0cyBob2xkaW5nIGluZm9ybWF0aW9uXG4gKiBhYm91dCBhIHBhcnRpY3VsYXIgd2Vic2l0ZS5cbiAqL1xuZXhwb3J0IGNsYXNzIFNpdGUge1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBiYXNlVXJsOiBzdHJpbmc7XG4gICAgRVhDRVBUSU9OX1RJQ0tFUlM6IE1hcDxhbnksIGFueT4gPSBuZXcgTWFwKCk7XG5cbiAgICBjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcsIGJhc2VVcmw6IHN0cmluZykge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLmJhc2VVcmwgPSBiYXNlVXJsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBuYW1lIG9mIHRoZSBzaXRlXG4gICAgICovXG4gICAgaXMoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubmFtZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHaXZlbiBhIFRpY2tlciwgY3JlYXRlIHRoZSBhcHByb3ByaWF0ZSB1cmwgZm9yIHRoYXQgVGlja2VyXG4gICAgICogb24gdGhpcyBTaXRlLlxuICAgICAqIEBwYXJhbSB0aWNrZXIgLSB0aGUgVGlja2VyIGZvciB3aGljaCB3ZSdyZSBjcmVhdGluZyBhIHVybFxuICAgICAqL1xuICAgIGNyZWF0ZVVybEZvclRpY2tlcih0aWNrZXI6IFRpY2tlcik6IGFueSB7fVxuXG4gICAgLyoqXG4gICAgICogUHVsbCBhbGwgbmVjZXNzYXJ5IGluZm9ybWF0aW9uIGZyb20gdGhlIGN1cnJlbnQgdXJsXG4gICAgICogYW5kIHBhZ2UgdG8gY3JlYXRlIGEgVGlja2VyIG9iamVjdCB0byBzZW5kIHRvIG90aGVyIFNpdGVzXG4gICAgICogQHBhcmFtIHVybCAtIHVybCBvZiB0aGUgY3VycmVudCBwYWdlXG4gICAgICogQHBhcmFtIGRvY3VtZW50IC0gRE9NIG9mIHRoZSBjdXJyZW50IHBhZ2VcbiAgICAgKi9cbiAgICBnZXRUaWNrZXIodXJsOiBzdHJpbmcsIGRvY3VtZW50OiBEb2N1bWVudCk6IGFueSB7fVxuXG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lIHRoZSB0eXBlIG9mIHRpY2tlciBmb3IgdGhlIGN1cnJlbnQgcGFnZVxuICAgICAqIChzdG9jaywgY3J5cHRvLCBldGMpXG4gICAgICogQHBhcmFtIHNpdGUgLSB0aGUgU2l0ZSB3aGljaCB0aGUgdXNlciBpcyBjdXJyZW50bHkgb25cbiAgICAgKiBAcGFyYW0gY3J5cHRvQXJnIC0gc29tZSBzaXRlcyBtYXkgbmVlZCBhIHNlcGFyYXRlIHdheSB0byBpZGVudGlmeSB3aGV0aGVyIG9yIG5vdCB0aGUgcGFnZSBpcyBhIGNyeXB0byBwYWdlIChzdWNoIGFzIHRoZSB1cmwpLlxuICAgICAqIElmIHRoYXQncyB0aGUgY2FzZSwgdGhhdCBhcmcgZ29lcyBoZXJlLiBPdGhlcndpc2UsIHRoZSBEb2N1bWVudCBwYXJhbSBpcyB1c3VhbGx5IHNlbnQgdHdpY2UuXG4gICAgICogQHBhcmFtIGRvY3VtZW50IC0gdGhlIERPTSBvZiB0aGUgY3VycmVudCBwYWdlLCBhcyBhIERvY3VtZW50IG9iamVjdC5cbiAgICAgKiBAcmV0dXJucyBUaWNrZXJUeXBlIG9mIHRoZSBjdXJyZW50IHBhZ2VcbiAgICAgKi9cbiAgICBnZXRUaWNrZXJUeXBlKHNpdGU6IFNpdGUsIGNyeXB0b0FyZzogYW55LCBkb2N1bWVudDogRG9jdW1lbnQpOiBUaWNrZXJUeXBlIHtcbiAgICAgICAgaWYgKHNpdGUuaXNFdGYoZG9jdW1lbnQpKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFRpY2tlclR5cGUoXCJldGZcIik7XG4gICAgICAgIH0gZWxzZSBpZiAoc2l0ZS5pc0NyeXB0byhjcnlwdG9BcmcpKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFRpY2tlclR5cGUoXCJjcnlwdG9cIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFRpY2tlclR5cGUoXCJzdG9ja1wiKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFJldHVybiB0eXBlIGZvciB0aGUgbWV0aG9kcyBiZWxvdyBpcyBcImFueVwiLCBiZWNhdXNlIHdlIGRvbid0IHdhbnQgdG8gcmV0dXJuIGEgdmFsdWUgaW4gdGhlIHN1cGVyY2xhc3MsIHdoaWNoIHdlIHdvdWxkIGhhdmUgdG8gc2luY2Ugd2UncmUgdXNpbmcgdGhlbSBpbiBnZXRUaWNrZXJUeXBlIGFib3ZlLlxuICAgIC8vIEltcGxlbWVudGF0aW9ucyBvZiB0aGVzZSBtZXRob2RzIGluIHN1YmNsYXNzZXMgc2hvdWxkIHJldHVybiBhIGJvb2xlYW4uXG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGNvbXBhbnkncyBmdWxsIG5hbWVcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnQgLSBET00gY29udGVudCBvZiB0aGUgY3VycmVudCBwYWdlXG4gICAgICovXG4gICAgZ2V0TmFtZShkb2N1bWVudDogRG9jdW1lbnQpOiBhbnkge31cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgY3VycmVudCBwYWdlIGlzIGZvciBhIGNyeXB0b2N1cnJlbmN5LFxuICAgICAqIGZhbHNlIG90aGVyd2lzZS5cbiAgICAgKiBAcGFyYW0geCAtIGFyZyBvZiBhbnkgdHlwZSB3aGljaCB3aWxsIGhlbHAgYSBwYXJ0aXVsYXIgc2l0ZVxuICAgICAqIGlkZW50aWZ5IGEgY3J5cHRvY3VycmVuY3kgcGFnZS5cbiAgICAgKi9cbiAgICBpc0NyeXB0byh4OiBhbnkpOiBhbnkge31cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgY3VycmVudCBwYWdlIGlzIGZvciBhbiBFVEYsXG4gICAgICogZmFsc2Ugb3RoZXJ3aXNlLlxuICAgICAqIEBwYXJhbSBkb2N1bWVudCAtIERPTSBvZiB0aGUgY3VycmVudCBwYWdlLlxuICAgICAqL1xuICAgIGlzRXRmKGRvY3VtZW50OiBEb2N1bWVudCk6IGFueSB7fVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBjdXJyZW50IHBhZ2UgaXMgYSBObyBSZXN1bHRzIHBhZ2UsXG4gICAgICogZmFsc2Ugb3RoZXJ3aXNlLlxuICAgICAqIEBwYXJhbSBkb2N1bWVudCAtIERPTSBvZiB0aGUgY3VycmVudCBwYWdlLlxuICAgICAqL1xuICAgIGlzTm9SZXN1bHRzUGFnZShkb2N1bWVudDogRG9jdW1lbnQpOiBhbnkge31cbn1cbiIsImltcG9ydCB7IFRpY2tlclR5cGUgfSBmcm9tIFwiLi9UaWNrZXJUeXBlXCI7XG5pbXBvcnQgeyBVdGlscyB9IGZyb20gXCIuLi91dGlscy9VdGlsc1wiO1xuXG5leHBvcnQgY2xhc3MgVGlja2VyIHtcbiAgICBzeW1ib2w6IHN0cmluZztcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgdGlja2VyVHlwZTogVGlja2VyVHlwZTtcblxuICAgIGNvbnN0cnVjdG9yKHN5bWJvbDogc3RyaW5nLCBuYW1lOiBzdHJpbmcsIHRpY2tlclR5cGU6IFRpY2tlclR5cGUpIHtcbiAgICAgICAgdGhpcy5zeW1ib2wgPSB0aGlzLmNvbnZlcnRIeXBoZW5Ub1BlcmlvZChzeW1ib2wpO1xuICAgICAgICBsZXQgdXRpbHMgPSBuZXcgVXRpbHMoKTtcbiAgICAgICAgdGhpcy5uYW1lID0gdXRpbHMucmVtb3ZlRXh0cmFXaGl0ZXNwYWNlKG5hbWUpO1xuICAgICAgICB0aGlzLnRpY2tlclR5cGUgPSB0aWNrZXJUeXBlO1xuICAgIH1cblxuICAgIGNvbnZlcnRIeXBoZW5Ub1BlcmlvZChzeW1ib2w6IHN0cmluZykge1xuICAgICAgICByZXR1cm4gc3ltYm9sLnJlcGxhY2UoXCItXCIsIFwiLlwiKTtcbiAgICB9XG5cbiAgICBjb252ZXJ0UGVyaW9kVG9IeXBoZW4oc3ltYm9sOiBzdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuIHN5bWJvbC5yZXBsYWNlKFwiLlwiLCBcIi1cIik7XG4gICAgfVxuXG4gICAgdG9TdHJpbmcoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGBUaWNrZXIgLSBzeW1ib2w6ICR7dGhpcy5zeW1ib2x9LCBuYW1lOiAke3RoaXMubmFtZX0sIHR5cGU6ICR7dGhpcy50aWNrZXJUeXBlfWA7XG4gICAgfVxuXG4gICAgZXF1YWxzKHRoYXQ6IFRpY2tlcik6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgdGhpcy5zeW1ib2wgPT09IHRoYXQuc3ltYm9sICYmXG4gICAgICAgICAgICB0aGlzLm5hbWVFcXVhbHModGhhdC5uYW1lKSAmJlxuICAgICAgICAgICAgdGhpcy50aWNrZXJUeXBlLmVxdWFscyh0aGF0LnRpY2tlclR5cGUpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgdG8gc2VlIGlmIGEgZ2l2ZW4gY29tcGFueSdzIG5hbWUgbWF0Y2hlcyB0aGlzIGNvbXBhbnkncyBuYW1lLlxuICAgICAqIFNpbmNlIHRoZXNlIHZhbHVlcyBhcmUgYmVpbmcgcHVsbGVkIGZyb20gZWFjaCBzaXRlIHdlJ3JlIHZpc2l0aW5nIChhbmQgd2UgY2FuJ3QgY29udHJvbCB3aGF0IHRoZXkgY2FsbCB0aGVtKSxcbiAgICAgKiBhbmQgc2luY2UgdGhlc2UgZXF1YWxpdHkgZnVuY3Rpb25zIGFyZSAoYXQgbGVhc3Qgc28gZmFyKSBvbmx5IGJlaW5nIHVzZWQgdG8gZmFjaWxpdGF0ZSB1bml0IHRlc3RpbmcgYW55d2F5LFxuICAgICAqIHRoaXMgZnVuY3Rpb24gaXMgYmFzaWNhbGx5IGp1c3QgY2hlY2tpbmcgdG8gc2VlIGlmIHRoZSBuYW1lcyBhcmUgXCJjbG9zZSBlbm91Z2hcIiBieSBjaGVja2luZyB0byBzZWUgaWYgb25lIHN0cmluZyBpbmNsdWRlcyB0aGUgb3RoZXIuXG4gICAgICpcbiAgICAgKiBGb3IgZXhhbXBsZSwgdGhlIFJIIHBhZ2UgZm9yICRTUFkgY2FsbHMgaXQgXCJTUERSIFMmUCA1MDAgRVRGXCIsIHdoaWxlIFlGIGNhbGxzIGl0IFwiU1BEUiBTJlAgNTAwIEVURiBUcnVzdFwiLlxuICAgICAqIEV2ZW4gdGhvdWdoIHRoZSBzdHJpbmdzIGFyZW4ndCBpZGVudGljYWwsIHdlIHN0aWxsIHdhbnQgdGhlc2UgdG8gYmUgY29uc2lkZXJlZCBlcXVhbCwgc28gd2UgY2FuIGp1c3QgY2hlY2sgaWYgb25lIGNvbnRhaW5zIHRoZSBvdGhlciwgd2hpY2ggaXQgZG9lcy5cbiAgICAgKlxuICAgICAqIFRPRE8gLSB0aGVyZSB3aWxsIHByb2JhYmx5IGJlIHNvbWUgZWRnZSBjYXNlcyBmb3Igd2hpY2ggdGhpcyBzb2x1dGlvbiB3aWxsIG5vdCB3b3JrLCBzbyB0aGlzIHdpbGwgbGlrZWx5IGhhdmUgdG8gYmUgcmV2aXNlZCBpbiB0aGUgZnV0dXJlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRoYXROYW1lIC0gbmFtZSBvZiB0aGUgY29tcGFueSB0byB3aGljaCB3ZSdyZSBjb21wYXJpbmcgdGhpcyBjb21wYW55XG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgY29tcGFuaWVzJyBuYW1lcyBhcmUgdGhlIHNhbWUgKG9yIGF0IGxlYXN0LCBjbG9zZSBlbm91Z2gpXG4gICAgICovXG4gICAgbmFtZUVxdWFscyh0aGF0TmFtZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIGxldCB0aGlzTmFtZSA9IHRoaXMubmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICB0aGF0TmFtZSA9IHRoYXROYW1lLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXNOYW1lLmluY2x1ZGVzKHRoYXROYW1lKSB8fCB0aGF0TmFtZS5pbmNsdWRlcyh0aGlzTmFtZSk7XG4gICAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIFRpY2tlclR5cGUge1xuICAgIFZBTElEX1RZUEVTID0gW1wic3RvY2tcIiwgXCJldGZcIiwgXCJtdXR1YWxmdW5kXCIsIFwiY3J5cHRvXCIsIFwiZnV0dXJlXCIsIFwiYm9uZFwiXTtcbiAgICB2YWx1ZTogc3RyaW5nO1xuXG4gICAgY29uc3RydWN0b3IodGlja2VyVHlwZTogc3RyaW5nKSB7XG4gICAgICAgIHRpY2tlclR5cGUgPSB0aWNrZXJUeXBlLnRvTG93ZXJDYXNlKCkudHJpbSgpO1xuICAgICAgICBpZiAodGhpcy5pc1ZhbGlkVHlwZSh0aWNrZXJUeXBlKSkge1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRpY2tlclR5cGU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHRpY2tlclR5cGU6IFwiICsgdGlja2VyVHlwZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gdHQgLSBUaWNrZXJUeXBlIGFzIGEgc3RyaW5nXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gc3RyaW5nIGlzIHdpdGhpblxuICAgICAqIHRoZSBWQUxJRF9UWVBFUyBsaXN0LCBmYWxzZSBvdGhlcndpc2VcbiAgICAgKi9cbiAgICBpc1ZhbGlkVHlwZSh0dDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLlZBTElEX1RZUEVTLmluY2x1ZGVzKHR0KTtcbiAgICB9XG5cbiAgICB0b1N0cmluZygpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTtcbiAgICB9XG5cbiAgICBlcXVhbHModGhhdDogVGlja2VyVHlwZSk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy52YWx1ZSA9PT0gdGhhdC52YWx1ZTtcbiAgICB9XG59XG4iLCJleHBvcnQgY2xhc3MgVXRpbHMge1xuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgbGFyZ2UgY2h1bmtzIG9mIHdoaXRlc3BhY2UgZnJvbSBhIGdpdmVuIHN0cmluZyxcbiAgICAgKiByZXBsYWNpbmcgZWFjaCB3aXRoIGp1c3QgYSBzaW5nbGUgc3BhY2UuXG4gICAgICogQHBhcmFtIHN0ciAtIHRleHQgd2hpY2ggY29udGFpbnMgZXhjZXNzIHdoaXRlc3BhY2VcbiAgICAgKiBAcmV0dXJucyBzdHJpbmcgd2l0aCBleGNlc3Mgd2hpdGVzcGFjZSByZW1vdmVkXG4gICAgICovXG4gICAgcmVtb3ZlRXh0cmFXaGl0ZXNwYWNlKHN0cjogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IHJlZ2V4ID0gbmV3IFJlZ0V4cChcIlxcXFxzK1wiKTtcbiAgICAgICAgbGV0IHNwbGl0ID0gc3RyLnNwbGl0KHJlZ2V4KTtcbiAgICAgICAgbGV0IGZ1bGwgPSBcIlwiO1xuICAgICAgICBzcGxpdC5mb3JFYWNoKGZ1bmN0aW9uICh3b3JkKSB7XG4gICAgICAgICAgICBmdWxsID0gZnVsbCArIHdvcmQudHJpbSgpICsgXCIgXCI7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBHZXQgcmlkIG9mIHRoZSBvbmUgZXh0cmEgc3BhY2UgYXQgdGhlIGVuZCBiZWZvcmUgd2UgcmV0dXJuXG4gICAgICAgIHJldHVybiBmdWxsLnRyaW0oKTtcbiAgICB9XG59XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsImltcG9ydCB7IFNpdGUgfSBmcm9tIFwiLi9TaXRlXCI7XG5pbXBvcnQgeyBUaWNrZXJUeXBlIH0gZnJvbSBcIi4uL3RpY2tlcnMvVGlja2VyVHlwZVwiO1xuaW1wb3J0IHsgVGlja2VyIH0gZnJvbSBcIi4uL3RpY2tlcnMvVGlja2VyXCI7XG5pbXBvcnQgeyBVdGlscyB9IGZyb20gXCIuLi91dGlscy9VdGlsc1wiO1xuXG5leHBvcnQgY2xhc3MgWWFob29GaW5hbmNlIGV4dGVuZHMgU2l0ZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKFwiWWFob29GaW5hbmNlXCIsIGBodHRwczovL2ZpbmFuY2UueWFob28uY29tYCk7XG5cbiAgICAgICAgdGhpcy5FWENFUFRJT05fVElDS0VSUy5zZXQoW1wiR1JUNjcxOVwiLCBcImNyeXB0b1wiXSwgW1wiR1JUXCIsIFwiY3J5cHRvXCJdKTtcbiAgICB9XG5cbiAgICBjcmVhdGVVcmxGb3JUaWNrZXIodGlja2VyOiBUaWNrZXIpOiBzdHJpbmcge1xuICAgICAgICBsZXQgczogc3RyaW5nID0gdGlja2VyLmNvbnZlcnRQZXJpb2RUb0h5cGhlbih0aWNrZXIuc3ltYm9sKTtcblxuICAgICAgICBzID0gdGhpcy5jaGVja0V4Y2VwdGlvbkxpc3QocywgdGlja2VyLnRpY2tlclR5cGUudG9TdHJpbmcoKSwgZmFsc2UpO1xuXG4gICAgICAgIC8vIElmIHRoZSBwYWdlIHRoYXQgd2UncmUgb24gaXMgZm9yIGEgc3RvY2sgb3IgRVRGLCB0aGVuIHdlIGNhbiBqdXN0IGxlYXZlIHRoZSB0aWNrZXIgYXMtaXMuXG4gICAgICAgIC8vIElmIHRoZSBwYWdlIHRoYXQgd2UncmUgb24gaXMgZm9yIGEgY3J5cHRvY3VycmVuY3ksIHRoZW4gd2UgbmVlZFxuICAgICAgICAvLyB0byBhZGp1c3QgdGhlIHRpY2tlciB0byBhZGQgdGhlIFwicXVvdGUgY3VycmVuY3lcIiAtLVxuICAgICAgICAvLyB0aGUgY3VycmVuY3kgZm9yIHdoaWNoIHdlJ3JlIGRpc3BsYXlpbmcgdGhlIGV4Y2hhbmdlIHJhdGUgdG8gdGhlIGNyeXB0b2N1cnJlbmN5LlxuICAgICAgICAvLyBCeSBkZWZhdWx0LCB3ZSdsbCB1c2UgdGhlIFVTIERvbGxhciAoXCJVU0RcIikuXG4gICAgICAgIC8vIFRPRE86IEFsbG93IHVzZXIgdG8gc2VsZWN0IHRoZWlyIHByZWZlcnJlZCBxdW90ZSBjdXJyZW5jeSBpbiBPcHRpb25zIG1lbnUuXG4gICAgICAgIGlmICh0aWNrZXIudGlja2VyVHlwZS52YWx1ZSA9PT0gXCJjcnlwdG9cIikge1xuICAgICAgICAgICAgcyA9IHMgKyBgLVVTRGA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGAke3RoaXMuYmFzZVVybH0vcXVvdGUvJHtzfWA7XG4gICAgfVxuXG4gICAgZ2V0VGlja2VyKHVybDogc3RyaW5nLCBkb2N1bWVudDogRG9jdW1lbnQpOiBUaWNrZXIge1xuICAgICAgICBsZXQgdGlja2VyU3RyaW5nOiBzdHJpbmcgPSB0aGlzLmdldFRpY2tlckZyb21QYWdlKFxuICAgICAgICAgICAgZG9jdW1lbnQsXG4gICAgICAgICAgICB0aGlzLmlzQ3J5cHRvKGRvY3VtZW50KVxuICAgICAgICApO1xuICAgICAgICBsZXQgdGlja2VyVHlwZTogVGlja2VyVHlwZSA9IHRoaXMuZ2V0VGlja2VyVHlwZShcbiAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICBkb2N1bWVudCxcbiAgICAgICAgICAgIGRvY3VtZW50XG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIG5ldyBUaWNrZXIoXG4gICAgICAgICAgICB0aGlzLmNoZWNrRXhjZXB0aW9uTGlzdCh0aWNrZXJTdHJpbmcsIHRpY2tlclR5cGUudG9TdHJpbmcoKSwgdHJ1ZSksXG4gICAgICAgICAgICB0aGlzLmdldE5hbWUoZG9jdW1lbnQpLFxuICAgICAgICAgICAgdGlja2VyVHlwZVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZXJlIGFyZSBhIGZldyBvdXRsaWVyIHNlY3VyaXRpZXMgd2hpY2ggZG8gbm90IGFiaWRlIGJ5IHRoZSB1cmwgY3JlYXRpb25cbiAgICAgKiBydWxlcyB3aGljaCBhcmUgbm9ybWFsbHkgdXNlZCBvbiBjZXJ0YWluIHNpdGVzLiBUbyBoYW5kbGUgdGhlc2UgY2FzZXMsIHdlIG5lZWQgdG9cbiAgICAgKiBjaGVjayB0byBzZWUgaWYgb3VyIHRpY2tlciBmYWxscyBpbnRvIHRoaXMgc21hbGwgc2V0IG9mIGV4Y2VwdGlvbnMsXG4gICAgICogYW5kIGlmIHNvLCB0byBjb252ZXJ0IGl0IHRvIHRoZSBjb3JyZWN0IHRpY2tlci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0aWNrZXJTdHIgLSB0aGUgdGlja2VyIHdoaWNoIHdlJ3JlIGNoZWNraW5nIHRvIHNlZSBpZiBpdCdzIG9uIHRoZSBleGNlcHRpb24gbGlzdFxuICAgICAqIEBwYXJhbSB0dFN0ciAtIHRoZSB0aWNrZXIgdHlwZSBvZiB0aGUgZ2l2ZW4gdGlja2VyXG4gICAgICogQHBhcmFtIGlzT3V0Z29pbmcgLSB0cnVlIGlmIHdlJ3JlIGNvbnZlcnRpbmcgdGhlIHRpY2tlciB0b1xuICAgICAqIHVzZSBpdCBmb3IgYSBkaWZmZXJlbnQgc2l0ZSwgZmFsc2UgaWYgdGhpcyBpcyBhbiBpbmNvbWluZyB0aWNrZXJcbiAgICAgKiB3aGljaCB3ZSdyZSBjb252ZXJ0aW5nIGZvciB1c2Ugb24gKnRoaXMqIHNpdGUuXG4gICAgICogQHJldHVybnMgdGhlIGNvcnJlY3QgdGlja2VyIHN0cmluZywgd2hldGhlciBpdCBuZWVkZWQgdG8gYmUgYWRqdXN0ZWQgb3Igbm90LlxuICAgICAqL1xuICAgIGNoZWNrRXhjZXB0aW9uTGlzdChcbiAgICAgICAgdGlja2VyU3RyOiBzdHJpbmcsXG4gICAgICAgIHR0U3RyOiBzdHJpbmcsXG4gICAgICAgIGlzT3V0Z29pbmc6IGJvb2xlYW5cbiAgICApOiBzdHJpbmcge1xuICAgICAgICBsZXQgYXJnQXJyYXkgPSBbdGlja2VyU3RyLCB0dFN0cl07XG4gICAgICAgIGxldCBleGNlcHRpb25JdGVyYXRvciA9IHRoaXMuRVhDRVBUSU9OX1RJQ0tFUlMuZW50cmllcygpO1xuICAgICAgICBmb3IgKGxldCBwYWlyIG9mIGV4Y2VwdGlvbkl0ZXJhdG9yKSB7XG4gICAgICAgICAgICBsZXQga2V5QXJyYXk7XG4gICAgICAgICAgICBsZXQgdmFsQXJyYXk7XG4gICAgICAgICAgICBpZiAoaXNPdXRnb2luZykge1xuICAgICAgICAgICAgICAgIGtleUFycmF5ID0gcGFpclswXTtcbiAgICAgICAgICAgICAgICB2YWxBcnJheSA9IHBhaXJbMV07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGtleUFycmF5ID0gcGFpclsxXTtcbiAgICAgICAgICAgICAgICB2YWxBcnJheSA9IHBhaXJbMF07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChhcmdBcnJheVswXSA9PT0ga2V5QXJyYXlbMF0gJiYgYXJnQXJyYXlbMV0gPT09IGtleUFycmF5WzFdKSB7XG4gICAgICAgICAgICAgICAgdGlja2VyU3RyID0gdmFsQXJyYXlbMF07XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGlja2VyU3RyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIGlkIGZvciB0aGUgcXVvdGUgaGVhZGVyIGVsZW1lbnRcbiAgICAgKi9cbiAgICBnZXRRdW90ZUhlYWRlckluZm9JZCgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gXCIjcXVvdGUtaGVhZGVyLWluZm9cIjtcbiAgICB9XG5cbiAgICBnZXROYW1lKGRvY3VtZW50OiBEb2N1bWVudCk6IHN0cmluZyB7XG4gICAgICAgIGxldCBuYW1lID0gdGhpcy5nZXRDb21wYW55SGVhZGVyKGRvY3VtZW50KTtcbiAgICAgICAgbGV0IG5hbWVXaXRoVGlja2VyUmVtb3ZlZCA9IG5hbWUuc3BsaXQoXCIgKFwiKVswXTtcbiAgICAgICAgbGV0IHV0aWxzID0gbmV3IFV0aWxzKCk7XG4gICAgICAgIHJldHVybiB1dGlscy5yZW1vdmVFeHRyYVdoaXRlc3BhY2UobmFtZVdpdGhUaWNrZXJSZW1vdmVkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGaW5kIHRoZSB0aWNrZXIgc3ltYm9sIGluIHRoZSBwYWdlLCBhbmQgc2VwYXJhdGUgaXQgZnJvbSBhbnkgdW5uZWNlc3NhcnkgdGV4dFxuICAgICAqIHdoaWNoIHN1cnJvdW5kcyBpdC5cbiAgICAgKiBAcGFyYW0gZG9jdW1lbnQgLSBET00gb2YgdGhlIGN1cnJlbnQgcGFnZVxuICAgICAqIEBwYXJhbSBpc0NyeXB0byAtIHRydWUgaWYgdGhlIGN1cnJlbnQgcGFnZSBpcyBmb3IgYSBjcnlwdG9jdXJyZW5jeSxcbiAgICAgKiBmYWxzZSBvdGhlcndpc2VcbiAgICAgKiBAcmV0dXJucyB0aWNrZXIgc3ltYm9sXG4gICAgICovXG4gICAgZ2V0VGlja2VyRnJvbVBhZ2UoZG9jdW1lbnQ6IERvY3VtZW50LCBpc0NyeXB0bzogYm9vbGVhbik6IHN0cmluZyB7XG4gICAgICAgIGxldCBuYW1lID0gdGhpcy5nZXRDb21wYW55SGVhZGVyKGRvY3VtZW50KTtcbiAgICAgICAgbGV0IGNsZWFuZWRVcFN5bWJvbCA9IG5hbWUuc3BsaXQoXCIgKFwiKVsxXTtcbiAgICAgICAgY2xlYW5lZFVwU3ltYm9sID0gY2xlYW5lZFVwU3ltYm9sLnNwbGl0KFwiKVwiKVswXTtcbiAgICAgICAgaWYgKGlzQ3J5cHRvKSB7XG4gICAgICAgICAgICBjbGVhbmVkVXBTeW1ib2wgPSBjbGVhbmVkVXBTeW1ib2wuc3BsaXQoXCItXCIpWzBdO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNsZWFuZWRVcFN5bWJvbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnQgLSBET00gb2YgdGhlIGN1cnJlbnQgcGFnZVxuICAgICAqIEByZXR1cm5zIHRleHQgY29udGVudCBvZiB0aGUgY29tcGFueSBoZWFkZXIgZWxlbWVudFxuICAgICAqL1xuICAgIGdldENvbXBhbnlIZWFkZXIoZG9jdW1lbnQ6IERvY3VtZW50KTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50XG4gICAgICAgICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLmdldFF1b3RlSGVhZGVySW5mb0lkKCkgKyBcIiBoMVwiKVxuICAgICAgICAgICAgLnRleHRDb250ZW50LnRyaW0oKTtcbiAgICB9XG5cbiAgICBpc0NyeXB0byhkb2N1bWVudDogRG9jdW1lbnQpOiBib29sZWFuIHtcbiAgICAgICAgbGV0IHF1b3RlSGVhZGVySW5mbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICAgICB0aGlzLmdldFF1b3RlSGVhZGVySW5mb0lkKClcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIHF1b3RlSGVhZGVySW5mby50ZXh0Q29udGVudC5pbmNsdWRlcyhcIkNvaW5NYXJrZXRDYXBcIik7XG4gICAgfVxuXG4gICAgaXNFdGYoZG9jdW1lbnQ6IERvY3VtZW50KTogYm9vbGVhbiB7XG4gICAgICAgIGxldCBxdW90ZVN1bW1hcnkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3F1b3RlLXN1bW1hcnlcIik7XG4gICAgICAgIGxldCB1dGlscyA9IG5ldyBVdGlscygpO1xuXG4gICAgICAgIGxldCB0ZXh0Q2xlYW5lZFVwID0gdXRpbHMucmVtb3ZlRXh0cmFXaGl0ZXNwYWNlKFxuICAgICAgICAgICAgcXVvdGVTdW1tYXJ5LnRleHRDb250ZW50XG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiB0ZXh0Q2xlYW5lZFVwLmluY2x1ZGVzKFwiTmV0IEFzc2V0c1wiKTtcbiAgICB9XG5cbiAgICBpc05vUmVzdWx0c1BhZ2UoZG9jdW1lbnQ6IERvY3VtZW50KTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiAhIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibG9va3VwLXBhZ2VcIik7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIm5hbWUiLCJiYXNlVXJsIiwiRVhDRVBUSU9OX1RJQ0tFUlMiLCJNYXAiLCJ0aGlzIiwiaXMiLCJjcmVhdGVVcmxGb3JUaWNrZXIiLCJ0aWNrZXIiLCJnZXRUaWNrZXIiLCJ1cmwiLCJkb2N1bWVudCIsImdldFRpY2tlclR5cGUiLCJzaXRlIiwiY3J5cHRvQXJnIiwiaXNFdGYiLCJpc0NyeXB0byIsImdldE5hbWUiLCJ4IiwiaXNOb1Jlc3VsdHNQYWdlIiwic3ltYm9sIiwidGlja2VyVHlwZSIsImNvbnZlcnRIeXBoZW5Ub1BlcmlvZCIsInV0aWxzIiwicmVtb3ZlRXh0cmFXaGl0ZXNwYWNlIiwicmVwbGFjZSIsImNvbnZlcnRQZXJpb2RUb0h5cGhlbiIsInRvU3RyaW5nIiwiZXF1YWxzIiwidGhhdCIsIm5hbWVFcXVhbHMiLCJ0aGF0TmFtZSIsInRoaXNOYW1lIiwidG9Mb3dlckNhc2UiLCJpbmNsdWRlcyIsIlZBTElEX1RZUEVTIiwidHJpbSIsImlzVmFsaWRUeXBlIiwiRXJyb3IiLCJ2YWx1ZSIsInR0Iiwic3RyIiwicmVnZXgiLCJSZWdFeHAiLCJzcGxpdCIsImZ1bGwiLCJmb3JFYWNoIiwid29yZCIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiZCIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsInNldCIsInMiLCJjaGVja0V4Y2VwdGlvbkxpc3QiLCJ0aWNrZXJTdHJpbmciLCJnZXRUaWNrZXJGcm9tUGFnZSIsInRpY2tlclN0ciIsInR0U3RyIiwiaXNPdXRnb2luZyIsImFyZ0FycmF5IiwiZXhjZXB0aW9uSXRlcmF0b3IiLCJlbnRyaWVzIiwicGFpciIsImtleUFycmF5IiwidmFsQXJyYXkiLCJnZXRRdW90ZUhlYWRlckluZm9JZCIsIm5hbWVXaXRoVGlja2VyUmVtb3ZlZCIsImdldENvbXBhbnlIZWFkZXIiLCJjbGVhbmVkVXBTeW1ib2wiLCJxdWVyeVNlbGVjdG9yIiwidGV4dENvbnRlbnQiLCJxdW90ZVN1bW1hcnkiLCJnZXRFbGVtZW50QnlJZCJdLCJzb3VyY2VSb290IjoiIn0=