(()=>{"use strict";var t,e,r,o,n,i,c={199:(t,e,r)=>{r.d(e,{T:()=>n});var o=r(110),n=function(){function t(t,e){this.EXCEPTION_TICKERS=new Map,this.name=t,this.baseUrl=e}return t.prototype.is=function(){return this.name},t.prototype.createUrlForTicker=function(t){},t.prototype.getTicker=function(t,e){},t.prototype.getTickerType=function(t,e,r){return t.isEtf(r)?new o.C("etf"):t.isCrypto(e)?new o.C("crypto"):new o.C("stock")},t.prototype.getName=function(t){},t.prototype.isCrypto=function(t){},t.prototype.isEtf=function(t){},t.prototype.isNoResultsPage=function(t){},t.prototype.isTickerUrl=function(t){},t}()},219:(t,e,r)=>{r.d(e,{v:()=>n});var o=r(700),n=function(){function t(t,e,r){this.symbol=this.convertHyphenToPeriod(t);var n=new o.c;this.name=n.removeExtraWhitespace(e),this.tickerType=r}return t.prototype.convertHyphenToPeriod=function(t){return t.replace("-",".")},t.prototype.convertPeriodToHyphen=function(t){return t.replace(".","-")},t.prototype.toString=function(){return"Ticker - symbol: ".concat(this.symbol,", name: ").concat(this.name,", type: ").concat(this.tickerType)},t.prototype.equals=function(t){return this.symbol===t.symbol&&this.nameEquals(t.name)&&this.tickerType.equals(t.tickerType)},t.prototype.nameEquals=function(t){var e=this.name.toLowerCase();return t=t.toLowerCase(),e.includes(t)||t.includes(e)},t}()},110:(t,e,r)=>{r.d(e,{C:()=>o});var o=function(){function t(t){if(this.VALID_TYPES=["stock","etf","mutualfund","crypto","future","bond"],t=t.toLowerCase().trim(),!this.isValidType(t))throw new Error("Invalid tickerType: "+t);this.value=t}return t.prototype.isValidType=function(t){return this.VALID_TYPES.includes(t)},t.prototype.toString=function(){return this.value},t.prototype.equals=function(t){return this.value===t.value},t}()},700:(t,e,r)=>{r.d(e,{c:()=>o});var o=function(){function t(){}return t.prototype.removeExtraWhitespace=function(t){var e=new RegExp("\\s+"),r=t.split(e),o="";return r.forEach((function(t){o=o+t.trim()+" "})),o.trim()},t}()}},p={};function u(t){var e=p[t];if(void 0!==e)return e.exports;var r=p[t]={exports:{}};return c[t](r,r.exports,u),r.exports}u.d=(t,e)=>{for(var r in e)u.o(e,r)&&!u.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},u.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),e=u(199),r=u(219),o=u(700),t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)},n=function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)},i=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],o=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},function(t){function e(){var e=t.call(this,"YahooFinance","https://finance.yahoo.com")||this;return e.EXCEPTION_TICKERS.set(["GRT6719","crypto"],["GRT","crypto"]),e}n(e,t),e.prototype.createUrlForTicker=function(t){var e=t.convertPeriodToHyphen(t.symbol);return e=this.checkExceptionList(e,t.tickerType.toString(),!1),"crypto"===t.tickerType.value&&(e+="-USD"),"".concat(this.baseUrl,"/quote/").concat(e)},e.prototype.getTicker=function(t,e){var o=this.getTickerFromPage(e,this.isCrypto(e)),n=this.getTickerType(this,e,e);return new r.v(this.checkExceptionList(o,n.toString(),!0),this.getName(e),n)},e.prototype.checkExceptionList=function(t,e,r){var o,n,c=[t,e],p=this.EXCEPTION_TICKERS.entries();try{for(var u=i(p),a=u.next();!a.done;a=u.next()){var s=a.value,y=void 0,f=void 0;if(r?(y=s[0],f=s[1]):(y=s[1],f=s[0]),c[0]===y[0]&&c[1]===y[1]){t=f[0];break}}}catch(t){o={error:t}}finally{try{a&&!a.done&&(n=u.return)&&n.call(u)}finally{if(o)throw o.error}}return t},e.prototype.getQuoteHeaderInfoId=function(){return"#quote-header-info"},e.prototype.getName=function(t){var e=this.getCompanyHeader(t).split(" (")[0];return(new o.c).removeExtraWhitespace(e)},e.prototype.getTickerFromPage=function(t,e){var r=this.getCompanyHeader(t).split(" (")[1];return r=r.split(")")[0],e&&(r=r.split("-")[0]),r},e.prototype.getCompanyHeader=function(t){return t.querySelector(this.getQuoteHeaderInfoId()+" h1").textContent.trim()},e.prototype.isCrypto=function(t){return t.querySelector(this.getQuoteHeaderInfoId()).textContent.includes("CoinMarketCap")},e.prototype.isEtf=function(t){var e=t.querySelector("#quote-summary");return(new o.c).removeExtraWhitespace(e.textContent).includes("Net Assets")},e.prototype.isNoResultsPage=function(t){return!!t.getElementById("lookup-page")},e.prototype.isTickerUrl=function(t){return t.startsWith("https://finance.yahoo.com/quote/")}}(e.T)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxFQUVBLFlBQUFoQixnQkFBQSxTQUFnQlIsR0FDWixRQUFTQSxFQUFTZ0YsZUFBZSxjQUNyQyxFQUVBLFlBQUF2RSxZQUFBLFNBQVlWLEdBQ1IsT0FBT0EsRUFBSWtGLFdBQVcsbUNBQzFCLENBQ0osQ0FySkEsQ0FBa0MsSSIsInNvdXJjZXMiOlsid2VicGFjazovL3JvYmluaG9vZHRveWFob29maW5hbmNlLy4vc3JjL3NpdGVzL1NpdGUudHMiLCJ3ZWJwYWNrOi8vcm9iaW5ob29kdG95YWhvb2ZpbmFuY2UvLi9zcmMvdGlja2Vycy9UaWNrZXIudHMiLCJ3ZWJwYWNrOi8vcm9iaW5ob29kdG95YWhvb2ZpbmFuY2UvLi9zcmMvdGlja2Vycy9UaWNrZXJUeXBlLnRzIiwid2VicGFjazovL3JvYmluaG9vZHRveWFob29maW5hbmNlLy4vc3JjL3V0aWxzL1V0aWxzLnRzIiwid2VicGFjazovL3JvYmluaG9vZHRveWFob29maW5hbmNlL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3JvYmluaG9vZHRveWFob29maW5hbmNlL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9yb2Jpbmhvb2R0b3lhaG9vZmluYW5jZS93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3JvYmluaG9vZHRveWFob29maW5hbmNlLy4vc3JjL3NpdGVzL1lhaG9vRmluYW5jZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUaWNrZXIgfSBmcm9tIFwiLi4vdGlja2Vycy9UaWNrZXJcIjtcbmltcG9ydCB7IFRpY2tlclR5cGUgfSBmcm9tIFwiLi4vdGlja2Vycy9UaWNrZXJUeXBlXCI7XG5cbi8qKlxuICogUGFyZW50IGNsYXNzIGZvciBvYmplY3RzIGhvbGRpbmcgaW5mb3JtYXRpb25cbiAqIGFib3V0IGEgcGFydGljdWxhciB3ZWJzaXRlLlxuICovXG5leHBvcnQgY2xhc3MgU2l0ZSB7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIGJhc2VVcmw6IHN0cmluZztcbiAgICBFWENFUFRJT05fVElDS0VSUzogTWFwPGFueSwgYW55PiA9IG5ldyBNYXAoKTtcblxuICAgIGNvbnN0cnVjdG9yKG5hbWU6IHN0cmluZywgYmFzZVVybDogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuYmFzZVVybCA9IGJhc2VVcmw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIG5hbWUgb2YgdGhlIHNpdGVcbiAgICAgKi9cbiAgICBpcygpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5uYW1lO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdpdmVuIGEgVGlja2VyLCBjcmVhdGUgdGhlIGFwcHJvcHJpYXRlIHVybCBmb3IgdGhhdCBUaWNrZXJcbiAgICAgKiBvbiB0aGlzIFNpdGUuXG4gICAgICogQHBhcmFtIHRpY2tlciAtIHRoZSBUaWNrZXIgZm9yIHdoaWNoIHdlJ3JlIGNyZWF0aW5nIGEgdXJsXG4gICAgICovXG4gICAgY3JlYXRlVXJsRm9yVGlja2VyKHRpY2tlcjogVGlja2VyKTogYW55IHt9XG5cbiAgICAvKipcbiAgICAgKiBQdWxsIGFsbCBuZWNlc3NhcnkgaW5mb3JtYXRpb24gZnJvbSB0aGUgY3VycmVudCB1cmxcbiAgICAgKiBhbmQgcGFnZSB0byBjcmVhdGUgYSBUaWNrZXIgb2JqZWN0IHRvIHNlbmQgdG8gb3RoZXIgU2l0ZXNcbiAgICAgKiBAcGFyYW0gdXJsIC0gdXJsIG9mIHRoZSBjdXJyZW50IHBhZ2VcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnQgLSBET00gb2YgdGhlIGN1cnJlbnQgcGFnZVxuICAgICAqL1xuICAgIGdldFRpY2tlcih1cmw6IHN0cmluZywgZG9jdW1lbnQ6IERvY3VtZW50KTogYW55IHt9XG5cbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmUgdGhlIHR5cGUgb2YgdGlja2VyIGZvciB0aGUgY3VycmVudCBwYWdlXG4gICAgICogKHN0b2NrLCBjcnlwdG8sIGV0YylcbiAgICAgKiBAcGFyYW0gc2l0ZSAtIHRoZSBTaXRlIHdoaWNoIHRoZSB1c2VyIGlzIGN1cnJlbnRseSBvblxuICAgICAqIEBwYXJhbSBjcnlwdG9BcmcgLSBzb21lIHNpdGVzIG1heSBuZWVkIGEgc2VwYXJhdGUgd2F5IHRvIGlkZW50aWZ5IHdoZXRoZXIgb3Igbm90IHRoZSBwYWdlIGlzIGEgY3J5cHRvIHBhZ2UgKHN1Y2ggYXMgdGhlIHVybCkuXG4gICAgICogSWYgdGhhdCdzIHRoZSBjYXNlLCB0aGF0IGFyZyBnb2VzIGhlcmUuIE90aGVyd2lzZSwgdGhlIERvY3VtZW50IHBhcmFtIGlzIHVzdWFsbHkgc2VudCB0d2ljZS5cbiAgICAgKiBAcGFyYW0gZG9jdW1lbnQgLSB0aGUgRE9NIG9mIHRoZSBjdXJyZW50IHBhZ2UsIGFzIGEgRG9jdW1lbnQgb2JqZWN0LlxuICAgICAqIEByZXR1cm5zIFRpY2tlclR5cGUgb2YgdGhlIGN1cnJlbnQgcGFnZVxuICAgICAqL1xuICAgIGdldFRpY2tlclR5cGUoc2l0ZTogU2l0ZSwgY3J5cHRvQXJnOiBhbnksIGRvY3VtZW50OiBEb2N1bWVudCk6IFRpY2tlclR5cGUge1xuICAgICAgICBpZiAoc2l0ZS5pc0V0Zihkb2N1bWVudCkpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVGlja2VyVHlwZShcImV0ZlwiKTtcbiAgICAgICAgfSBlbHNlIGlmIChzaXRlLmlzQ3J5cHRvKGNyeXB0b0FyZykpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVGlja2VyVHlwZShcImNyeXB0b1wiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVGlja2VyVHlwZShcInN0b2NrXCIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHR5cGUgZm9yIHRoZSBtZXRob2RzIGJlbG93IGlzIFwiYW55XCIsIGJlY2F1c2Ugd2UgZG9uJ3Qgd2FudCB0byByZXR1cm4gYSB2YWx1ZSBpbiB0aGUgc3VwZXJjbGFzcywgd2hpY2ggd2Ugd291bGQgaGF2ZSB0byBzaW5jZSB3ZSdyZSB1c2luZyB0aGVtIGluIGdldFRpY2tlclR5cGUgYWJvdmUuXG4gICAgLy8gSW1wbGVtZW50YXRpb25zIG9mIHRoZXNlIG1ldGhvZHMgaW4gc3ViY2xhc3NlcyBzaG91bGQgcmV0dXJuIGEgYm9vbGVhbi5cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgY29tcGFueSdzIGZ1bGwgbmFtZVxuICAgICAqIEBwYXJhbSBkb2N1bWVudCAtIERPTSBjb250ZW50IG9mIHRoZSBjdXJyZW50IHBhZ2VcbiAgICAgKi9cbiAgICBnZXROYW1lKGRvY3VtZW50OiBEb2N1bWVudCk6IGFueSB7fVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBjdXJyZW50IHBhZ2UgaXMgZm9yIGEgY3J5cHRvY3VycmVuY3ksXG4gICAgICogZmFsc2Ugb3RoZXJ3aXNlLlxuICAgICAqIEBwYXJhbSB4IC0gYXJnIG9mIGFueSB0eXBlIHdoaWNoIHdpbGwgaGVscCBhIHBhcnRpdWxhciBzaXRlXG4gICAgICogaWRlbnRpZnkgYSBjcnlwdG9jdXJyZW5jeSBwYWdlLlxuICAgICAqL1xuICAgIGlzQ3J5cHRvKHg6IGFueSk6IGFueSB7fVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBjdXJyZW50IHBhZ2UgaXMgZm9yIGFuIEVURixcbiAgICAgKiBmYWxzZSBvdGhlcndpc2UuXG4gICAgICogQHBhcmFtIGRvY3VtZW50IC0gRE9NIG9mIHRoZSBjdXJyZW50IHBhZ2UuXG4gICAgICovXG4gICAgaXNFdGYoZG9jdW1lbnQ6IERvY3VtZW50KTogYW55IHt9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGN1cnJlbnQgcGFnZSBpcyBhIE5vIFJlc3VsdHMgcGFnZSxcbiAgICAgKiBmYWxzZSBvdGhlcndpc2UuXG4gICAgICogQHBhcmFtIGRvY3VtZW50IC0gRE9NIG9mIHRoZSBjdXJyZW50IHBhZ2UuXG4gICAgICovXG4gICAgaXNOb1Jlc3VsdHNQYWdlKGRvY3VtZW50OiBEb2N1bWVudCk6IGFueSB7fVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHVybCAtIHRoZSBjdXJyZW50IHBhZ2UncyB1cmxcbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoZSB1cmwgaW5kaWNhdGVzIHRoYXQgdGhlIHBhZ2UgaXMgZm9yIG9uZSBzcGVjaWZpYyBUaWNrZXIsXG4gICAgICogZmFsc2UgaWYgaXQncyBhbnkgb3RoZXIga2luZCBvZiBwYWdlLlxuICAgICAqL1xuICAgIGlzVGlja2VyVXJsKHVybDogc3RyaW5nKTogYW55IHt9XG59XG4iLCJpbXBvcnQgeyBUaWNrZXJUeXBlIH0gZnJvbSBcIi4vVGlja2VyVHlwZVwiO1xuaW1wb3J0IHsgVXRpbHMgfSBmcm9tIFwiLi4vdXRpbHMvVXRpbHNcIjtcblxuZXhwb3J0IGNsYXNzIFRpY2tlciB7XG4gICAgc3ltYm9sOiBzdHJpbmc7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIHRpY2tlclR5cGU6IFRpY2tlclR5cGU7XG5cbiAgICBjb25zdHJ1Y3RvcihzeW1ib2w6IHN0cmluZywgbmFtZTogc3RyaW5nLCB0aWNrZXJUeXBlOiBUaWNrZXJUeXBlKSB7XG4gICAgICAgIHRoaXMuc3ltYm9sID0gdGhpcy5jb252ZXJ0SHlwaGVuVG9QZXJpb2Qoc3ltYm9sKTtcbiAgICAgICAgbGV0IHV0aWxzID0gbmV3IFV0aWxzKCk7XG4gICAgICAgIHRoaXMubmFtZSA9IHV0aWxzLnJlbW92ZUV4dHJhV2hpdGVzcGFjZShuYW1lKTtcbiAgICAgICAgdGhpcy50aWNrZXJUeXBlID0gdGlja2VyVHlwZTtcbiAgICB9XG5cbiAgICBjb252ZXJ0SHlwaGVuVG9QZXJpb2Qoc3ltYm9sOiBzdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuIHN5bWJvbC5yZXBsYWNlKFwiLVwiLCBcIi5cIik7XG4gICAgfVxuXG4gICAgY29udmVydFBlcmlvZFRvSHlwaGVuKHN5bWJvbDogc3RyaW5nKSB7XG4gICAgICAgIHJldHVybiBzeW1ib2wucmVwbGFjZShcIi5cIiwgXCItXCIpO1xuICAgIH1cblxuICAgIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBgVGlja2VyIC0gc3ltYm9sOiAke3RoaXMuc3ltYm9sfSwgbmFtZTogJHt0aGlzLm5hbWV9LCB0eXBlOiAke3RoaXMudGlja2VyVHlwZX1gO1xuICAgIH1cblxuICAgIGVxdWFscyh0aGF0OiBUaWNrZXIpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIHRoaXMuc3ltYm9sID09PSB0aGF0LnN5bWJvbCAmJlxuICAgICAgICAgICAgdGhpcy5uYW1lRXF1YWxzKHRoYXQubmFtZSkgJiZcbiAgICAgICAgICAgIHRoaXMudGlja2VyVHlwZS5lcXVhbHModGhhdC50aWNrZXJUeXBlKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrIHRvIHNlZSBpZiBhIGdpdmVuIGNvbXBhbnkncyBuYW1lIG1hdGNoZXMgdGhpcyBjb21wYW55J3MgbmFtZS5cbiAgICAgKiBTaW5jZSB0aGVzZSB2YWx1ZXMgYXJlIGJlaW5nIHB1bGxlZCBmcm9tIGVhY2ggc2l0ZSB3ZSdyZSB2aXNpdGluZyAoYW5kIHdlIGNhbid0IGNvbnRyb2wgd2hhdCB0aGV5IGNhbGwgdGhlbSksXG4gICAgICogYW5kIHNpbmNlIHRoZXNlIGVxdWFsaXR5IGZ1bmN0aW9ucyBhcmUgKGF0IGxlYXN0IHNvIGZhcikgb25seSBiZWluZyB1c2VkIHRvIGZhY2lsaXRhdGUgdW5pdCB0ZXN0aW5nIGFueXdheSxcbiAgICAgKiB0aGlzIGZ1bmN0aW9uIGlzIGJhc2ljYWxseSBqdXN0IGNoZWNraW5nIHRvIHNlZSBpZiB0aGUgbmFtZXMgYXJlIFwiY2xvc2UgZW5vdWdoXCIgYnkgY2hlY2tpbmcgdG8gc2VlIGlmIG9uZSBzdHJpbmcgaW5jbHVkZXMgdGhlIG90aGVyLlxuICAgICAqXG4gICAgICogRm9yIGV4YW1wbGUsIHRoZSBSSCBwYWdlIGZvciAkU1BZIGNhbGxzIGl0IFwiU1BEUiBTJlAgNTAwIEVURlwiLCB3aGlsZSBZRiBjYWxscyBpdCBcIlNQRFIgUyZQIDUwMCBFVEYgVHJ1c3RcIi5cbiAgICAgKiBFdmVuIHRob3VnaCB0aGUgc3RyaW5ncyBhcmVuJ3QgaWRlbnRpY2FsLCB3ZSBzdGlsbCB3YW50IHRoZXNlIHRvIGJlIGNvbnNpZGVyZWQgZXF1YWwsIHNvIHdlIGNhbiBqdXN0IGNoZWNrIGlmIG9uZSBjb250YWlucyB0aGUgb3RoZXIsIHdoaWNoIGl0IGRvZXMuXG4gICAgICpcbiAgICAgKiBUT0RPIC0gdGhlcmUgd2lsbCBwcm9iYWJseSBiZSBzb21lIGVkZ2UgY2FzZXMgZm9yIHdoaWNoIHRoaXMgc29sdXRpb24gd2lsbCBub3Qgd29yaywgc28gdGhpcyB3aWxsIGxpa2VseSBoYXZlIHRvIGJlIHJldmlzZWQgaW4gdGhlIGZ1dHVyZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0aGF0TmFtZSAtIG5hbWUgb2YgdGhlIGNvbXBhbnkgdG8gd2hpY2ggd2UncmUgY29tcGFyaW5nIHRoaXMgY29tcGFueVxuICAgICAqIEByZXR1cm5zIHRydWUgaWYgdGhlIGNvbXBhbmllcycgbmFtZXMgYXJlIHRoZSBzYW1lIChvciBhdCBsZWFzdCwgY2xvc2UgZW5vdWdoKVxuICAgICAqL1xuICAgIG5hbWVFcXVhbHModGhhdE5hbWU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICBsZXQgdGhpc05hbWUgPSB0aGlzLm5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgdGhhdE5hbWUgPSB0aGF0TmFtZS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgIHJldHVybiB0aGlzTmFtZS5pbmNsdWRlcyh0aGF0TmFtZSkgfHwgdGhhdE5hbWUuaW5jbHVkZXModGhpc05hbWUpO1xuICAgIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBUaWNrZXJUeXBlIHtcbiAgICBWQUxJRF9UWVBFUyA9IFtcInN0b2NrXCIsIFwiZXRmXCIsIFwibXV0dWFsZnVuZFwiLCBcImNyeXB0b1wiLCBcImZ1dHVyZVwiLCBcImJvbmRcIl07XG4gICAgdmFsdWU6IHN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yKHRpY2tlclR5cGU6IHN0cmluZykge1xuICAgICAgICB0aWNrZXJUeXBlID0gdGlja2VyVHlwZS50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcbiAgICAgICAgaWYgKHRoaXMuaXNWYWxpZFR5cGUodGlja2VyVHlwZSkpIHtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0aWNrZXJUeXBlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCB0aWNrZXJUeXBlOiBcIiArIHRpY2tlclR5cGUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHR0IC0gVGlja2VyVHlwZSBhcyBhIHN0cmluZ1xuICAgICAqIEByZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIHN0cmluZyBpcyB3aXRoaW5cbiAgICAgKiB0aGUgVkFMSURfVFlQRVMgbGlzdCwgZmFsc2Ugb3RoZXJ3aXNlXG4gICAgICovXG4gICAgaXNWYWxpZFR5cGUodHQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5WQUxJRF9UWVBFUy5pbmNsdWRlcyh0dCk7XG4gICAgfVxuXG4gICAgdG9TdHJpbmcoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWU7XG4gICAgfVxuXG4gICAgZXF1YWxzKHRoYXQ6IFRpY2tlclR5cGUpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUgPT09IHRoYXQudmFsdWU7XG4gICAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIFV0aWxzIHtcbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGxhcmdlIGNodW5rcyBvZiB3aGl0ZXNwYWNlIGZyb20gYSBnaXZlbiBzdHJpbmcsXG4gICAgICogcmVwbGFjaW5nIGVhY2ggd2l0aCBqdXN0IGEgc2luZ2xlIHNwYWNlLlxuICAgICAqIEBwYXJhbSBzdHIgLSB0ZXh0IHdoaWNoIGNvbnRhaW5zIGV4Y2VzcyB3aGl0ZXNwYWNlXG4gICAgICogQHJldHVybnMgc3RyaW5nIHdpdGggZXhjZXNzIHdoaXRlc3BhY2UgcmVtb3ZlZFxuICAgICAqL1xuICAgIHJlbW92ZUV4dHJhV2hpdGVzcGFjZShzdHI6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIGxldCByZWdleCA9IG5ldyBSZWdFeHAoXCJcXFxccytcIik7XG4gICAgICAgIGxldCBzcGxpdCA9IHN0ci5zcGxpdChyZWdleCk7XG4gICAgICAgIGxldCBmdWxsID0gXCJcIjtcbiAgICAgICAgc3BsaXQuZm9yRWFjaChmdW5jdGlvbiAod29yZCkge1xuICAgICAgICAgICAgZnVsbCA9IGZ1bGwgKyB3b3JkLnRyaW0oKSArIFwiIFwiO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gR2V0IHJpZCBvZiB0aGUgb25lIGV4dHJhIHNwYWNlIGF0IHRoZSBlbmQgYmVmb3JlIHdlIHJldHVyblxuICAgICAgICByZXR1cm4gZnVsbC50cmltKCk7XG4gICAgfVxufVxuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCJpbXBvcnQgeyBTaXRlIH0gZnJvbSBcIi4vU2l0ZVwiO1xuaW1wb3J0IHsgVGlja2VyVHlwZSB9IGZyb20gXCIuLi90aWNrZXJzL1RpY2tlclR5cGVcIjtcbmltcG9ydCB7IFRpY2tlciB9IGZyb20gXCIuLi90aWNrZXJzL1RpY2tlclwiO1xuaW1wb3J0IHsgVXRpbHMgfSBmcm9tIFwiLi4vdXRpbHMvVXRpbHNcIjtcblxuZXhwb3J0IGNsYXNzIFlhaG9vRmluYW5jZSBleHRlbmRzIFNpdGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcihcIllhaG9vRmluYW5jZVwiLCBgaHR0cHM6Ly9maW5hbmNlLnlhaG9vLmNvbWApO1xuXG4gICAgICAgIHRoaXMuRVhDRVBUSU9OX1RJQ0tFUlMuc2V0KFtcIkdSVDY3MTlcIiwgXCJjcnlwdG9cIl0sIFtcIkdSVFwiLCBcImNyeXB0b1wiXSk7XG4gICAgfVxuXG4gICAgY3JlYXRlVXJsRm9yVGlja2VyKHRpY2tlcjogVGlja2VyKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IHM6IHN0cmluZyA9IHRpY2tlci5jb252ZXJ0UGVyaW9kVG9IeXBoZW4odGlja2VyLnN5bWJvbCk7XG5cbiAgICAgICAgcyA9IHRoaXMuY2hlY2tFeGNlcHRpb25MaXN0KHMsIHRpY2tlci50aWNrZXJUeXBlLnRvU3RyaW5nKCksIGZhbHNlKTtcblxuICAgICAgICAvLyBJZiB0aGUgcGFnZSB0aGF0IHdlJ3JlIG9uIGlzIGZvciBhIHN0b2NrIG9yIEVURiwgdGhlbiB3ZSBjYW4ganVzdCBsZWF2ZSB0aGUgdGlja2VyIGFzLWlzLlxuICAgICAgICAvLyBJZiB0aGUgcGFnZSB0aGF0IHdlJ3JlIG9uIGlzIGZvciBhIGNyeXB0b2N1cnJlbmN5LCB0aGVuIHdlIG5lZWRcbiAgICAgICAgLy8gdG8gYWRqdXN0IHRoZSB0aWNrZXIgdG8gYWRkIHRoZSBcInF1b3RlIGN1cnJlbmN5XCIgLS1cbiAgICAgICAgLy8gdGhlIGN1cnJlbmN5IGZvciB3aGljaCB3ZSdyZSBkaXNwbGF5aW5nIHRoZSBleGNoYW5nZSByYXRlIHRvIHRoZSBjcnlwdG9jdXJyZW5jeS5cbiAgICAgICAgLy8gQnkgZGVmYXVsdCwgd2UnbGwgdXNlIHRoZSBVUyBEb2xsYXIgKFwiVVNEXCIpLlxuICAgICAgICAvLyBUT0RPOiBBbGxvdyB1c2VyIHRvIHNlbGVjdCB0aGVpciBwcmVmZXJyZWQgcXVvdGUgY3VycmVuY3kgaW4gT3B0aW9ucyBtZW51LlxuICAgICAgICBpZiAodGlja2VyLnRpY2tlclR5cGUudmFsdWUgPT09IFwiY3J5cHRvXCIpIHtcbiAgICAgICAgICAgIHMgPSBzICsgYC1VU0RgO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgJHt0aGlzLmJhc2VVcmx9L3F1b3RlLyR7c31gO1xuICAgIH1cblxuICAgIGdldFRpY2tlcih1cmw6IHN0cmluZywgZG9jdW1lbnQ6IERvY3VtZW50KTogVGlja2VyIHtcbiAgICAgICAgbGV0IHRpY2tlclN0cmluZzogc3RyaW5nID0gdGhpcy5nZXRUaWNrZXJGcm9tUGFnZShcbiAgICAgICAgICAgIGRvY3VtZW50LFxuICAgICAgICAgICAgdGhpcy5pc0NyeXB0byhkb2N1bWVudClcbiAgICAgICAgKTtcbiAgICAgICAgbGV0IHRpY2tlclR5cGU6IFRpY2tlclR5cGUgPSB0aGlzLmdldFRpY2tlclR5cGUoXG4gICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgZG9jdW1lbnQsXG4gICAgICAgICAgICBkb2N1bWVudFxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiBuZXcgVGlja2VyKFxuICAgICAgICAgICAgdGhpcy5jaGVja0V4Y2VwdGlvbkxpc3QodGlja2VyU3RyaW5nLCB0aWNrZXJUeXBlLnRvU3RyaW5nKCksIHRydWUpLFxuICAgICAgICAgICAgdGhpcy5nZXROYW1lKGRvY3VtZW50KSxcbiAgICAgICAgICAgIHRpY2tlclR5cGVcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGVyZSBhcmUgYSBmZXcgb3V0bGllciBzZWN1cml0aWVzIHdoaWNoIGRvIG5vdCBhYmlkZSBieSB0aGUgdXJsIGNyZWF0aW9uXG4gICAgICogcnVsZXMgd2hpY2ggYXJlIG5vcm1hbGx5IHVzZWQgb24gY2VydGFpbiBzaXRlcy4gVG8gaGFuZGxlIHRoZXNlIGNhc2VzLCB3ZSBuZWVkIHRvXG4gICAgICogY2hlY2sgdG8gc2VlIGlmIG91ciB0aWNrZXIgZmFsbHMgaW50byB0aGlzIHNtYWxsIHNldCBvZiBleGNlcHRpb25zLFxuICAgICAqIGFuZCBpZiBzbywgdG8gY29udmVydCBpdCB0byB0aGUgY29ycmVjdCB0aWNrZXIuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdGlja2VyU3RyIC0gdGhlIHRpY2tlciB3aGljaCB3ZSdyZSBjaGVja2luZyB0byBzZWUgaWYgaXQncyBvbiB0aGUgZXhjZXB0aW9uIGxpc3RcbiAgICAgKiBAcGFyYW0gdHRTdHIgLSB0aGUgdGlja2VyIHR5cGUgb2YgdGhlIGdpdmVuIHRpY2tlclxuICAgICAqIEBwYXJhbSBpc091dGdvaW5nIC0gdHJ1ZSBpZiB3ZSdyZSBjb252ZXJ0aW5nIHRoZSB0aWNrZXIgdG9cbiAgICAgKiB1c2UgaXQgZm9yIGEgZGlmZmVyZW50IHNpdGUsIGZhbHNlIGlmIHRoaXMgaXMgYW4gaW5jb21pbmcgdGlja2VyXG4gICAgICogd2hpY2ggd2UncmUgY29udmVydGluZyBmb3IgdXNlIG9uICp0aGlzKiBzaXRlLlxuICAgICAqIEByZXR1cm5zIHRoZSBjb3JyZWN0IHRpY2tlciBzdHJpbmcsIHdoZXRoZXIgaXQgbmVlZGVkIHRvIGJlIGFkanVzdGVkIG9yIG5vdC5cbiAgICAgKi9cbiAgICBjaGVja0V4Y2VwdGlvbkxpc3QoXG4gICAgICAgIHRpY2tlclN0cjogc3RyaW5nLFxuICAgICAgICB0dFN0cjogc3RyaW5nLFxuICAgICAgICBpc091dGdvaW5nOiBib29sZWFuXG4gICAgKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IGFyZ0FycmF5ID0gW3RpY2tlclN0ciwgdHRTdHJdO1xuICAgICAgICBsZXQgZXhjZXB0aW9uSXRlcmF0b3IgPSB0aGlzLkVYQ0VQVElPTl9USUNLRVJTLmVudHJpZXMoKTtcbiAgICAgICAgZm9yIChsZXQgcGFpciBvZiBleGNlcHRpb25JdGVyYXRvcikge1xuICAgICAgICAgICAgbGV0IGtleUFycmF5O1xuICAgICAgICAgICAgbGV0IHZhbEFycmF5O1xuICAgICAgICAgICAgaWYgKGlzT3V0Z29pbmcpIHtcbiAgICAgICAgICAgICAgICBrZXlBcnJheSA9IHBhaXJbMF07XG4gICAgICAgICAgICAgICAgdmFsQXJyYXkgPSBwYWlyWzFdO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBrZXlBcnJheSA9IHBhaXJbMV07XG4gICAgICAgICAgICAgICAgdmFsQXJyYXkgPSBwYWlyWzBdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoYXJnQXJyYXlbMF0gPT09IGtleUFycmF5WzBdICYmIGFyZ0FycmF5WzFdID09PSBrZXlBcnJheVsxXSkge1xuICAgICAgICAgICAgICAgIHRpY2tlclN0ciA9IHZhbEFycmF5WzBdO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRpY2tlclN0cjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyBpZCBmb3IgdGhlIHF1b3RlIGhlYWRlciBlbGVtZW50XG4gICAgICovXG4gICAgZ2V0UXVvdGVIZWFkZXJJbmZvSWQoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIFwiI3F1b3RlLWhlYWRlci1pbmZvXCI7XG4gICAgfVxuXG4gICAgZ2V0TmFtZShkb2N1bWVudDogRG9jdW1lbnQpOiBzdHJpbmcge1xuICAgICAgICBsZXQgbmFtZSA9IHRoaXMuZ2V0Q29tcGFueUhlYWRlcihkb2N1bWVudCk7XG4gICAgICAgIGxldCBuYW1lV2l0aFRpY2tlclJlbW92ZWQgPSBuYW1lLnNwbGl0KFwiIChcIilbMF07XG4gICAgICAgIGxldCB1dGlscyA9IG5ldyBVdGlscygpO1xuICAgICAgICByZXR1cm4gdXRpbHMucmVtb3ZlRXh0cmFXaGl0ZXNwYWNlKG5hbWVXaXRoVGlja2VyUmVtb3ZlZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmluZCB0aGUgdGlja2VyIHN5bWJvbCBpbiB0aGUgcGFnZSwgYW5kIHNlcGFyYXRlIGl0IGZyb20gYW55IHVubmVjZXNzYXJ5IHRleHRcbiAgICAgKiB3aGljaCBzdXJyb3VuZHMgaXQuXG4gICAgICogQHBhcmFtIGRvY3VtZW50IC0gRE9NIG9mIHRoZSBjdXJyZW50IHBhZ2VcbiAgICAgKiBAcGFyYW0gaXNDcnlwdG8gLSB0cnVlIGlmIHRoZSBjdXJyZW50IHBhZ2UgaXMgZm9yIGEgY3J5cHRvY3VycmVuY3ksXG4gICAgICogZmFsc2Ugb3RoZXJ3aXNlXG4gICAgICogQHJldHVybnMgdGlja2VyIHN5bWJvbFxuICAgICAqL1xuICAgIGdldFRpY2tlckZyb21QYWdlKGRvY3VtZW50OiBEb2N1bWVudCwgaXNDcnlwdG86IGJvb2xlYW4pOiBzdHJpbmcge1xuICAgICAgICBsZXQgbmFtZSA9IHRoaXMuZ2V0Q29tcGFueUhlYWRlcihkb2N1bWVudCk7XG4gICAgICAgIGxldCBjbGVhbmVkVXBTeW1ib2wgPSBuYW1lLnNwbGl0KFwiIChcIilbMV07XG4gICAgICAgIGNsZWFuZWRVcFN5bWJvbCA9IGNsZWFuZWRVcFN5bWJvbC5zcGxpdChcIilcIilbMF07XG4gICAgICAgIGlmIChpc0NyeXB0bykge1xuICAgICAgICAgICAgY2xlYW5lZFVwU3ltYm9sID0gY2xlYW5lZFVwU3ltYm9sLnNwbGl0KFwiLVwiKVswXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjbGVhbmVkVXBTeW1ib2w7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIGRvY3VtZW50IC0gRE9NIG9mIHRoZSBjdXJyZW50IHBhZ2VcbiAgICAgKiBAcmV0dXJucyB0ZXh0IGNvbnRlbnQgb2YgdGhlIGNvbXBhbnkgaGVhZGVyIGVsZW1lbnRcbiAgICAgKi9cbiAgICBnZXRDb21wYW55SGVhZGVyKGRvY3VtZW50OiBEb2N1bWVudCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBkb2N1bWVudFxuICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5nZXRRdW90ZUhlYWRlckluZm9JZCgpICsgXCIgaDFcIilcbiAgICAgICAgICAgIC50ZXh0Q29udGVudC50cmltKCk7XG4gICAgfVxuXG4gICAgaXNDcnlwdG8oZG9jdW1lbnQ6IERvY3VtZW50KTogYm9vbGVhbiB7XG4gICAgICAgIGxldCBxdW90ZUhlYWRlckluZm8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgICAgdGhpcy5nZXRRdW90ZUhlYWRlckluZm9JZCgpXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiBxdW90ZUhlYWRlckluZm8udGV4dENvbnRlbnQuaW5jbHVkZXMoXCJDb2luTWFya2V0Q2FwXCIpO1xuICAgIH1cblxuICAgIGlzRXRmKGRvY3VtZW50OiBEb2N1bWVudCk6IGJvb2xlYW4ge1xuICAgICAgICBsZXQgcXVvdGVTdW1tYXJ5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNxdW90ZS1zdW1tYXJ5XCIpO1xuICAgICAgICBsZXQgdXRpbHMgPSBuZXcgVXRpbHMoKTtcblxuICAgICAgICBsZXQgdGV4dENsZWFuZWRVcCA9IHV0aWxzLnJlbW92ZUV4dHJhV2hpdGVzcGFjZShcbiAgICAgICAgICAgIHF1b3RlU3VtbWFyeS50ZXh0Q29udGVudFxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gdGV4dENsZWFuZWRVcC5pbmNsdWRlcyhcIk5ldCBBc3NldHNcIik7XG4gICAgfVxuXG4gICAgaXNOb1Jlc3VsdHNQYWdlKGRvY3VtZW50OiBEb2N1bWVudCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gISFkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxvb2t1cC1wYWdlXCIpO1xuICAgIH1cblxuICAgIGlzVGlja2VyVXJsKHVybDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB1cmwuc3RhcnRzV2l0aChcImh0dHBzOi8vZmluYW5jZS55YWhvby5jb20vcXVvdGUvXCIpO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJuYW1lIiwiYmFzZVVybCIsIkVYQ0VQVElPTl9USUNLRVJTIiwiTWFwIiwidGhpcyIsImlzIiwiY3JlYXRlVXJsRm9yVGlja2VyIiwidGlja2VyIiwiZ2V0VGlja2VyIiwidXJsIiwiZG9jdW1lbnQiLCJnZXRUaWNrZXJUeXBlIiwic2l0ZSIsImNyeXB0b0FyZyIsImlzRXRmIiwiaXNDcnlwdG8iLCJnZXROYW1lIiwieCIsImlzTm9SZXN1bHRzUGFnZSIsImlzVGlja2VyVXJsIiwic3ltYm9sIiwidGlja2VyVHlwZSIsImNvbnZlcnRIeXBoZW5Ub1BlcmlvZCIsInV0aWxzIiwicmVtb3ZlRXh0cmFXaGl0ZXNwYWNlIiwicmVwbGFjZSIsImNvbnZlcnRQZXJpb2RUb0h5cGhlbiIsInRvU3RyaW5nIiwiZXF1YWxzIiwidGhhdCIsIm5hbWVFcXVhbHMiLCJ0aGF0TmFtZSIsInRoaXNOYW1lIiwidG9Mb3dlckNhc2UiLCJpbmNsdWRlcyIsIlZBTElEX1RZUEVTIiwidHJpbSIsImlzVmFsaWRUeXBlIiwiRXJyb3IiLCJ2YWx1ZSIsInR0Iiwic3RyIiwicmVnZXgiLCJSZWdFeHAiLCJzcGxpdCIsImZ1bGwiLCJmb3JFYWNoIiwid29yZCIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiZCIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsInNldCIsInMiLCJjaGVja0V4Y2VwdGlvbkxpc3QiLCJ0aWNrZXJTdHJpbmciLCJnZXRUaWNrZXJGcm9tUGFnZSIsInRpY2tlclN0ciIsInR0U3RyIiwiaXNPdXRnb2luZyIsImFyZ0FycmF5IiwiZXhjZXB0aW9uSXRlcmF0b3IiLCJlbnRyaWVzIiwicGFpciIsImtleUFycmF5IiwidmFsQXJyYXkiLCJnZXRRdW90ZUhlYWRlckluZm9JZCIsIm5hbWVXaXRoVGlja2VyUmVtb3ZlZCIsImdldENvbXBhbnlIZWFkZXIiLCJjbGVhbmVkVXBTeW1ib2wiLCJxdWVyeVNlbGVjdG9yIiwidGV4dENvbnRlbnQiLCJxdW90ZVN1bW1hcnkiLCJnZXRFbGVtZW50QnlJZCIsInN0YXJ0c1dpdGgiXSwic291cmNlUm9vdCI6IiJ9